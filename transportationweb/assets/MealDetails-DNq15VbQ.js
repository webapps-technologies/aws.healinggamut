import{e as b,c as te,B as se,j as m,k as c,l as f,m as a,C as r,F as P,y as t,D as h,I as i,u as T,G as le,x as _,t as F,E as v}from"./@vue-_x7nCA0A.js";import{f as ae,j as oe}from"./@mdi-D9eD29fv.js";import{b as de}from"./vue-router-Dl416FTG.js";import{u as ie}from"./vuex-TZZnsCVb.js";import{h as ne}from"./moment-Cl4UOzQZ.js";const re={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},ce={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 pb-6"},ue={for:"Name",class:"font-semibold text-slate-800 dark:text-white"},me=t("span",{class:"text-slate-400/[0.9]"},"Meal Name : ",-1),fe={for:"Address",class:"font-semibold text-slate-800 dark:text-white"},pe=t("span",{class:"text-slate-400/[0.9]"},"Price : ",-1),_e={for:"State",class:"font-semibold text-slate-800 dark:text-white"},ge=t("span",{class:"text-slate-400/[0.9]"},"Discount : ",-1),he={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 pb-6"},be={for:"City",class:"font-semibold text-slate-800 dark:text-white"},ye=t("span",{class:"text-slate-400/[0.9]"},"Ratting : ",-1),xe={for:"Pincode",class:"font-semibold text-slate-800 dark:text-white col-span-2"},ve=t("span",{class:"text-slate-400/[0.9]"},"Short Description : ",-1),ke={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},Ae={for:"Pincode",class:"font-semibold text-slate-800 dark:text-white"},Se=t("span",{class:"text-slate-400/[0.9]"},"Description : ",-1),we={class:"grid grid-cols-1 lg:grid-cols-1 gap-6 border"},Me={class:"mt-3 px-6 table-sec"},Ve={key:0},Ie=t("caption",null,null,-1),Ce=t("thead",{class:"bg-white dark:bg-gray-900/80 dark:backdrop-blur-md"},[t("tr",null,[t("th",null,"Sl.No."),t("th",null,"State Name"),t("th",null,"City Name"),t("th",null,"Area Name"),t("th",null,"Pincode"),t("th",null,"Address"),t("th",{class:"lg:flex lg:justify-center"},"Action")])],-1),De={"data-label":"Sr.No"},je={"data-label":"state"},Ne={"data-label":"city"},Le={"data-label":"area"},Ue={"data-label":"pincode"},Oe={"data-label":"address"},Ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6 new-table"},Pe={class:"flex justify-right md:block"},Te={key:0,for:"Labtest Status"},Fe=t("span",{class:"text-indigo-500 font-semibold"},"Status :",-1),Be={class:"font-semibold pl-2 text-green-400"},Ye={key:1,for:"Labtest Status"},Re=t("span",{class:"text-indigo-500 font-semibold"},"Status : ",-1),$e={class:"font-semibold pl-2 text-red-400"},qe={key:2,for:"Labtest Status"},ze=t("span",{class:"text-indigo-500 font-semibold"},"Status : ",-1),Ge={class:"font-semibold pl-2 text-yellow-600"},He={class:"mr-6 mb-3 last:mr-0 font-semibold text-slate-800 dark:text-white"},Je=t("span",{class:"text-indigo-500"},"Created At :",-1),Ke={class:"control-label ml-1"},Qe=t("br",null,null,-1),We={class:"mr-6 mb-3 last:mr-0 font-semibold text-slate-800 dark:text-white"},Xe=t("span",{class:"text-indigo-500"},"Updated At :",-1),Ze={class:"control-label ml-1"},et={class:"grid grid-cols-1 lg:grid-cols-3 gap-2"},tt={class:"grid grid-cols-1 lg:grid-cols-1 gap-2"},st={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},lt={class:"absolute flex justify-center items-center gap-2"},at=["src"],ot={key:1,class:"text-center text-neutral-400 font-bold"},dt=t("p",{class:"text-slate-600 dark:text-white/75 pb-5 text-xl flex justify-center"},"Are you sure, you want to Delete ?",-1),pt={__name:"MealDetails",setup(it){const n=ie(),w=de(),d=b(()=>n.state.Meals),k=b(()=>n.state.Location),e=te({limit:10,offset:0,keyword:"",status:!0,submit:!1,id:null,mealId:null,addressModel:!1,imgModal:!1,deleteModelStatus:!1,addressId:null,state:null,city:null,area:null,address:null,selectStateId:null,selectCityId:null,image:null,imageFile:null});se(()=>{w.query.id&&(e.mealId=w.query.id,B(e.mealId),Y())});const B=s=>{n.dispatch("Meals/getOneMeals",{id:s})};function Y(){n.dispatch("Location/getState",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status})}function R(s){s&&n.dispatch("Location/getState",{limit:e.limit,offset:e.offset,keyword:s,status:e.status})}function $(s){s.id&&(e.selectStateId=s.id,n.dispatch("Location/getCity",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status,stateId:s.id}))}function q(s){var l;e.state?n.dispatch("Location/getCity",{limit:e.limit,offset:e.offset,keyword:s,status:e.status,stateId:(l=e.state)==null?void 0:l.id}):n.dispatch("Alert/error",{msg:"Please Select State"})}function z(s){s.id&&n.dispatch("Location/getArea",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status,cityId:s.id})}function G(s){var l;e.state&&e.city?n.dispatch("Location/getArea",{limit:e.limit,offset:e.offset,keyword:s,status:e.status,cityId:(l=e.city)==null?void 0:l.id}):n.dispatch("Alert/error",{msg:"Please Select City"})}function H(){var s,l,u;if(V.value||I.value||C.value){e.submit=!0;return}e.submit=!1,n.dispatch("Meals/saveOneMealAddress",{address:e.address,cityId:(s=e.city)==null?void 0:s.id,areaId:(l=e.area)==null?void 0:l.id,stateId:(u=e.state)==null?void 0:u.id,mealId:e.mealId}),e.addressModel=!1}function M(s){return s?ne(s).format("MMM Do YYYY hh:mm A"):"-"}function J(s){e.deleteModelStatus=!0,e.addressId=s}function K(){n.dispatch("Meals/saveOneMealsAddressDelete",{id:e.addressId}),e.deleteModelStatus=!1}function Q(){e.addressModel=!0,e.state=null,e.city=null,e.area=null,e.address=null}async function W(s){if(s){const l=await s.target;if(l.files[0].type==="image/png"||l.files[0].type==="image/jpg"||l.files[0].type==="image/jpeg")if(l.files[0].size<=1e6){if(l.files){const u=new FileReader;u.onload=p=>{e.image=p.target.result},e.imageFile=l.files[0],u.readAsDataURL(l.files[0])}}else n.dispatch("Alert/error",{msg:"Image too big (max 1 Mb allowed)"});else n.dispatch("Alert/error",{msg:"Upload image in png format."})}}function X(){e.imageFile&&(n.dispatch("Meals/saveOneHotelImage",{mealId:e.mealId,file:e.imageFile}),e.imgModal=!1)}const V=b(()=>{var s;if(!((s=e.state)!=null&&s.id))return"Select State!"}),I=b(()=>{var s;if(!((s=e.city)!=null&&s.id))return"Select City!"}),C=b(()=>{var s;if(!((s=e.area)!=null&&s.id))return"Select area!"});return(s,l)=>{const u=m("new-card"),p=m("base-button"),y=m("base-buttons"),Z=m("card-component"),D=m("main-section"),A=m("search-select"),x=m("field"),ee=m("control"),S=m("modal-box");return c(),f(P,null,[a(D,null,{default:r(()=>[t("div",re,[a(u,{title:"Meal Details"},{default:r(()=>[t("div",ce,[t("label",ue,[me,h(i(d.value.name),1)]),t("label",fe,[pe,h(i(d.value.price),1)]),t("label",_e,[ge,h(i(d.value.discount)+"%",1)])]),t("div",he,[t("label",be,[ye,h(i(d.value.rating),1)]),t("label",xe,[ve,h(i(d.value.shortDesc),1)])]),t("div",ke,[t("label",Ae,[Se,h(i(d.value.desc),1)])])]),_:1}),t("div",we,[a(Z,{class:"mb-6",title:"Address",onHeaderIconClicked:Q,headerIcon:T(ae),iconText:"Add Address","has-table":""},{default:r(()=>{var o,j;return[t("div",Me,[((o=d.value.mealAddress)==null?void 0:o.length)>0?(c(),f("table",Ve,[Ie,Ce,t("tbody",null,[(c(!0),f(P,null,le(d.value.mealAddress,(g,N)=>{var L,U,O,E;return c(),f("tr",{key:N},[t("td",De,i(N+1),1),t("td",je,i((L=g.state)==null?void 0:L.name),1),t("td",Ne,i((U=g.city)==null?void 0:U.name),1),t("td",Le,i((O=g.area)==null?void 0:O.name),1),t("td",Ue,i((E=g.area)==null?void 0:E.pincode),1),t("td",Oe,i(g.address),1),t("td",null,[a(y,{type:"justify-start lg:justify-center","no-wrap":""},{default:r(()=>[a(p,{type:"button",title:"Delete Address",color:"danger",icon:T(oe),small:"",rounded:"",onClick:v(nt=>J(g.id),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])])}),128))])])):_("",!0)]),((j=d.value.mealAddress)==null?void 0:j.length)<=0?(c(),F(u,{key:0,empty:""})):_("",!0)]}),_:1},8,["headerIcon"])])])]),_:1}),a(D,null,{default:r(()=>[t("div",Ee,[a(u,{title:"Dates"},{default:r(()=>[t("div",Pe,[d.value.status=="ACTIVE"?(c(),f("label",Te,[Fe,t("span",Be,i(d.value.status),1)])):_("",!0),d.value.status=="PENDING"?(c(),f("label",Ye,[Re,t("span",$e,i(d.value.status),1)])):_("",!0),d.value.status=="DEACTIVE"?(c(),f("label",qe,[ze,t("span",Ge,i(d.value.status),1)])):_("",!0)]),t("label",He,[Je,t("span",Ke,i(M(d.value.createdAt)),1)]),Qe,t("label",We,[Xe,t("span",Ze,i(M(d.value.updatedAt)),1)])]),_:1})]),a(S,{modelValue:e.addressModel,"onUpdate:modelValue":l[4]||(l[4]=o=>e.addressModel=o),title:"Add Address"},{default:r(()=>[t("div",et,[a(x,{label:"State *",help:e.submit?V.value:""},{default:r(()=>[a(A,{modelValue:e.state,"onUpdate:modelValue":l[0]||(l[0]=o=>e.state=o),options:k.value.stateData,onOnType:R,onOnSelected:$},null,8,["modelValue","options"])]),_:1},8,["help"]),a(x,{label:"City *",help:e.submit?I.value:""},{default:r(()=>[a(A,{modelValue:e.city,"onUpdate:modelValue":l[1]||(l[1]=o=>e.city=o),options:k.value.cityData,onOnType:q,onOnSelected:z},null,8,["modelValue","options"])]),_:1},8,["help"]),a(x,{label:"Area *",help:e.submit?C.value:""},{default:r(()=>[a(A,{modelValue:e.area,"onUpdate:modelValue":l[2]||(l[2]=o=>e.area=o),options:k.value.areaData,onOnType:G,onOnSelected:s.selectArea},null,8,["modelValue","options","onOnSelected"])]),_:1},8,["help"])]),t("div",tt,[a(x,{label:"Address"},{default:r(()=>[a(ee,{modelValue:e.address,"onUpdate:modelValue":l[3]||(l[3]=o=>e.address=o),type:"textarea",name:"address",autocomplete:"address",placeholder:"Enter Address"},null,8,["modelValue"])]),_:1})]),a(y,{type:"justify-center lg:justify-center pt-5"},{default:r(()=>[d.value.loaderNew?_("",!0):(c(),F(p,{key:0,type:"button",color:"info",small:"",label:"Submit",onClick:v(H,["prevent"])}))]),_:1})]),_:1},8,["modelValue"]),a(S,{modelValue:e.imgModal,"onUpdate:modelValue":l[7]||(l[7]=o=>e.imgModal=o),title:"Add Image"},{default:r(()=>[t("section",null,[t("div",st,[t("input",{type:"file",id:"image_input",name:"logo",accept:"image/*",onChange:l[5]||(l[5]=o=>W(o)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),t("div",lt,[e.image?(c(),f("img",{key:0,class:"h-48 opacity-1",src:e.image},null,8,at)):_("",!0),e.image?_("",!0):(c(),f("span",ot,"Upload Image"))])]),a(y,{type:"justify-center lg:justify-center pt-5"},{default:r(()=>[a(p,{type:"button",color:"danger",small:"",label:"Upload",onClick:v(X,["prevent"])}),a(p,{type:"button",color:"info",small:"",label:"Cancel",onClick:l[6]||(l[6]=v(o=>e.imgModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),a(S,{modelValue:e.deleteModelStatus,"onUpdate:modelValue":l[9]||(l[9]=o=>e.deleteModelStatus=o),title:"Address delete confirmation",class:"backdrop-blur-sm"},{default:r(()=>[dt,a(y,{class:"flex justify-center"},{default:r(()=>[a(p,{onClick:K,color:"danger",small:"",label:"Yes"}),a(p,{onClick:l[8]||(l[8]=o=>e.deleteModelStatus=!1),color:"info",small:"",label:"No"})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{pt as default};
