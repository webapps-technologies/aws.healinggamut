var B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function L(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var S=-1,R=1,D=0;function O(n,a,r,h){if(n===a)return n?[[D,n]]:[];if(r!=null){var i=N(n,a,r);if(i)return i}var l=U(n,a),e=n.substring(0,l);n=n.substring(l),a=a.substring(l),l=G(n,a);var g=n.substring(n.length-l);n=n.substring(0,n.length-l),a=a.substring(0,a.length-l);var v=X(n,a);return e&&v.unshift([D,e]),g&&v.push([D,g]),H(v,h),v}function X(n,a){var r;if(!n)return[[R,a]];if(!a)return[[S,n]];var h=n.length>a.length?n:a,i=n.length>a.length?a:n,l=h.indexOf(i);if(l!==-1)return r=[[R,h.substring(0,l)],[D,i],[R,h.substring(l+i.length)]],n.length>a.length&&(r[0][0]=r[2][0]=S),r;if(i.length===1)return[[S,n],[R,a]];var e=Z(n,a);if(e){var g=e[0],v=e[1],u=e[2],t=e[3],c=e[4],w=O(g,u),F=O(v,t);return w.concat([[D,c]],F)}return Y(n,a)}function Y(n,a){for(var r=n.length,h=a.length,i=Math.ceil((r+h)/2),l=i,e=2*i,g=new Array(e),v=new Array(e),u=0;u<e;u++)g[u]=-1,v[u]=-1;g[l+1]=0,v[l+1]=0;for(var t=r-h,c=t%2!==0,w=0,F=0,m=0,A=0,E=0;E<i;E++){for(var b=-E+w;b<=E-F;b+=2){var s=l+b,_;b===-E||b!==E&&g[s-1]<g[s+1]?_=g[s+1]:_=g[s-1]+1;for(var o=_-b;_<r&&o<h&&n.charAt(_)===a.charAt(o);)_++,o++;if(g[s]=_,_>r)F+=2;else if(o>h)w+=2;else if(c){var p=l+t-b;if(p>=0&&p<e&&v[p]!==-1){var M=r-v[p];if(_>=M)return z(n,a,_,o)}}}for(var I=-E+m;I<=E-A;I+=2){var p=l+I,M;I===-E||I!==E&&v[p-1]<v[p+1]?M=v[p+1]:M=v[p-1]+1;for(var j=M-I;M<r&&j<h&&n.charAt(r-M-1)===a.charAt(h-j-1);)M++,j++;if(v[p]=M,M>r)A+=2;else if(j>h)m+=2;else if(!c){var s=l+t-I;if(s>=0&&s<e&&g[s]!==-1){var _=g[s],o=l+_-s;if(M=r-M,_>=M)return z(n,a,_,o)}}}}return[[S,n],[R,a]]}function z(n,a,r,h){var i=n.substring(0,r),l=a.substring(0,h),e=n.substring(r),g=a.substring(h),v=O(i,l),u=O(e,g);return v.concat(u)}function U(n,a){if(!n||!a||n.charAt(0)!==a.charAt(0))return 0;for(var r=0,h=Math.min(n.length,a.length),i=h,l=0;r<i;)n.substring(l,i)==a.substring(l,i)?(r=i,l=r):h=i,i=Math.floor((h-r)/2+r);return J(n.charCodeAt(i-1))&&i--,i}function G(n,a){if(!n||!a||n.slice(-1)!==a.slice(-1))return 0;for(var r=0,h=Math.min(n.length,a.length),i=h,l=0;r<i;)n.substring(n.length-i,n.length-l)==a.substring(a.length-i,a.length-l)?(r=i,l=r):h=i,i=Math.floor((h-r)/2+r);return K(n.charCodeAt(n.length-i))&&i--,i}function Z(n,a){var r=n.length>a.length?n:a,h=n.length>a.length?a:n;if(r.length<4||h.length*2<r.length)return null;function i(F,m,A){for(var E=F.substring(A,A+Math.floor(F.length/4)),b=-1,s="",_,o,p,M;(b=m.indexOf(E,b+1))!==-1;){var I=U(F.substring(A),m.substring(b)),j=G(F.substring(0,A),m.substring(0,b));s.length<j+I&&(s=m.substring(b-j,b)+m.substring(b,b+I),_=F.substring(0,A-j),o=F.substring(A+I),p=m.substring(0,b-j),M=m.substring(b+I))}return s.length*2>=F.length?[_,o,p,M,s]:null}var l=i(r,h,Math.ceil(r.length/4)),e=i(r,h,Math.ceil(r.length/2)),g;if(!l&&!e)return null;e?l?g=l[4].length>e[4].length?l:e:g=e:g=l;var v,u,t,c;n.length>a.length?(v=g[0],u=g[1],t=g[2],c=g[3]):(t=g[0],c=g[1],v=g[2],u=g[3]);var w=g[4];return[v,u,t,c,w]}function H(n,a){n.push([D,""]);for(var r=0,h=0,i=0,l="",e="",g;r<n.length;){if(r<n.length-1&&!n[r][1]){n.splice(r,1);continue}switch(n[r][0]){case R:i++,e+=n[r][1],r++;break;case S:h++,l+=n[r][1],r++;break;case D:var v=r-i-h-1;if(a){if(v>=0&&W(n[v][1])){var u=n[v][1].slice(-1);if(n[v][1]=n[v][1].slice(0,-1),l=u+l,e=u+e,!n[v][1]){n.splice(v,1),r--;var t=v-1;n[t]&&n[t][0]===R&&(i++,e=n[t][1]+e,t--),n[t]&&n[t][0]===S&&(h++,l=n[t][1]+l,t--),v=t}}if(V(n[r][1])){var u=n[r][1].charAt(0);n[r][1]=n[r][1].slice(1),l+=u,e+=u}}if(r<n.length-1&&!n[r][1]){n.splice(r,1);break}if(l.length>0||e.length>0){l.length>0&&e.length>0&&(g=U(e,l),g!==0&&(v>=0?n[v][1]+=e.substring(0,g):(n.splice(0,0,[D,e.substring(0,g)]),r++),e=e.substring(g),l=l.substring(g)),g=G(e,l),g!==0&&(n[r][1]=e.substring(e.length-g)+n[r][1],e=e.substring(0,e.length-g),l=l.substring(0,l.length-g)));var c=i+h;l.length===0&&e.length===0?(n.splice(r-c,c),r=r-c):l.length===0?(n.splice(r-c,c,[R,e]),r=r-c+1):e.length===0?(n.splice(r-c,c,[S,l]),r=r-c+1):(n.splice(r-c,c,[S,l],[R,e]),r=r-c+2)}r!==0&&n[r-1][0]===D?(n[r-1][1]+=n[r][1],n.splice(r,1)):r++,i=0,h=0,l="",e="";break}}n[n.length-1][1]===""&&n.pop();var w=!1;for(r=1;r<n.length-1;)n[r-1][0]===D&&n[r+1][0]===D&&(n[r][1].substring(n[r][1].length-n[r-1][1].length)===n[r-1][1]?(n[r][1]=n[r-1][1]+n[r][1].substring(0,n[r][1].length-n[r-1][1].length),n[r+1][1]=n[r-1][1]+n[r+1][1],n.splice(r-1,1),w=!0):n[r][1].substring(0,n[r+1][1].length)==n[r+1][1]&&(n[r-1][1]+=n[r+1][1],n[r][1]=n[r][1].substring(n[r+1][1].length)+n[r+1][1],n.splice(r+1,1),w=!0)),r++;w&&H(n,a)}function J(n){return n>=55296&&n<=56319}function K(n){return n>=56320&&n<=57343}function V(n){return K(n.charCodeAt(0))}function W(n){return J(n.charCodeAt(n.length-1))}function $(n){for(var a=[],r=0;r<n.length;r++)n[r][1].length>0&&a.push(n[r]);return a}function Q(n,a,r,h){return W(n)||V(h)?null:$([[D,n],[S,a],[R,r],[D,h]])}function N(n,a,r){var h=typeof r=="number"?{index:r,length:0}:r.oldRange,i=typeof r=="number"?null:r.newRange,l=n.length,e=a.length;if(h.length===0&&(i===null||i.length===0)){var g=h.index,v=n.slice(0,g),u=n.slice(g),t=i?i.index:null;n:{var c=g+e-l;if(t!==null&&t!==c||c<0||c>e)break n;var w=a.slice(0,c),F=a.slice(c);if(F!==u)break n;var m=Math.min(g,c),A=v.slice(0,m),E=w.slice(0,m);if(A!==E)break n;var b=v.slice(m),s=w.slice(m);return Q(A,b,s,u)}n:{if(t!==null&&t!==g)break n;var _=g,w=a.slice(0,_),F=a.slice(_);if(w!==v)break n;var o=Math.min(l-_,e-_),p=u.slice(u.length-o),M=F.slice(F.length-o);if(p!==M)break n;var b=u.slice(0,u.length-o),s=F.slice(0,F.length-o);return Q(v,b,s,p)}}if(h.length>0&&i&&i.length===0)n:{var A=n.slice(0,h.index),p=n.slice(h.index+h.length),m=A.length,o=p.length;if(e<m+o)break n;var E=a.slice(0,m),M=a.slice(e-o);if(A!==E||p!==M)break n;var b=n.slice(m,l-o),s=a.slice(m,e-o);return Q(A,b,s,p)}return null}function P(n,a,r){return O(n,a,r,!0)}P.INSERT=R;P.DELETE=S;P.EQUAL=D;var T=P;export{B as c,T as d,L as g};
