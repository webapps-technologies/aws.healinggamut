import{z as Y,u as ct,m as rt,c as N,r as ut,y as g,n as _t,a as C,o as l,b as a,d as t,e as f,w as D,h as A,v as E,g as k,F as b,k as P,i as r,j as h,t as i,B as mt,A as W}from"./index-477b0694.js";import{_ as vt,a as pt,b as ht}from"./follow-up-04d6bc8c.js";import{_ as J}from"./calender-9d47370a.js";import{_ as ft}from"./download-d4dcec17.js";import{_ as kt}from"./dr-293d1898.js";const bt={class:"appointment-page"},yt={class:"appointment-content"},gt={class:"top-btn-row mb-16"},Dt=t("h3",null,"Appointments",-1),St={class:"flex mb-16"},wt={class:"w-100"},Pt={class:"table-outer"},Ct={class:"table"},At=t("thead",null,[t("th",null,"Token No"),t("th",null,"Date/Time"),t("th",null,"Doctor Name"),t("th",null,"Charges"),t("th",null,"Type"),t("th",null,"Mode"),t("th",null,"Appointment With"),t("th",null,"Payment Status"),t("th",null,"Status"),t("th",{class:"text-center"},"Option")],-1),Mt=["onClick"],Tt={class:"text-center"},Vt={class:"option-btns"},Yt=["onClick"],Nt=t("img",{src:vt,alt:""},null,-1),It=t("div",{class:"tooltip"},"View Details",-1),Ft=[Nt,It],Ot=["onClick"],Ut=t("img",{src:pt,alt:""},null,-1),$t=t("div",{class:"tooltip"},"Reschedule",-1),Et=[Ut,$t],Ht=["onClick"],Rt=t("img",{src:ht,alt:""},null,-1),xt=t("div",{class:"tooltip"},"Follow Up",-1),Bt=[Rt,xt],zt={key:0,class:"table-no-data"},Lt=t("div",null,"No records Found!",-1),Gt=[Lt],jt={key:1,class:"table-footer"},qt={class:"entries"},Wt={class:"title",showHeader:"true"},Jt={class:"form"},Kt={class:"form-item-two"},Qt={class:"title"},Xt={class:"date-input mb-10"},Zt=["min"],te=t("div",{class:"icon"},[t("img",{src:J,alt:""})],-1),ee={class:"form-item mb-16"},se={class:"title"},oe=t("h4",null,"Are you sure want to Cancel ?",-1),le={class:"btns"},ae=t("div",{class:"d-header text-center f-w-bold"},"DOWNLOADING",-1),ie=t("div",{class:"d-body"},[t("div",{class:"img"},[t("img",{src:ft,alt:""})]),t("div",{class:"text"},"Processing Invoice")],-1),ne={class:"title",showHeader:"true"},de={key:0,class:"doctor-details"},ce={key:0,class:"dr-img"},re=["src"],ue={key:1,class:"dr-img"},_e=t("img",{src:kt,alt:""},null,-1),me=[_e],ve={class:"data-row row"},pe={class:"data col-5 mb-16"},he=t("div",{class:"title"},"Name :",-1),fe={class:"val"},ke={class:"data col-5 mb-16"},be=t("div",{class:"title"},"Gender :",-1),ye={class:"val"},ge={class:"data-row row"},De={class:"data col-5 mb-16"},Se=t("div",{class:"title"},"Education :",-1),we={class:"val"},Pe={class:"data col-5 mb-16"},Ce=t("div",{class:"title"},"Specialization :",-1),Ae={class:"val"},Me={class:"data-row row"},Te={class:"data col-5 mb-16"},Ve=t("div",{class:"title"},"Reg No :",-1),Ye={class:"val"},Ne={class:"data col-5 mb-16"},Ie=t("div",{class:"title"},"City :",-1),Fe={class:"val"},Oe={class:"data-row row"},Ue={class:"data col-5 mb-16"},$e={class:"title"},Ee={class:"val"},He={class:"data col-5 align-center mb-16"},Re=t("div",{class:"title"},"Date :",-1),xe={class:"val"},Be={class:"date-input"},ze=["min"],Le=t("div",{class:"icon"},[t("img",{src:J,alt:""})],-1),Ge=t("div",{class:"data-row row"},[t("div",{class:"data col-10 mb-16"},[t("div",{class:"title"},"Available Dates :")])],-1),je={class:"slot-time"},qe=["onClick"],We={class:"day"},Je={class:"time"},Ke={class:"slot-status"},Qe={key:0,class:"text text-green f-w-bold"},Xe={key:1,class:"text text-red f-w-bold"},Ze={key:2,class:"err-msg"},ts={class:"slot-body"},es=t("div",{class:"heading-slot"},"Available Slots :",-1),ss={class:"mb-16"},os={class:"book-slots"},ls=["for","onClick"],as=["id","value"],is={key:1,class:"time"},ns={key:0,class:"online"},ds={key:1,class:"offline"},cs={key:2,class:"hospital"},rs={key:2,class:"time"},us=t("div",{class:"not-online"},"Not Available",-1),_s=[us],ms={key:0,class:"err-msg"},vs={key:0,class:"mb-16"},ps={class:"book-slots"},hs=["for"],fs=["id","value","onChange"],ks={class:"time-slot"},bs={key:0,class:"err-msg"},ys={key:1,class:"mb-16"},gs={key:0,class:"err-msg mb-10"},Ds={class:"save-btn flex justify-center"},Ss={key:1,class:"doctor-details"},ws=t("div",{class:"justify-center p-16 text-red"},[t("h3",null,"Slots Are Not Available")],-1),Ps=[ws],Ns={__name:"NurseAppointments",setup(Cs){const S=Y([]),M=Y(null),w=Y(null),T=Y(null),_=ct(),K=rt(),u=N(()=>_.state.Appointments),d=N(()=>_.state.Doctor),H=[{id:"Nurse Appointment",name:"Nurse Appointment"}],e=ut({downloadModal:!1,doctorModal:!1,limit:10,offset:0,keyword:"",cPage:1,appointmentFor:H[0].id,filterAppointmentFor:H[0].id,scheduleModal:!1,confirmModal:!1,calendarDate:g().format("YYYY-MM-DD"),scheduleOn:g().format("YYYY-MM-DD"),appointmentId:null,timePicker:"00:00",modalTitle:null,doctorDetailId:null,error:null,errorSlot:null});_t(()=>{I(e.limit,e.offset,e.keyword,e.appointmentFor,e.cPage)});function I(n,o,m,p,y){_.dispatch("Appointments/getMyAppointments",{limit:n,offset:o,keyword:m,appointmentFor:p,cPage:y})}function Q(){I(e.limit,e.offset,e.keyword,e.filterAppointmentFor,e.cPage)}function X(n){e.cPage=n,e.offset=e.limit*(n-1),I(e.limit,e.offset,e.keyword,e.appointmentFor,n<=1?1:n-1)}function Z(n){if(n)return g(n).subtract({hours:4,minutes:30}).format("MMM Do YYYY, h:mm A")}function tt(n){_.dispatch("PaymentHistory/makePayment",{id:n})}function et(){_.dispatch("Appointments/cancelAppointments",{id:e.appointmentId}),e.confirmModal=!1}function R(n,o,m){var p,y;e.appointmentId=n,e.modalTitle=o,w.value=null,M.value=null,S.value=[],e.doctorDetailId=(p=m.doctorDetail)==null?void 0:p.id,d.value.slotTimeData=[],_.dispatch("Doctor/getDoctorDetails",{id:(y=m.doctorDetail)==null?void 0:y.id}),u.value.scheduleModal=!0}const st=(n,o,m,p)=>{e.scheduleOn=p,d.value.slotTimeData=[],w.value=null,o?(e.error=null,M.value=n,S.value=m):(e.errorSlot=null,e.timePickerStatus=!1,S.value=[])};async function ot(){var n,o;if(((n=S.value)==null?void 0:n.length)<=0)return e.error="Please Select date",_.dispatch("Alert/error",{msg:"Please Select date"});if(e.error=null,e.submit=!0,e.timePickerStatus&&O.value)return _.dispatch("Alert/error",{msg:"Please Select Time!"});if(w.value!==null){if(((o=u.value.slotTimeData)==null?void 0:o.length)>0&&U.value)return e.submit=!0,_.dispatch("Alert/error",{msg:"Please Select Time"});const m=e.scheduleOn+"T"+e.timePicker,p=e.scheduleOn+"T"+T.value;e.modalTitle==="Reschedule"?_.dispatch("Appointments/saveReshedule",{id:e.appointmentId,scheduleOn:e.timePickerStatus?m:p}):e.modalTitle==="Follow Up"&&_.dispatch("Appointments/saveFollowUp",{id:e.appointmentId,scheduleOn:e.timePickerStatus?m:p})}else e.errorSlot="Please Select Slot"}function lt(){u.value.scheduleModal=!1}function at(n,o){if(w.value=o,e.errorSlot=null,n.online){e.timePickerStatus=!1,e.doctorFees=d.value.fees;const m=g(e.calendarDate).format("YYYY-MM-DD");_.dispatch("Doctor/getSlotTime",{currentDate:m,periodId:n.id})}n.offline?(e.doctorFees=d.value.offlineFees,e.timePickerStatus=!0):n.clinicVisitStatus?(e.timePickerStatus=!0,e.doctorFees=d.value.studioClinicFees):e.timePickerStatus=!1}function F(n){if(n){var o=g(n,"HH:mm:ss").format("hh:mm A");return o}}function it(n){if(n){var o=g(n).format("MMM Do YYYY");return o}}function nt(){return S.value=[],M.value=null,d.value.slotTimeData=[],_.commit("Doctor/SET_DOCTOR_SCHEDULE",e.calendarDate)}const O=N(()=>{if(e.timePickerStatus&&e.timePicker=="00:00")return"Please select time"}),U=N(()=>{if(!e.timePickerStatus&&!T.value)return"Please Select Time Slot"});function x(){return g().format("YYYY-MM-DD")}function dt(n,o){K.push({path:n,query:{id:o}})}return(n,o)=>{var z,L;const m=C("router-link"),p=C("Pagination"),y=C("icon-cross"),B=C("time-picker"),V=C("Modal");return l(),a("section",bt,[t("div",yt,[t("div",gt,[Dt,f(m,{to:"/panel/nurses",class:"btn primary-btn"},{default:D(()=>[h("Book Appointment")]),_:1})]),t("div",null,[t("div",St,[t("div",wt,[A(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.keyword=s),placeholder:"Search"},null,512),[[E,e.keyword]])]),t("div",null,[t("button",{class:"btn primary-btn",type:"button",onClick:k(Q,["prevent"])}," SUBMIT ")])])]),t("div",Pt,[t("table",Ct,[At,t("tbody",null,[(l(!0),a(b,null,P(u.value.appointmentData,(s,c)=>{var v,G,j,q;return l(),a("tr",{key:s},[t("td",null,i(s.appointmentId),1),t("td",null,i(Z(s.scheduleOn)),1),t("td",null,i((v=s.doctorDetail)==null?void 0:v.name),1),t("td",null,"â‚¹"+i((G=s.paymentHistory)==null?void 0:G.total),1),t("td",null,i(s.type),1),t("td",null,i(s.mode),1),t("td",null,i(s.appointmentFor),1),t("td",null,[h(i((j=s.paymentHistory)==null?void 0:j.status)+" ",1),((q=s.paymentHistory)==null?void 0:q.status)=="PENDING"?(l(),a("button",{key:0,class:"pointer bg-blue p-2 radius-4",onClick:k($=>tt(s.paymentHistory.id),["prevent"])}," PAY ",8,Mt)):r("",!0)]),t("td",null,i(s.status),1),t("td",Tt,[t("div",Vt,[t("div",{class:"action-icon",onClick:k($=>dt("/appointments-details",s.id),["prevent"])},Ft,8,Yt),s.status!=="CANCELLED"&&s.status==="PENDING"?(l(),a("div",{key:0,class:"action-icon",onClick:$=>R(s.id,"Reschedule",s)},Et,8,Ot)):r("",!0),s.status==="COMPLETED"?(l(),a("div",{key:1,class:"action-icon",onClick:$=>R(s.id,"Follow Up",s)},Bt,8,Ht)):r("",!0)])])])}),128))])])]),((z=u.value.appointmentData)==null?void 0:z.length)<=0?(l(),a("div",zt,Gt)):r("",!0),((L=u.value.appointmentData)==null?void 0:L.length)>0?(l(),a("div",jt,[t("div",qt,[h(" Showing "),t("span",null,i(e.offset+1),1),h(" to "),t("span",null,i(u.value.totalAppointment>e.limit+e.offset?e.limit+e.offset:u.value.totalAppointment),1),h(" of "),t("span",null,i(u.value.totalAppointment),1),h(" entries ")]),f(p,{currentPage:e.cPage,totalItem:u.value.totalAppointment,itemsPerPage:e.limit,"onUpdate:currentPage":o[1]||(o[1]=s=>X(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):r("",!0)]),f(V,{show:u.value.scheduleModal2,"onUpdate:show":o[5]||(o[5]=s=>u.value.scheduleModal2=s),class:"",headerClasses:"header-bg"},{header:D(()=>[t("div",Wt,i(e.modalTitle),1),t("div",{class:"close-btn",onClick:o[2]||(o[2]=k(s=>u.value.scheduleModal2=!1,["prevent"]))},[f(y)])]),default:D(()=>[t("form",Jt,[t("div",Kt,[t("div",Qt,i(e.modalTitle)+" Date",1),t("div",Xt,[A(t("input",{type:"date","onUpdate:modelValue":o[3]||(o[3]=s=>e.scheduleOn=s),min:x()},null,8,Zt),[[E,e.scheduleOn]]),te]),t("div",ee,[t("div",se,i(e.modalTitle)+" Time",1),f(B,{class:"mb-16",modelValue:e.timePicker,"onUpdate:modelValue":o[4]||(o[4]=s=>e.timePicker=s)},null,8,["modelValue"])])]),t("div",{class:"save-btn form-item"},[t("button",{type:"button",class:"btn black-btn",onClick:lt}," Save ")])])]),_:1},8,["show"]),f(V,{show:e.confirmModal,"onUpdate:show":o[7]||(o[7]=s=>e.confirmModal=s),class:"confirm-modal"},{default:D(()=>[oe,t("div",le,[t("button",{class:"btn grey-btn cancel-btn",onClick:o[6]||(o[6]=k(s=>e.confirmModal=!1,["prevent"]))}," Cancel "),t("button",{class:"btn confirm-btn",onClick:et},"Confirm")])]),_:1},8,["show"]),f(V,{show:e.downloadModal,"onUpdate:show":o[8]||(o[8]=s=>e.downloadModal=s),class:"download-modal"},{default:D(()=>[ae,ie]),_:1},8,["show"]),f(V,{show:u.value.scheduleModal,"onUpdate:show":o[14]||(o[14]=s=>u.value.scheduleModal=s),class:"doctor-details-modal mid-modal",headerClasses:"header-bg"},{header:D(()=>[t("div",ne,i(e.modalTitle),1),t("div",{class:"close-btn",onClick:o[9]||(o[9]=k(s=>u.value.scheduleModal=!1,["prevent"]))},[f(y)])]),default:D(()=>[d.value.doctorNotAvailable?(l(),a("div",de,[d.value.profile?(l(),a("div",ce,[t("img",{src:d.value.profile,alt:""},null,8,re)])):(l(),a("div",ue,me)),t("div",ve,[t("div",pe,[he,t("div",fe,i(d.value.name),1)]),t("div",ke,[be,t("div",ye,i(d.value.gender),1)])]),t("div",ge,[t("div",De,[Se,t("div",we,[(l(!0),a(b,null,P(d.value.doctorEducation,(s,c)=>(l(),a("span",{key:c},[h(i(s.qualification)+" ",1),c!==d.value.doctorEducation.length-1?(l(),a(b,{key:0},[h("| ")],64)):r("",!0)]))),128))])]),t("div",Pe,[Ce,t("div",Ae,[(l(!0),a(b,null,P(d.value.doctorSpecialization,(s,c)=>{var v;return l(),a("span",{key:c},[h(i((v=s.specialization)==null?void 0:v.name)+" ",1),c!==d.value.doctorSpecialization.length-1?(l(),a(b,{key:0},[h("| ")],64)):r("",!0)])}),128))])])]),t("div",Me,[t("div",Te,[Ve,t("div",Ye,i(d.value.reg_number),1)]),t("div",Ne,[Ie,t("div",Fe,i(d.value.city),1)])]),t("div",Oe,[t("div",Ue,[t("div",$e,i(e.modalTitle)+" Date :",1),t("div",Ee,i(it(e.scheduleOn)),1)]),t("div",He,[Re,t("div",xe,[t("div",Be,[A(t("input",{type:"date","onUpdate:modelValue":o[10]||(o[10]=s=>e.calendarDate=s),min:x(),onChange:nt},null,40,ze),[[E,e.calendarDate]]),Le])])])]),Ge,t("div",je,[(l(!0),a(b,null,P(d.value.doctorSchedule,(s,c)=>(l(),a("div",{class:mt(["data",{active:M.value==c}]),key:c,onClick:k(v=>st(c,s.status,s.period,s.date),["prevent"])},[t("div",We,i(s.name),1),t("div",Je,i(s.date),1),t("div",Ke,[s.status?(l(),a("span",Qe,"Available")):(l(),a("span",Xe,"Not Available"))])],10,qe))),128))]),e.error?(l(),a("div",Ze,i(e.error),1)):r("",!0),t("div",ts,[es,t("div",ss,[t("div",os,[(l(!0),a(b,null,P(S.value,(s,c)=>(l(),a("div",{class:"slot-item",key:c},[t("label",{for:`input-${c}`,onClick:k(v=>at(s,c),["prevent"])},[s.online||s.offline||s.clinicVisitStatus?A((l(),a("input",{key:0,type:"radio",id:`input-${c}`,name:"slot","onUpdate:modelValue":o[11]||(o[11]=v=>w.value=v),value:c},null,8,as)),[[W,w.value]]):r("",!0),s.clinicVisitStatus||s.online||s.offline?(l(),a("div",is,[h(i(F(s.time_start))+" - "+i(F(s.time_end))+" ",1),s.online?(l(),a("div",ns," Online Consultancy Available ")):r("",!0),s.offline?(l(),a("div",ds," Offline Consultancy Available ")):r("",!0),s.clinicVisitStatus?(l(),a("div",cs," Clinic Studio Consultancy Available ")):r("",!0)])):(l(),a("div",rs,_s))],8,ls)]))),128))]),e.errorSlot?(l(),a("div",ms,i(e.errorSlot),1)):r("",!0)]),e.timePickerStatus?(l(),a("div",ys,[f(B,{modelValue:e.timePicker,"onUpdate:modelValue":o[13]||(o[13]=s=>e.timePicker=s)},null,8,["modelValue"]),e.submit&&O.value?(l(),a("div",gs,i(O.value),1)):r("",!0)])):(l(),a("div",vs,[t("div",ps,[(l(!0),a(b,null,P(d.value.slotTimeData,(s,c)=>(l(),a("div",{class:"slot-item-time",key:c},[t("label",{for:`inputs-${c}`},[A(t("input",{type:"radio",id:`inputs-${c}`,name:"slotTime","onUpdate:modelValue":o[12]||(o[12]=v=>T.value=v),value:s.time,onChange:v=>e.slotId=s.id},null,40,fs),[[W,T.value]]),t("div",ks,i(F(s.time)),1)],8,hs)]))),128))]),e.submit&&U.value?(l(),a("div",bs,i(U.value),1)):r("",!0)]))]),t("div",Ds,[t("button",{type:"button",class:"btn primary-btn",onClick:k(ot,["prevent"])}," Submit ")])])):r("",!0),d.value.doctorNotAvailable?r("",!0):(l(),a("div",Ss,Ps))]),_:1},8,["show"])])}}};export{Ns as default};
