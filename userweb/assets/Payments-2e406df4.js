import{u as k,q as N,m as Y,c as P,r as O,y as v,n as A,a as p,o as d,b as i,d as t,F as E,k as V,i as f,e as r,w as y,t as n,g as B}from"./index-477b0694.js";import{_ as H}from"./payments-4387c33c.js";import{_ as I}from"./download-d4dcec17.js";const L={class:"payments-page"},S=t("div",{class:"payments-content"},[t("div",{class:"top-btn-row mb-16"},[t("h3",null,"Payments")])],-1),T={key:0,class:"table-outer"},G={class:"table"},R=t("thead",null,[t("th",null,"Sr. No."),t("th",null,"Invoice No."),t("th",null,"Date"),t("th",null,"Amount"),t("th",null,"Status"),t("th",{class:"text-center"},"Option")],-1),U={class:"text-center"},$={key:0,class:"option-btns"},q=["onClick"],W={key:1,class:"no-data-found"},j=t("div",{class:"img"},[t("img",{src:H,alt:""})],-1),z=t("div",{class:"text"},"You do not have any Health Cash transactions!",-1),J=[j,z],K=t("div",{class:"d-header text-center f-w-bold"},"DOWNLOADING",-1),Q=t("div",{class:"d-body"},[t("div",{class:"img"},[t("img",{src:I,alt:""})]),t("div",{class:"text"},"Processing Invoice")],-1),X=t("div",{class:"title",showHeader:"true"},"Payment Detail ",-1),Z={class:"total-card"},tt={class:"card-body"},st={class:"price f-w-bold"},ot=t("div",{class:"title"},"Invoice",-1),et={class:"val"},at={class:"price"},nt=t("div",{class:"title"},"Order Charges",-1),dt={class:"val"},it={class:"price"},lt=t("div",{class:"title"},"Platform Fee",-1),ct={class:"val"},rt={class:"price"},_t=t("div",{class:"title"},"Payment Gateway Charge",-1),ut={class:"val text-green"},ht={class:"price"},mt=t("div",{class:"title"},"Discount",-1),vt={class:"val text-green"},pt={class:"price total f-w-bold"},ft=t("div",{class:"title"},"Total Amount",-1),yt={class:"val"},xt={__name:"Payments",setup(gt){const g=k();N(),Y();const _=P(()=>g.state.PaymentHistory),s=O({downloadModal:!1,limit:10,offset:0,keyword:"",fromDate:v().subtract(2,"days").format("YYYY-MM-DD"),toDate:v().add(30,"days").format("YYYY-MM-DD"),paymentModal:!1,doctorFees:null,commission:null,discount:null,extraCharge:null,invoiceNumber:null});A(()=>{M(s.limit,s.offset,s.keyword,s.fromDate,s.toDate)});function M(e,a,u,l,h){g.dispatch("PaymentHistory/getPayment",{limit:e,offset:a,keyword:u,fromDate:l,toDate:h})}function x(e){s.paymentModal=!0,s.doctorFees=e.doctorFees,s.commission=e.commission,s.discount=e.discount,s.extraCharge=e.extraCharge,s.invoiceNumber=e.invoiceNumber}function D(){return(s.doctorFees+s.extraCharge+s.doctorFees*(s.commission/100)-s.discount).toFixed(2)}function C(e,a){return(e*(a/100)).toFixed(2)}function F(e){if(e)return v(e).format("MMM Do YYYY")}return(e,a)=>{var b,w;const u=p("icon-download"),l=p("Modal"),h=p("icon-cross");return d(),i("section",L,[S,((b=_.value.data)==null?void 0:b.length)>0?(d(),i("div",T,[t("table",G,[R,t("tbody",null,[(d(!0),i(E,null,V(_.value.data,(o,c)=>(d(),i("tr",{key:o},[t("td",null,n(c+1),1),t("td",null,n(o.status==="COMPLETED"?o.invoiceNumber:"N/A"),1),t("td",null,n(F(o.createdAt)),1),t("td",null,"₹"+n(o.total),1),t("td",null,n(o.status),1),t("td",U,[o.status==="COMPLETED"?(d(),i("div",$,[t("button",{class:"btn primary-btn",onClick:m=>x(o)},[r(u)],8,q)])):f("",!0)])]))),128))])])])):f("",!0),((w=_.value.data)==null?void 0:w.length)<=0?(d(),i("div",W,J)):f("",!0),r(l,{show:s.downloadModal,"onUpdate:show":a[0]||(a[0]=o=>s.downloadModal=o),class:"download-modal"},{default:y(()=>[K,Q]),_:1},8,["show"]),r(l,{show:s.paymentModal,"onUpdate:show":a[2]||(a[2]=o=>s.paymentModal=o),class:"details-modal",align:!0,headerClasses:"header-bg"},{header:y(()=>[X,t("div",{class:"close-btn",onClick:a[1]||(a[1]=B(o=>s.paymentModal=!1,["prevent"]))},[r(h)])]),default:y(()=>{var o,c,m;return[t("div",Z,[t("div",tt,[t("div",st,[ot,t("div",et,n(s.invoiceNumber),1)]),t("div",at,[nt,t("div",dt,"₹"+n((o=s.doctorFees)==null?void 0:o.toFixed(2)),1)]),t("div",it,[lt,t("div",ct," ₹"+n(C(s.doctorFees,s.commission)),1)]),t("div",rt,[_t,t("div",ut,"₹"+n((c=s.extraCharge)==null?void 0:c.toFixed(2)),1)]),t("div",ht,[mt,t("div",vt,"₹"+n((m=s.discount)==null?void 0:m.toFixed(2)),1)]),t("div",pt,[ft,t("div",yt," ₹"+n(D()),1)])])])]}),_:1},8,["show"])])}}};export{xt as default};
