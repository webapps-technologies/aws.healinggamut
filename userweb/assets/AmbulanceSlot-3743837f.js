import{u as Q,q as X,m as Z,c as d,z as U,r as ee,y as C,n as te,a as v,o as l,b as n,d as t,e as p,t as i,j as B,h as c,v as u,F as oe,k as se,i as r,g as f,w as I,B as le}from"./index-477b0694.js";import{_ as ne}from"./calender-9d47370a.js";const ie={class:"apt-slot-card ambulance-card"},ae={class:"card-header"},de={class:"left-card-header"},re={class:"icon"},ce=t("h3",null,"Ambulance Appointment",-1),ue=t("div",{class:"right-card-header f-w-bold"},null,-1),me={class:"card-body"},_e={class:"clinic-info"},ve={class:"about"},pe={class:"rate-row"},he={class:"name"},be={class:"rating"},fe={class:"text"},ke={class:"date-input"},ge=["min"],ye=t("div",{class:"icon"},[t("img",{src:ne,alt:""})],-1),Ne={class:"flex align-center gap-5 mb-10"},Ee={class:"slot-section"},Ve={class:"slot-header"},Ae=t("h4",null,"Slots :",-1),Me={class:"card-container"},Se=["onClick"],De={class:"day"},we={class:"date"},xe={class:"slot-status"},Ce={key:0,class:"text text-green f-w-bold"},Fe={key:1,class:"text text-red f-w-bold"},Pe={key:0},Te={key:0,class:"err-msg mb-10"},Oe={class:"book-btn"},Ue=t("div",{class:"title",showHeader:"true"},"Patient Detail",-1),Be={action:"",class:"form"},Ie={class:"form-Container"},Ye={class:"tow-row"},Le={class:"form-item mb-16"},Ge=t("div",{class:"title"},"First Name ",-1),Re={key:0,class:"err-msg"},ze={class:"form-item mb-16"},qe=t("div",{class:"title"},"Last Name ",-1),He={key:0,class:"err-msg"},$e={class:"tow-row"},je={class:"form-item mb-16"},Ke=t("div",{class:"title"},"Phone ",-1),We={key:0,class:"err-msg"},Je={class:"form-item mb-16"},Qe=t("div",{class:"title"},"Email ",-1),Xe={key:0,class:"err-msg"},Ze={class:"tow-row"},et={class:"form-item mb-16"},tt=t("div",{class:"title"},"Gender ",-1),ot={key:0,class:"err-msg"},st={class:"form-item mb-16"},lt=t("div",{class:"title"},"Dob ",-1),nt=["max"],it={key:0,class:"err-msg"},at={class:"tow-row"},dt={class:"form-item mb-16"},rt=t("div",{class:"title"},"Booking From",-1),ct={key:0,class:"err-msg"},ut={class:"form-item mb-16"},mt=t("div",{class:"title"},"Booking To ",-1),_t={key:0,class:"err-msg"},vt={class:"save-btn"},kt={__name:"AmbulanceSlot",setup(pt){const h=Q(),k=X(),Y=Z(),m=d(()=>h.state.Ambulance),F=U([]),_=U(null),P=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],e=ee({AmbulanceId:null,scheduleOn:C().format("YYYY-MM-DD"),submit:!1,id:null,verificationModal:!1,timePicker:"00:00",timePickerStatus:!1,firstName:null,lastName:null,patientGender:P[0].id,contactNumber:null,email:null,dob:null,bookingFrom:null,bookingTo:null});te(()=>{k.query.id&&(e.id=k.query.id,L(k.query.id))});function L(a){m.value.slotTimeData=[],h.dispatch("Ambulance/getAmbulanceDetails",{id:a})}function G(){if(!localStorage.getItem("userId"))return Y.push({path:"/login"});if(b.value)return e.submit=!0,null;if(e.submit=!1,_.value<0||_.value===null)return h.dispatch("Alert/error",{msg:"Please Select Slot"});e.verificationModal=!0}function R(){if(y.value||g.value||N.value||E.value||V.value||A.value||b.value||M.value||S.value)return e.submit=!0,null;e.submit=!1;const a={scheduleOn:e.scheduleOn+"T"+e.timePicker,scheduleFor:null,type:"ONLINE",appointmentFor:"Ambulance Booking",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,patientDetailId:null,patientDetail:{firstName:e.firstName,lastName:e.lastName,dob:e.dob,gender:e.patientGender,mobile:e.contactNumber,email:e.email},bookingFrom:e.bookingFrom,bookingTo:e.bookingTo,franchiseId:null,ambulanceId:m.value.ambulanceId,pid:null,doctorDetailId:null,labtest:[],doctorFees:0,hospitalFees:0,commission:0,gst:0,discount:0,lockerStatus:"NO",slotId:null};h.dispatch("Appointments/bookAppointments",a)}function z(){return F.value=[],_.value=null,m.value.slotTimeData=[],h.commit("Ambulance/SET_AMBULANCE_SCHEDULE",e.scheduleOn)}const q=(a,o,D,w)=>{e.scheduleOn=w,e.timePickerStatus=o,o?(_.value=a,F.value=D):_.value=null};function H(a){if(a){var o=C(a).format("MMM Do YYYY");return o}}const g=d(()=>{if(!e.dob)return"Select DOB!"}),y=d(()=>{if(!e.firstName)return"Enter first name!"}),N=d(()=>{if(!e.lastName)return"Enter last name!"}),E=d(()=>{if(!e.contactNumber)return"Enter phone number"}),V=d(()=>{if(!e.bookingFrom)return"Enter booking from"}),A=d(()=>{if(!e.bookingTo)return"Enter booking to"}),b=d(()=>{if(e.timePickerStatus&&e.timePicker=="00:00")return"Please select time"}),M=d(()=>{if(!e.patientGender)return"Select Gender!"}),S=d(()=>{let a=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.email){if(!a.test(e.email))return"Please enter valid email!"}else return"Please enter your email!"});function T(){return C().format("YYYY-MM-DD")}function $(a){let o=String.fromCharCode(a.keyCode);if(/^[0-9]+$/.test(o))return!0;a.preventDefault()}return(a,o)=>{var O;const D=v("icon-doctor"),w=v("icon-star"),j=v("time-picker"),K=v("icon-cross"),W=v("Select"),J=v("Modal");return l(),n("section",ie,[t("div",ae,[t("div",de,[t("div",re,[p(D)]),ce]),ue]),t("div",me,[t("div",_e,[t("div",ve,[t("div",pe,[t("h3",he,i(m.value.name),1),t("div",be,[p(w),B(" "+i((O=m.value.rating)==null?void 0:O.toFixed(1)),1)])]),t("div",fe,i(m.value.address),1)]),t("div",ke,[c(t("input",{type:"date","onUpdate:modelValue":o[0]||(o[0]=s=>e.scheduleOn=s),min:T(),onChange:z},null,40,ge),[[u,e.scheduleOn]]),ye])]),t("div",Ne,[B("Appointment at "),t("strong",null,i(H(e.scheduleOn)),1)]),t("div",Ee,[t("div",Ve,[Ae,t("div",Me,[(l(!0),n(oe,null,se(m.value.schedule,(s,x)=>(l(),n("div",{class:le(["slot-card",{active:_.value==x}]),key:x,onClick:f(ht=>q(x,s.status,[],s.date),["prevent"])},[t("div",De,i(s.name),1),t("div",we,i(s.date),1),t("div",xe,[s.status?(l(),n("span",Ce,"Slots Available")):(l(),n("span",Fe,"Slot Not Available"))])],10,Se))),128))])]),e.timePickerStatus?(l(),n("div",Pe,[p(j,{class:"mb-16",modelValue:e.timePicker,"onUpdate:modelValue":o[1]||(o[1]=s=>e.timePicker=s)},null,8,["modelValue"]),e.submit&&b.value?(l(),n("div",Te,i(b.value),1)):r("",!0)])):r("",!0),t("div",Oe,[t("button",{type:"button",class:"btn primary-btn w-10-r",onClick:f(G,["prevent"])},"Book")])])]),p(J,{show:e.verificationModal,"onUpdate:show":o[12]||(o[12]=s=>e.verificationModal=s),class:"details-modal",headerClasses:"header-bg"},{header:I(()=>[Ue,t("div",{class:"close-btn",onClick:o[2]||(o[2]=f(s=>e.verificationModal=!1,["prevent"]))},[p(K)])]),default:I(()=>[t("form",Be,[t("div",Ie,[t("div",Ye,[t("div",Le,[Ge,c(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>e.firstName=s),placeholder:"Enter First Name",maxlength:"20"},null,512),[[u,e.firstName]]),e.submit&&y.value?(l(),n("div",Re,i(y.value),1)):r("",!0)]),t("div",ze,[qe,c(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>e.lastName=s),placeholder:"Enter Last Name",maxlength:"20"},null,512),[[u,e.lastName]]),e.submit&&N.value?(l(),n("div",He,i(N.value),1)):r("",!0)])]),t("div",$e,[t("div",je,[Ke,c(t("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>e.contactNumber=s),placeholder:"Enter Phone",onKeypress:o[6]||(o[6]=s=>$(s)),maxlength:"10"},null,544),[[u,e.contactNumber]]),e.submit&&E.value?(l(),n("div",We,i(E.value),1)):r("",!0)]),t("div",Je,[Qe,c(t("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>e.email=s),placeholder:"Enter Email"},null,512),[[u,e.email]]),e.submit&&S.value?(l(),n("div",Xe,i(S.value),1)):r("",!0)])]),t("div",Ze,[t("div",et,[tt,p(W,{modelValue:e.patientGender,"onUpdate:modelValue":o[8]||(o[8]=s=>e.patientGender=s),options:P,placeholder:"Select Gender"},null,8,["modelValue"]),e.submit&&M.value?(l(),n("div",ot,i(M.value),1)):r("",!0)]),t("div",st,[lt,c(t("input",{type:"date","onUpdate:modelValue":o[9]||(o[9]=s=>e.dob=s),placeholder:"Enter Age",max:T()},null,8,nt),[[u,e.dob]]),e.submit&&g.value?(l(),n("div",it,i(g.value),1)):r("",!0)])]),t("div",at,[t("div",dt,[rt,c(t("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=s=>e.bookingFrom=s),placeholder:"Enter "},null,512),[[u,e.bookingFrom]]),e.submit&&V.value?(l(),n("div",ct,i(V.value),1)):r("",!0)]),t("div",ut,[mt,c(t("input",{type:"text","onUpdate:modelValue":o[11]||(o[11]=s=>e.bookingTo=s),placeholder:"Enter destination"},null,512),[[u,e.bookingTo]]),e.submit&&A.value?(l(),n("div",_t,i(A.value),1)):r("",!0)])])]),t("div",vt,[t("button",{type:"button",class:"btn primary-btn",onClick:f(R,["prevent"])},"Submit")])])]),_:1},8,["show"])])}}};export{kt as default};
