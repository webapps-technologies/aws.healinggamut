import{u as $,c as u,r as j,a as v,o as i,b as a,d as e,g as f,e as c,i as d,j as m,h,v as y,t as p,w as A,y as F}from"./index-477b0694.js";const L="/assets/man-35fb14eb.png",R={class:"profile-page"},T={class:"profile-content"},Y={class:"profile-card-outer"},z={class:"profile-card card"},H={action:"",class:"form"},I={class:"img"},q={class:"pic-upload"},J=["src"],K=["src"],Q={key:2,src:L,class:"dummy-img pic",alt:""},W=e("label",{for:"imgUpload",class:"upload-file-block"}," Upload Pic ",-1),X=["disabled"],Z={class:"form-item-two"},ee={class:"form-item mb-16"},oe=["value"],te={class:"form-item-two"},se={class:"form-item mb-16"},le=["disabled"],ie={key:0,class:"err-msg"},ae={class:"form-item mb-16"},de=["max","disabled"],ne={key:0,class:"err-msg"},re={class:"form-item mb-16"},ue=["disabled"],ce={key:0,class:"err-msg"},me={class:"form-item-two"},pe={class:"form-item mb-16"},ve={key:0,class:"err-msg"},fe={class:"form-item mb-16"},_e={key:0,class:"err-msg"},be={class:"form-item mb-16"},ge=["disabled"],he={key:0,class:"err-msg"},ye=e("h4",null,"Are you sure want to Delete",-1),we={class:"btns"},Me=e("button",{class:"btn confirm-btn"},"Confirm",-1),Pe=e("div",{class:"title",showHeader:"true"},"Change Pin",-1),ke=e("form",{action:"",class:"form"},[e("div",{class:"form-item mb-16"},[e("div",{class:"title"},"Old Pin"),e("input",{type:"number",placeholder:"Enter Old Pin"})]),e("div",{class:"form-item mb-16"},[e("div",{class:"title"},"New Pin"),e("input",{type:"number",placeholder:"Enter New Pin"})]),e("div",{class:"save-btn"},[e("button",{class:"btn primary-btn"},"Save")])],-1),Ce={__name:"Profile",setup(Ve){const _=$(),t=u(()=>_.state.Auth),U=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],O=[{id:"A+",name:"A+"},{id:"A-",name:"A-"},{id:"B+",name:"B+"},{id:"B-",name:"B-"},{id:"O+",name:"O+"},{id:"O-",name:"O-"},{id:"AB+",name:"AB+"},{id:"AB-",name:"AB-"}],o=j({submit:!1,profilePreview:"",profileCard:!1,showPin:!1,confirmModal:!1,changeModal:!1,editMode:!0});function C(){o.profileCard=!o.profileCard,o.editMode=!o.editMode}function x(){if(M.value||V.value||w.value||k.value||P.value){o.submit=!0;return}o.submit=!1,_.dispatch("Auth/updateProfile",{name:t.value.name,email:t.value.email,gender:t.value.gender,group:t.value.group,dob:t.value.dob,address:t.value.address}),o.profileCard=!o.profileCard}function S(r){_.dispatch("Auth/uploadProfileImage",{file:r})}async function D(r,s){if(r){const n=await r.target;if(n.files[0].type==="image/png"||n.files[0].type==="image/jpg"||n.files[0].type==="image/jpeg"){if(n.files){const b=new FileReader;b.onload=g=>{o.profilePreview=g.target.result},n.files[0]&&(t.value.profile=null,b.readAsDataURL(n.files[0]),await S(n.files[0]))}}else o.profilePreview=null,_.dispatch("Alert/error",{msg:"Upload image in png, jpeg, jpg format."})}}function N(){return F().format("YYYY-MM-DD")}const w=u(()=>{if(!t.value.dob)return"Select DOB!"}),M=u(()=>{if(!t.value.name)return"Enter first name!"}),P=u(()=>{if(!t.value.address)return"Enter your address"}),B=u(()=>{if(!t.value.gender)return"Select Gender!"}),k=u(()=>{if(!t.value.group)return"Select Blood Group!"}),V=u(()=>{let r=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(t.value.email){if(!r.test(t.value.email))return"Please enter valid email!"}else return"Please enter your email!"});return(r,s)=>{const n=v("icon-back"),b=v("icon-edit"),g=v("Select"),E=v("Modal"),G=v("icon-cross");return i(),a("section",R,[e("div",T,[e("div",Y,[e("div",z,[o.editMode?d("",!0):(i(),a("div",{key:0,class:"back-icon",onClick:s[0]||(s[0]=f(l=>C(),["prevent"]))},[c(n)])),o.editMode?(i(),a("div",{key:1,class:"edit-icon",onClick:s[1]||(s[1]=f(l=>C(),["prevent"]))},[c(b)])):d("",!0),e("form",H,[e("div",I,[e("div",q,[o.profilePreview&&!t.value.profile?(i(),a("img",{key:0,src:o.profilePreview,class:"preview-image pic",id:"profilePic",alt:""},null,8,J)):d("",!0),t.value.profile?(i(),a("img",{key:1,src:t.value.profile,class:"preview-image pic",id:"profilePic",alt:""},null,8,K)):d("",!0),!o.profilePreview&&!t.value.profile?(i(),a("img",Q)):d("",!0),W,e("input",{class:"uploadProfileInput",type:"file",name:"profile_pic",id:"imgUpload",accept:"image/*",onChange:s[2]||(s[2]=l=>D(l)),style:{display:"none"},disabled:o.editMode},null,40,X)])]),e("div",Z,[e("div",ee,[m(" Username "),e("input",{type:"text",placeholder:"Phone No",value:`+91-${t.value.username}`,disabled:""},null,8,oe)])]),e("div",te,[e("div",se,[m(" Full Name "),h(e("input",{type:"text",placeholder:"Full Name","onUpdate:modelValue":s[3]||(s[3]=l=>t.value.name=l),disabled:o.editMode},null,8,le),[[y,t.value.name]]),o.submit&&M.value?(i(),a("div",ie,p(M.value),1)):d("",!0)]),e("div",ae,[m(" DOB "),h(e("input",{type:"date",placeholder:"DOB","onUpdate:modelValue":s[4]||(s[4]=l=>t.value.dob=l),max:N(),disabled:o.editMode},null,8,de),[[y,t.value.dob]]),o.submit&&w.value?(i(),a("div",ne,p(w.value),1)):d("",!0)])]),e("div",re,[m(" Email "),h(e("input",{type:"text",placeholder:"Email","onUpdate:modelValue":s[5]||(s[5]=l=>t.value.email=l),disabled:o.editMode},null,8,ue),[[y,t.value.email]]),o.submit&&V.value?(i(),a("div",ce,p(V.value),1)):d("",!0)]),e("div",me,[e("div",pe,[m(" Gender "),c(g,{modelValue:t.value.gender,"onUpdate:modelValue":s[6]||(s[6]=l=>t.value.gender=l),options:U,placeholder:t.value.gender||"Select Gender",disabled:o.editMode},null,8,["modelValue","placeholder","disabled"]),o.submit&&B.value?(i(),a("div",ve,p(B.value),1)):d("",!0)]),e("div",fe,[m(" Blood Group "),c(g,{modelValue:t.value.group,"onUpdate:modelValue":s[7]||(s[7]=l=>t.value.group=l),options:O,placeholder:t.value.group||"Select Blood Group",disabled:o.editMode},null,8,["modelValue","placeholder","disabled"]),o.submit&&k.value?(i(),a("div",_e,p(k.value),1)):d("",!0)])]),e("div",be,[m(" Address "),h(e("textarea",{rows:"3",placeholder:"Address","onUpdate:modelValue":s[8]||(s[8]=l=>t.value.address=l),disabled:o.editMode},`\r
              `,8,ge),[[y,t.value.address]]),o.submit&&P.value?(i(),a("div",he,p(P.value),1)):d("",!0)]),o.editMode?d("",!0):(i(),a("button",{key:0,type:"button",class:"btn primary-btn save-btn",onClick:f(x,["prevent"])}," Save "))])])])]),c(E,{show:o.confirmModal,"onUpdate:show":s[10]||(s[10]=l=>o.confirmModal=l),class:"confirm-modal"},{default:A(()=>[ye,e("div",we,[e("button",{class:"btn grey-btn cancel-btn",onClick:s[9]||(s[9]=f(l=>o.confirmModal=!1,["prevent"]))}," Cancel "),Me])]),_:1},8,["show"]),c(E,{show:o.changeModal,"onUpdate:show":s[12]||(s[12]=l=>o.changeModal=l),class:"",headerClasses:"header-bg"},{header:A(()=>[Pe,e("div",{class:"close-btn",onClick:s[11]||(s[11]=f(l=>o.changeModal=!1,["prevent"]))},[c(G)])]),default:A(()=>[ke]),_:1},8,["show"])])}}};export{Ce as default};
