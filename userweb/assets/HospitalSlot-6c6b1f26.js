import{u as ae,q as ie,c as D,z as M,r as ne,y as g,n as ce,a as P,o as a,b as i,d as e,e as h,t as n,j as f,h as m,v as N,i as u,A as T,F as Y,k as O,g as S,w as X,l as de,B as Z}from"./index-477b0694.js";import{_ as re}from"./calender-9d47370a.js";const ue={class:"apt-slot-card hospital-apointment"},ve={class:"card-header"},me={class:"left-card-header"},_e={class:"icon"},pe=e("h3",null,"Hospital Appointment",-1),he={class:"right-card-header f-w-bold"},fe={class:"card-body"},be={class:"clinic-info center"},ke={class:"about"},De={class:"rate-row"},Se={class:"name"},ye={class:"rating"},ge={class:"text"},Pe={class:"date-input w-10-r"},Ne=["min"],Ve=e("div",{class:"icon"},[e("img",{src:re,alt:""})],-1),Ce={key:0,class:"mb-10"},Ae={class:"locker"},Fe={class:"radio-btns"},we={class:"radio"},Ee={class:"label"},Me={class:"radio"},Te={class:"label"},Ye={key:1,class:"slot-section"},Oe={class:"slot-header"},xe={class:"card-container"},Ie=["onClick"],Re={class:"day"},He={class:"date"},Le={class:"slot-status"},Ue={key:0,class:"text text-green f-w-bold"},$e={key:1,class:"text text-red f-w-bold"},Ge={key:0},Be={class:"book-btn"},ze={key:0,class:"card-body"},qe={class:"card total-card"},je=e("div",{class:"card-header"},"Price Details",-1),Ke={class:"card-body"},We={class:"price"},Je=e("div",{class:"title"},"Doctor Fee",-1),Qe={class:"val"},Xe={class:"price"},Ze=e("div",{class:"title"},"Hospital Fee",-1),et={class:"val"},tt={class:"price"},st=e("div",{class:"title"},"Platform Fee",-1),ot={class:"val"},lt=de('<div class="price"><div class="title">Payment Gateway Charge</div><div class="val text-green">₹15.00</div></div><div class="price"><div class="title">Discount</div><div class="val text-green">₹0.00</div></div>',2),at={class:"price total f-w-bold"},it=e("div",{class:"title"},"Total Amount",-1),nt={class:"val"},ct=e("div",{class:"save text-green f-w-bold"}," You will save ₹0 on this order ",-1),dt={class:"clinic-info"},rt={class:"about"},ut={class:"rate-row"},vt={class:"name"},mt={class:"rating"},_t={class:"text"},pt={class:"slot-section"},ht={class:"flex align-center gap-5 mb-10"},ft={class:"slot-header"},bt={class:"card-container"},kt=["onClick"],Dt={class:"day"},St={class:"date"},yt={class:"slot-status"},gt={key:0,class:"text text-green f-w-bold"},Pt={key:1,class:"text text-red f-w-bold"},Nt={class:"slot-body"},Vt=e("div",{class:"heading-slot"},"Available Slot :",-1),Ct={class:"mb-16"},At={class:"book-slots"},Ft=["for","onClick"],wt=["id","value"],Et={key:1,class:"time"},Mt={key:0,class:"online"},Tt={key:1,class:"offline"},Yt={key:2,class:"hospital"},Ot={key:2,class:"time"},xt=e("div",{class:"not-online"},"Not Available",-1),It=[xt],Rt={key:0,class:"mb-16"},Ht={class:"book-slots"},Lt=["for"],Ut=["id","value","onChange"],$t={class:"time-slot"},Gt={key:1,class:"mb-16"},Bt={class:"book-btn"},zt=e("div",{class:"title",showHeader:"true"},"Patient Detail",-1),qt={action:"",class:"form"},jt={class:"form-Container"},Kt={class:"tow-row"},Wt={class:"form-item mb-16"},Jt=e("div",{class:"title"},"First Name",-1),Qt={key:0,class:"err-msg"},Xt={class:"form-item mb-16"},Zt=e("div",{class:"title"},"Last Name",-1),es={key:0,class:"err-msg"},ts={class:"tow-row"},ss={class:"form-item mb-16"},os=e("div",{class:"title"},"Phone",-1),ls={key:0,class:"err-msg"},as={class:"form-item mb-16"},is=e("div",{class:"title"},"Email",-1),ns={key:0,class:"err-msg"},cs={class:"tow-row"},ds={class:"form-item mb-16"},rs=e("div",{class:"title"},"Gender",-1),us={key:0,class:"err-msg"},vs={class:"form-item mb-16"},ms=e("div",{class:"title"},"Dob",-1),_s=["max"],ps={key:0,class:"err-msg"},hs={class:"save-btn"},Ds={__name:"HospitalSlot",setup(fs){const v=ae(),G=ie(),l=D(()=>v.state.Hospital),C=M([]),A=M(null),b=M(null),V=M(null),x=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],t=ne({id:null,submit:!1,calendarDate:g().format("YYYY-MM-DD"),lockerStatus:null,doctorId:null,firstName:null,lastName:null,doctorFees:0,patientGender:x[0].id,contactNumber:null,email:null,dob:null,timePicker:"00:00",timePickerStatus:!1,timePickerStatus1:!1,slotId:null,scheduleOn:g().format("YYYY-MM-DD"),patientModal:!1});ce(()=>{G.query.id&&(t.id=G.query.id)});function B(){var c;if(!localStorage.getItem("userId"))return router.push({path:"/login"});if(l.value.selectDR&&!t.lockerStatus)return v.dispatch("Alert/error",{msg:"Please Select Locker status"}),null;if(l.value.selectDR&&((c=l.value.slotTimeData)==null?void 0:c.length)>0&&!t.timePickerStatus&&!V.value)return v.dispatch("Alert/error",{msg:"Please Select Time"}),null;if(l.value.selectDR&&b.value<0||b.value===null)return v.dispatch("Alert/error",{msg:"Please Select Slot"}),null;t.patientModal=!0}async function ee(){var p,y,w,E;if(t.timePickerStatus&&t.timePicker=="00:00")return v.dispatch("Alert/error",{msg:"Please Select Time!"});if(I.value||R.value||H.value||U.value||L.value||$.value)return t.submit=!0,null;t.submit=!1;const c=t.scheduleOn+"T"+t.timePicker,o=t.scheduleOn+"T"+V.value,r={scheduleOn:c,scheduleFor:null,type:"OFFLINE",appointmentFor:"Hospital Appointment",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,patientDetailId:null,franchiseId:null,pid:null,doctorDetailId:null,patientDetail:{firstName:t.firstName,lastName:t.lastName,dob:t.dob,gender:t.patientGender,mobile:t.contactNumber,email:t.email},labtest:[],commission:K(),gst:0,discount:0,doctorFees:(p=l.value.doctorDetails)==null?void 0:p.fees,hospitalFees:l.value.price,lockerStatus:t.lockerStatus,slotId:null,organizationId:t.id};if(l.value.selectDR){if(!t.lockerStatus)return v.dispatch("Alert/error",{msg:"Please Select Locker status"});if(b.value>=0){if(((y=l.value.slotTimeData)==null?void 0:y.length)>0&&!t.timePickerStatus&&!V.value)return v.dispatch("Alert/error",{msg:"Please Select Time"});r.scheduleOn=t.timePickerStatus?c:o,r.appointmentFor="Doctor Appointment",r.type=t.timePickerStatus?"OFFLINE":"ONLINE",r.doctorDetailId=(w=l.value.doctorDetails)==null?void 0:w.id,r.lockerStatus=t.lockerStatus,r.doctorFees=(E=l.value.doctorDetails)==null?void 0:E.fees,r.slotId=t.slotId}else return v.dispatch("Alert/error",{msg:"Please Select Slot"})}(await v.dispatch("Appointments/bookAppointments",r)).status===201&&(t.firstName=null,t.lastName=null,t.patientGender=x[0].id,t.contactNumber=null,t.email=null,t.dob=null,t.timePicker="00:00",t.patientModal=!1)}const z=(c,o,r,_)=>{t.scheduleOn=_,l.value.slotTimeData=[],b.value=null,o?(A.value=c,C.value=r,t.timePickerStatus1=!0):(C.value=[],t.timePickerStatus1=!1)};function F(c){if(c){var o=g(c,"HH:mm:ss").format("hh:mm A");return o}}function q(c){if(c){var o=g(c).format("MMM Do YYYY");return o}}function te(){return C.value=[],A.value=null,l.value.slotTimeData=[],l.value.selectDR?v.commit("Hospital/SET_DOCTOR_SCHEDULE",t.calendarDate):v.commit("Hospital/SET_HOSPITAL_SCHEDULE",t.calendarDate)}function se(c,o){var r,_,p;if(b.value=o,c.online){t.timePickerStatus=!1,t.doctorFees=(r=l.value.doctorDetails)==null?void 0:r.fees;const y=g(t.calendarDate).format("YYYY-MM-DD");return v.dispatch("Hospital/getSlotTime",{currentDate:y,periodId:c.id})}c.offline?(t.doctorFees=(_=l.value.doctorDetails)==null?void 0:_.offlineFees,t.timePickerStatus=!0):c.clinicVisitStatus?(t.timePickerStatus=!0,t.doctorFees=(p=l.value.doctorDetails)==null?void 0:p.studioClinicFees):t.timePickerStatus=!1}function j(){return g().format("YYYY-MM-DD")}const I=D(()=>{if(!t.firstName)return"Please enter first name!"}),R=D(()=>{if(!t.lastName)return"Please enter last name!"}),H=D(()=>{if(!t.dob)return"Please enter date of birth!"}),L=D(()=>{if(!t.patientGender)return"Please select gender!"}),U=D(()=>{if(!t.contactNumber)return"Please enter phone no!"}),$=D(()=>{let c=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(t.email){if(!c.test(t.email))return"Please enter valid email!"}else return"Please enter email!"});function oe(c){let o=String.fromCharCode(c.keyCode);if(/^[0-9]+$/.test(o))return!0;c.preventDefault()}function K(){return(l.value.doctorDetails.fees*(l.value.doctorDetails.commission/100)+l.value.price*(l.value.commission/100)).toFixed(2)}function le(){return(l.value.doctorDetails.fees+l.value.price+15+l.value.doctorDetails.fees*(l.value.doctorDetails.commission/100)+l.value.price*(l.value.commission/100)).toFixed(2)}return(c,o)=>{var W,J,Q;const r=P("icon-hospital"),_=P("icon-star"),p=P("time-picker"),y=P("icon-cross"),w=P("Select"),E=P("Modal");return a(),i("section",ue,[e("div",ve,[e("div",me,[e("div",_e,[h(r)]),pe]),e("div",he," ₹"+n(l.value.price)+" Fee ",1)]),e("div",fe,[e("div",be,[e("div",ke,[e("div",De,[e("h3",Se,n(l.value.name),1),e("div",ye,[h(_),f(" "+n(l.value.ratings),1)])]),e("div",ge,n(l.value.address),1)]),e("div",Pe,[m(e("input",{type:"date","onUpdate:modelValue":o[0]||(o[0]=s=>t.calendarDate=s),min:j(),onChange:te},null,40,Ne),[[N,t.calendarDate]]),Ve])]),l.value.selectDR?u("",!0):(a(),i("div",Ce,[f(" Appointment on "),e("strong",null,n(q(t.scheduleOn)),1)])),e("div",Ae,[f(" Share Your Health Locker "),e("div",Fe,[e("div",we,[e("label",Ee,[m(e("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":o[1]||(o[1]=s=>t.lockerStatus=s),value:"YES"},null,512),[[T,t.lockerStatus]]),f(" YES ")])]),e("div",Me,[e("label",Te,[m(e("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":o[2]||(o[2]=s=>t.lockerStatus=s),value:"NO"},null,512),[[T,t.lockerStatus]]),f(" NO ")])])])]),l.value.selectDR?u("",!0):(a(),i("div",Ye,[e("div",Oe,[e("div",xe,[(a(!0),i(Y,null,O(l.value.schedule,(s,d)=>(a(),i("div",{class:Z(["slot-card",{active:A.value==d}]),key:d,onClick:S(k=>z(d,s.status,[],s.date),["prevent"])},[e("div",Re,n(s.name),1),e("div",He,n(s.date),1),e("div",Le,[s.status?(a(),i("span",Ue,"Slots Available")):(a(),i("span",$e,"Slot Not Available"))])],10,Ie))),128))])]),t.timePickerStatus1&&!l.value.selectDR?(a(),i("div",Ge,[h(p,{class:"mb-16",modelValue:t.timePicker,"onUpdate:modelValue":o[3]||(o[3]=s=>t.timePicker=s)},null,8,["modelValue"])])):u("",!0),e("div",Be,[e("button",{type:"button",class:"btn primary-btn w-10-r",onClick:S(B,["prevent"])}," Book ")])]))]),l.value.selectDR?(a(),i("div",ze,[e("div",qe,[je,e("div",Ke,[e("div",We,[Je,e("div",Qe,"₹"+n(l.value.doctorDetails.fees.toFixed(2)),1)]),e("div",Xe,[Ze,e("div",et," ₹"+n(l.value.price.toFixed(2)),1)]),e("div",tt,[st,e("div",ot,"₹"+n(K()),1)]),lt,e("div",at,[it,e("div",nt,n(le()),1)]),ct])]),e("div",dt,[e("div",rt,[e("div",ut,[e("h3",vt,n((W=l.value.doctorDetails)==null?void 0:W.name),1),e("div",mt,[h(_),f(" "+n((J=l.value.doctorDetails)==null?void 0:J.rating),1)])]),e("div",_t,n((Q=l.value.doctorDetails)==null?void 0:Q.address),1)])]),e("div",pt,[e("div",ht,[f(" Appointment on "),e("strong",null,n(q(t.scheduleOn)),1)]),e("div",ft,[e("div",bt,[(a(!0),i(Y,null,O(l.value.doctorSchedule,(s,d)=>(a(),i("div",{class:Z(["slot-card",{active:A.value==d}]),key:d,onClick:S(k=>z(d,s.status,s.period,s.date),["prevent"])},[e("div",Dt,n(s.name),1),e("div",St,n(s.date),1),e("div",yt,[s.status?(a(),i("span",gt,"Slots Available")):(a(),i("span",Pt,"Slot Not Available"))])],10,kt))),128))])]),e("div",Nt,[Vt,e("div",Ct,[e("div",At,[(a(!0),i(Y,null,O(C.value,(s,d)=>(a(),i("div",{class:"slot-item",key:d},[F(s.time_start)?(a(),i("label",{key:0,for:`input-${d}`,onClick:S(k=>se(s,d),["prevent"])},[s.online||s.offline||s.clinicVisitStatus?m((a(),i("input",{key:0,type:"radio",id:`input-${d}`,name:"slot","onUpdate:modelValue":o[4]||(o[4]=k=>b.value=k),value:d},null,8,wt)),[[T,b.value]]):u("",!0),s.clinicVisitStatus||s.online||s.offline?(a(),i("div",Et,[f(n(F(s.time_start))+" - "+n(F(s.time_end))+" ",1),s.online?(a(),i("div",Mt," Online Consultancy Available ")):u("",!0),s.offline?(a(),i("div",Tt," Offline Consultancy Available ")):u("",!0),s.clinicVisitStatus?(a(),i("div",Yt," Clinic Studio Consultancy Available ")):u("",!0)])):(a(),i("div",Ot,It))],8,Ft)):u("",!0)]))),128))])]),t.timePickerStatus?(a(),i("div",Gt,[h(p,{modelValue:t.timePicker,"onUpdate:modelValue":o[6]||(o[6]=s=>t.timePicker=s)},null,8,["modelValue"])])):(a(),i("div",Rt,[e("div",Ht,[(a(!0),i(Y,null,O(l.value.slotTimeData,(s,d)=>(a(),i("div",{class:"slot-item-time",key:d},[e("label",{for:`inputs-${d}`},[m(e("input",{type:"radio",id:`inputs-${d}`,name:"slotTime","onUpdate:modelValue":o[5]||(o[5]=k=>V.value=k),value:s.time,onChange:k=>t.slotId=s.id},null,40,Ut),[[T,V.value]]),e("div",$t,n(F(s.time)),1)],8,Lt)]))),128))])])),e("div",Bt,[e("button",{type:"button",class:"btn primary-btn w-10-r",onClick:S(B,["prevent"])}," Book ")])])])])):u("",!0),h(E,{show:t.patientModal,"onUpdate:show":o[15]||(o[15]=s=>t.patientModal=s),class:"details-modal",headerClasses:"header-bg"},{header:X(()=>[zt,e("div",{class:"close-btn",onClick:o[7]||(o[7]=S(s=>t.patientModal=!1,["prevent"]))},[h(y)])]),default:X(()=>[e("form",qt,[e("div",jt,[e("div",Kt,[e("div",Wt,[Jt,m(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>t.firstName=s),placeholder:"Enter First Name",maxlength:"20"},null,512),[[N,t.firstName]]),t.submit&&I.value?(a(),i("div",Qt,n(I.value),1)):u("",!0)]),e("div",Xt,[Zt,m(e("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=s=>t.lastName=s),placeholder:"Enter Last Name",maxlength:"20"},null,512),[[N,t.lastName]]),t.submit&&R.value?(a(),i("div",es,n(R.value),1)):u("",!0)])]),e("div",ts,[e("div",ss,[os,m(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=s=>t.contactNumber=s),placeholder:"Enter Phone",onKeypress:o[11]||(o[11]=s=>oe(s)),maxlength:"10"},null,544),[[N,t.contactNumber]]),t.submit&&U.value?(a(),i("div",ls,n(U.value),1)):u("",!0)]),e("div",as,[is,m(e("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=s=>t.email=s),placeholder:"Enter Email"},null,512),[[N,t.email]]),t.submit&&$.value?(a(),i("div",ns,n($.value),1)):u("",!0)])]),e("div",cs,[e("div",ds,[rs,h(w,{modelValue:t.patientGender,"onUpdate:modelValue":o[13]||(o[13]=s=>t.patientGender=s),options:x,placeholder:"Select Gender"},null,8,["modelValue"]),t.submit&&L.value?(a(),i("div",us,n(L.value),1)):u("",!0)]),e("div",vs,[ms,m(e("input",{type:"date","onUpdate:modelValue":o[14]||(o[14]=s=>t.dob=s),placeholder:"Select Date",max:j()},null,8,_s),[[N,t.dob]]),t.submit&&H.value?(a(),i("div",ps,n(H.value),1)):u("",!0)])])]),e("div",hs,[e("button",{type:"button",class:"btn primary-btn",onClick:S(ee,["prevent"])}," Submit ")])])]),_:1},8,["show"])])}}};export{Ds as default};
