import{u as $,c as u,r as L,y as z,n as H,a as y,o as r,b as c,d as e,F as j,k as J,i as m,t as i,g as h,e as D,w as k,j as K,h as v,v as _}from"./index-477b0694.js";import{_ as W}from"./microscope2-8ae241b5.js";import{_ as q}from"./payments-4387c33c.js";const Q={class:"cart-page"},X={class:"container"},Z={class:"cards"},ee={key:0,class:"card item-list"},te={class:"left"},se=e("div",{class:"img"},[e("img",{src:W,alt:""})],-1),ae={class:"name"},le={class:"main"},oe=e("div",{class:"sub"},"Tests: Glucose, Fasting",-1),ie={class:"sub"},ne={class:"right"},re={class:"cash-price"},ce={class:"cashback"},de=e("div",{class:"dot"},null,-1),ue={class:"price"},me={class:"current"},ve={class:"actual"},_e={class:"off"},he={class:"remove-btn"},pe=["onClick"],fe={key:1,class:"item-list"},be=e("div",{class:"no-data-found-cart card"},[e("div",{class:"img"},[e("img",{src:q,alt:""})]),e("div",{class:"text"},"Your cart is currently empty!")],-1),ge=[be],De={class:"card total-card"},ye=e("div",{class:"header"},"Price Details",-1),ke={class:"card-body"},Ne={class:"price"},Ce={class:"title"},we={class:"val"},Pe={class:"price"},Me=e("div",{class:"title"},"Discount",-1),Ve={class:"val text-green"},Ee={class:"price total f-w-bold"},xe=e("div",{class:"title"},"Total Amount",-1),Te={class:"val"},Ie={class:"save text-green f-w-bold"},Le={class:"order-btn"},Ae=e("h4",null," Are you sure want to Delete ",-1),Oe={class:"btns"},Se=e("div",{class:"title",showHeader:"true"},"Patient Detail",-1),Fe={action:"",class:"form"},Ue={class:"form-Container"},Be={class:"tow-row"},Re={class:"form-item mb-16"},Ye=e("div",{class:"title"},"First Name ",-1),Ge={key:0,class:"err-msg"},$e={class:"form-item mb-16"},ze=e("div",{class:"title"},"Last Name ",-1),He={key:0,class:"err-msg"},je={class:"tow-row"},Je={class:"form-item mb-16"},Ke=e("div",{class:"title"},"Gender ",-1),We={key:0,class:"err-msg"},qe={class:"form-item mb-16"},Qe=e("div",{class:"title"},"DOB ",-1),Xe=["max"],Ze={key:0,class:"err-msg"},et={class:"tow-row"},tt={class:"form-item mb-16"},st=e("div",{class:"title"},"Phone ",-1),at={key:0,class:"err-msg"},lt={class:"form-item mb-16"},ot=e("div",{class:"title"},"Email ",-1),it={key:0,class:"err-msg"},nt={class:"tow-row"},rt={class:"form-item mb-16"},ct=e("div",{class:"title"},"Form Time ",-1),dt={key:0,class:"err-msg"},ut={class:"form-item mb-16"},mt=e("div",{class:"title"},"To Time ",-1),vt={key:0,class:"err-msg"},_t={class:"save-btn"},Dt={__name:"Cart",setup(ht){const p=$(),o=u(()=>p.state.Appointments);u(()=>p.state.Auth);const V=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],s=L({submit:!1,cartData:[],totalPrice:null,deleteId:null,verificationModal:!1,scheduleOn:z().format(),placeLabData:[],firstName:null,lastName:null,dob:null,gender:V[0].id,mobile:null,email:null,self:!1,formTime:null,toTime:null});H(()=>{let l=localStorage.getItem("CartData");if((l==null?void 0:l.length)>0){o.value.cartData=JSON.parse(l);for(let t=0;t<o.value.cartData.length;t++){const n=o.value.cartData[t].id;o.value.placeLabData.push({labTestId:n})}}});function A(){var l=new Date,t=l.getDate(),n=l.getFullYear(),d=l.getMonth()+1;d<10&&(d="0"+d),t<10&&(t="0"+t);var M=n+"-"+d+"-"+t;return M}const O=u(()=>o.value.cartData.length>0?o.value.cartData.reduce((t,n)=>t+n.price,0):0),E=u(()=>{if(o.value.cartData.length>0){const l=o.value.cartData.reduce((n,d)=>n+d.discountPrice,0);return o.value.cartData.reduce((n,d)=>n+d.price,0)-l}else return 0}),S=u(()=>o.value.cartData.length>0?o.value.cartData.reduce((t,n)=>t+n.discountPrice,0):0);function F(){var l,t;((l=o.value.placeLabData)==null?void 0:l.length)>0&&((t=o.value.cartData)==null?void 0:t.length)>0?s.verificationModal=!0:p.dispatch("Alert/error",{msg:"Your cart is currently empty!"})}function U(l){f.confirmModal=!0,s.deleteId=l}function B(){const l=o.value.cartData.findIndex(t=>t.id===s.deleteId);o.value.cartData.splice(l,1),localStorage.removeItem("CartData"),localStorage.setItem("CartData",JSON.stringify(o.value.cartData)),f.confirmModal=!1}const f=L({confirmModal:!1});function R(){var l,t;if(!s.self&&(N.value||C.value||w.value||P.value||b.value||g.value))return s.submit=!0,null;s.submit=!1,s.useData=localStorage.getItem("CartData"),((l=o.value.placeLabData)==null?void 0:l.length)>0&&((t=o.value.cartData)==null?void 0:t.length)>0?(p.dispatch("Appointments/bookAppointments",{scheduleOn:s.scheduleOn,scheduleFor:null,type:"ONLINE",appointmentFor:"Lab Appointment",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,accountId:null,patientDetailId:null,franchiseId:null,pid:null,doctorDetailId:null,patientDetail:{firstName:s.firstName,lastName:s.lastName,dob:s.dob,gender:s.gender,mobile:s.mobile,email:s.email},labtest:o.value.placeLabData,lockerStatus:"NO"}),s.verificationModal=!1):p.dispatch("Alert/error",{msg:"Your cart is currently empty!"})}const N=u(()=>{if(!s.firstName)return"Please enter first name"}),C=u(()=>{if(!s.lastName)return"Please enter last name"}),w=u(()=>{if(!s.dob)return"Please enter dob name"}),P=u(()=>{if(!s.gender)return"Please select gender"}),b=u(()=>{if(!s.mobile)return"Please enter phone no"}),g=u(()=>{let l=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(s.email){if(!l.test(s.email))return"Please enter valid email!"}else return"Please enter email!"});function Y(l){let t=String.fromCharCode(l.keyCode);if(/^[0-9]+$/.test(t))return!0;l.preventDefault()}return(l,t)=>{var x,T,I;const n=y("router-link"),d=y("Modal"),M=y("icon-cross"),G=y("Select");return r(),c("section",Q,[e("div",X,[e("div",Z,[((x=o.value.cartData)==null?void 0:x.length)>0?(r(),c("div",ee,[(r(!0),c(j,null,J(o.value.cartData,a=>(r(),c("span",{key:a},[D(n,{to:"/test-details?id="+a.id,class:"cart-card"},{default:k(()=>[e("div",te,[se,e("div",ae,[e("div",le,i(a.title),1),oe,e("div",ie,"Lab: "+i(a.labName),1)])]),e("div",ne,[e("div",re,[e("div",ce,[de,K(" ₹"+i(a.cashBackPrice)+" Cashback ",1)]),e("div",ue,[e("div",me,"₹"+i(a.discountPrice),1),e("div",ve,"("+i(a.price)+")",1),e("div",_e,i(a.discount)+"% Off",1)])]),e("div",he,[e("div",{class:"btn",onClick:h(pt=>U(a.id),["prevent"])},"Remove",8,pe)])])]),_:2},1032,["to"])]))),128))])):m("",!0),((T=o.value.cartData)==null?void 0:T.length)<=0?(r(),c("div",fe,ge)):m("",!0),e("div",De,[ye,e("div",ke,[e("div",Ne,[e("div",Ce,"Price ("+i((I=o.value.cartData)==null?void 0:I.length)+" Item)",1),e("div",we,"₹"+i(O.value),1)]),e("div",Pe,[Me,e("div",Ve,"₹"+i(E.value),1)]),e("div",Ee,[xe,e("div",Te,"₹"+i(S.value),1)]),e("div",Ie,"You will save ₹"+i(E.value)+" on this order",1),e("div",Le,[e("button",{class:"btn primary-btn",onClick:h(F,["prevent"])},"Place Order")])])])])]),D(d,{show:f.confirmModal,"onUpdate:show":t[1]||(t[1]=a=>f.confirmModal=a),class:"confirm-modal"},{default:k(()=>[Ae,e("div",Oe,[e("button",{class:"btn grey-btn cancel-btn",onClick:t[0]||(t[0]=h(a=>f.confirmModal=!1,["prevent"]))},"Cancel"),e("button",{class:"btn confirm-btn",onClick:h(B,["prevent"])},"Confirm")])]),_:1},8,["show"]),D(d,{show:s.verificationModal,"onUpdate:show":t[13]||(t[13]=a=>s.verificationModal=a),class:"details-modal",headerClasses:"header-bg"},{header:k(()=>[Se,e("div",{class:"close-btn",onClick:t[2]||(t[2]=h(a=>s.verificationModal=!1,["prevent"]))},[D(M)])]),default:k(()=>[e("form",Fe,[e("div",Ue,[e("div",Be,[e("div",Re,[Ye,v(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>s.firstName=a),placeholder:"Enter First Name"},null,512),[[_,s.firstName]]),s.submit&&N.value?(r(),c("div",Ge,i(N.value),1)):m("",!0)]),e("div",$e,[ze,v(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=a=>s.lastName=a),placeholder:"Enter Last Name"},null,512),[[_,s.lastName]]),s.submit&&C.value?(r(),c("div",He,i(C.value),1)):m("",!0)])]),e("div",je,[e("div",Je,[Ke,D(G,{modelValue:s.gender,"onUpdate:modelValue":t[5]||(t[5]=a=>s.gender=a),options:V,placeholder:"Select Gender"},null,8,["modelValue"]),s.submit&&P.value?(r(),c("div",We,i(P.value),1)):m("",!0)]),e("div",qe,[Qe,v(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=a=>s.dob=a),max:A(),placeholder:"Enter"},null,8,Xe),[[_,s.dob]]),s.submit&&w.value?(r(),c("div",Ze,i(w.value),1)):m("",!0)])]),e("div",et,[e("div",tt,[st,v(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=a=>s.mobile=a),placeholder:"Enter Phone",onKeypress:t[8]||(t[8]=a=>Y(a)),onKeyup:t[9]||(t[9]=a=>a.target.value=a.target.value.slice(0,10))},null,544),[[_,s.mobile]]),s.submit&&b.value?(r(),c("div",at,i(b.value),1)):m("",!0)]),e("div",lt,[ot,v(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=a=>s.email=a),placeholder:"Enter Email"},null,512),[[_,s.email]]),s.submit&&g.value?(r(),c("div",it,i(g.value),1)):m("",!0)])]),e("div",nt,[e("div",rt,[ct,v(e("input",{type:"time","onUpdate:modelValue":t[11]||(t[11]=a=>s.formTime=a)},null,512),[[_,s.formTime]]),s.submit&&b.value?(r(),c("div",dt,i(b.value),1)):m("",!0)]),e("div",ut,[mt,v(e("input",{type:"time","onUpdate:modelValue":t[12]||(t[12]=a=>s.toTime=a)},null,512),[[_,s.toTime]]),s.submit&&g.value?(r(),c("div",vt,i(g.value),1)):m("",!0)])])]),e("div",_t,[e("button",{type:"button",class:"btn primary-btn",onClick:h(R,["prevent"])},"Submit")])])]),_:1},8,["show"])])}}};export{Dt as default};
