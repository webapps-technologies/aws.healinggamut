import{u as le,q as ae,m as ie,c as p,z as C,r as ne,y as f,n as de,a as b,o as i,b as n,d as e,e as k,t as d,j as S,h as u,v as y,A as E,F,k as L,g as N,w as $,l as ce,B as re,i as m}from"./index-477b0694.js";import{_ as ue}from"./calender-9d47370a.js";const me={class:"apt-slot-card"},ve={class:"card-header"},_e={class:"left-card-header"},pe={class:"icon"},he=e("h3",null,"Doctor Appointment",-1),fe={class:"right-card-header f-w-bold"},be={class:"card-body"},ke={class:"clinic-info"},Se={class:"about"},ye={class:"rate-row"},ge={class:"name"},De={class:"rating"},Ne={class:"text"},Pe={class:"clinic-option"},Ve={class:"date-input"},Ae=["min"],Ce=e("div",{class:"icon"},[e("img",{src:ue,alt:""})],-1),Ee={class:"slot-section"},Fe={class:"locker"},Me={class:"radio-btns"},Te={class:"radio"},we={class:"label"},Oe={class:"radio"},Ye={class:"label"},Ie={class:"card total-card"},Le=e("div",{class:"card-header"},"Price Details",-1),xe={class:"card-body"},Ue={class:"price"},Re=e("div",{class:"title"},"Doctor Fee",-1),Ge={class:"val"},$e={class:"price"},Be=e("div",{class:"title"},"Platform Fee",-1),He={class:"val"},ze=ce('<div class="price"><div class="title">Payment Gateway Charge</div><div class="val text-green">₹15.00</div></div><div class="price"><div class="title">Discount</div><div class="val text-green">₹0.00</div></div>',2),qe={class:"price total f-w-bold"},je=e("div",{class:"title"},"Total Amount",-1),Ke={class:"val"},We=e("div",{class:"save text-green f-w-bold"}," You will save ₹0 on this order ",-1),Je={class:"mb-10"},Qe={class:"slot-header"},Xe={class:"card-container"},Ze=["onClick"],et={class:"day"},tt={class:"date"},st={class:"slot-status"},ot={key:0,class:"text text-green f-w-bold"},lt={key:1,class:"text text-red f-w-bold"},at={class:"slot-body apointment-date"},it=e("div",{class:"heading-slot"},"Available Slots :",-1),nt={class:"mb-16"},dt={class:"book-slots"},ct=["for","onClick"],rt=["id","value"],ut={key:1,class:"time"},mt={key:0,class:"online"},vt={key:1,class:"offline"},_t={key:2,class:"hospital"},pt={key:2,class:"time unabavilable"},ht=e("div",{class:"not-online"},"Not Available",-1),ft=[ht],bt={key:0,class:"mb-16"},kt={class:"book-slots"},St=["for"],yt=["id","value","onChange"],gt={class:"time-slot"},Dt={key:1,class:"mb-16"},Nt={class:"book-btn"},Pt=e("div",{class:"title",showHeader:"true"},"Patient Detail",-1),Vt={action:"",class:"form"},At={class:"form-Container"},Ct={class:"tow-row"},Et={class:"form-item mb-16"},Ft=e("div",{class:"title"},"First Name",-1),Mt={key:0,class:"err-msg"},Tt={class:"form-item mb-16"},wt=e("div",{class:"title"},"Last Name",-1),Ot={key:0,class:"err-msg"},Yt={class:"tow-row"},It={class:"form-item mb-16"},Lt=e("div",{class:"title"},"Phone",-1),xt={key:0,class:"err-msg"},Ut={class:"form-item mb-16"},Rt=e("div",{class:"title"},"Email",-1),Gt={key:0,class:"err-msg"},$t={class:"tow-row"},Bt={class:"form-item mb-16"},Ht=e("div",{class:"title"},"Gender",-1),zt={key:0,class:"err-msg"},qt={class:"form-item mb-16"},jt=e("div",{class:"title"},"Dob",-1),Kt=["max"],Wt={key:0,class:"err-msg"},Jt={class:"save-btn"},es={__name:"DoctorSlot",setup(Qt){const c=le(),x=ae(),B=ie(),a=p(()=>c.state.Doctor),P=C([]),V=C(null),v=C(null),A=C(null),H=[{id:"ONLINE",name:"ONLINE"},{id:"OFFLINE",name:"OFFLINE"}],M=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],t=ne({clinic:null,id:null,submit:!1,weekday:null,lockerStatus:null,type:H[0],slotTime:null,doctorFees:null,patientModal:!1,calendarDate:f().format("YYYY-MM-DD"),scheduleOn:f().format("YYYY-MM-DD"),timePickerStatus:!1,timePicker:"00:00:00",firstName:null,lastName:null,patientGender:M[0].id,contactNumber:null,email:null,dob:null,slotId:null});de(()=>{x.query.id&&z(x.query.id)});function z(l){a.value.slotTimeData=[],c.dispatch("Doctor/getDoctorDetails",{id:l})}function T(l){if(l){var o=f(l,"HH:mm:ss").format("hh:mm A");return o}}function q(l){if(l){var o=f(l).format("MMM Do YYYY");return o}}function j(){return P.value=[],V.value=null,a.value.slotTimeData=[],c.commit("Doctor/SET_DOCTOR_SCHEDULE",t.calendarDate)}function K(l,o){if(v.value=o,l.online){t.timePickerStatus=!1,t.doctorFees=a.value.fees;const _=f(t.calendarDate).format("YYYY-MM-DD");c.dispatch("Doctor/getSlotTime",{currentDate:_,periodId:l.id})}l.offline?(t.doctorFees=a.value.offlineFees,t.timePickerStatus=!0):l.clinicVisitStatus?(t.timePickerStatus=!0,t.doctorFees=a.value.studioClinicFees):t.timePickerStatus=!1}function W(){var l;if(!localStorage.getItem("userId"))return B.push({path:"/login"});if(!t.lockerStatus)return c.dispatch("Alert/error",{msg:"Please Select Locker status"});if(V.value==null)return c.dispatch("Alert/error",{msg:"Please Select Day Slot"});if(v.value!==null&&v.value>=0){if(((l=a.value.slotTimeData)==null?void 0:l.length)>0&&!t.timePicker)return c.dispatch("Alert/error",{msg:"Please Select Time"})}else return c.dispatch("Alert/error",{msg:"Please Select Slot"});t.patientModal=!0}async function J(){var l;if(t.timePickerStatus&&t.timePicker=="00:00")return c.dispatch("Alert/error",{msg:"Please Select Time!"});if(!t.lockerStatus)return c.dispatch("Alert/error",{msg:"Please Select Locker status"});if(v.value>=0){if(((l=a.value.slotTimeData)==null?void 0:l.length)>0&&!t.timePickerStatus&&!A.value)return c.dispatch("Alert/error",{msg:"Please Select Time"});if(g.value||X.value||w.value||Y.value||O.value||I.value)return t.submit=!0,null;t.submit=!1;const o=t.scheduleOn+"T"+t.timePicker,_=t.scheduleOn+"T"+A.value,D={scheduleOn:t.timePickerStatus?o:_,scheduleFor:null,type:t.timePickerStatus?"OFFLINE":"ONLINE",appointmentFor:"Doctor Appointment",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,patientDetailId:null,franchiseId:null,pid:null,patientDetail:{firstName:t.firstName,lastName:t.lastName,dob:t.dob,gender:t.patientGender,mobile:t.contactNumber,email:t.email},labtest:[],doctorFees:+t.doctorFees,hospitalFees:0,commission:R(a.value.fees,a.value.commission),gst:0,discount:0,lockerStatus:t.lockerStatus,doctorDetailId:a.value.id,slotId:t.timePickerStatus?null:t.slotId};(await c.dispatch("Appointments/bookAppointments",D)).status===201&&(t.firstName=null,t.lastName=null,t.patientGender=M[0].id,t.contactNumber=null,t.email=null,t.dob=null,t.timePicker="00:00",t.patientModal=!1)}else return c.dispatch("Alert/error",{msg:"Please Select Slot"})}function U(){return f().format("YYYY-MM-DD")}const Q=(l,o,_,D)=>{t.scheduleOn=D,a.value.slotTimeData=[],v.value=null,o?(V.value=l,P.value=_):(t.timePickerStatus=!1,P.value=[])},g=p(()=>{if(!t.firstName)return"Please enter first name"}),X=p(()=>{if(!t.lastName)return"Please enter last name"}),w=p(()=>{if(!t.dob)return"Please enter dob"}),O=p(()=>{if(!t.patientGender)return"Please select gender"}),Y=p(()=>{if(!t.contactNumber)return"Please enter phone no"}),I=p(()=>{let l=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(t.email){if(!l.test(t.email))return"Please enter valid email!"}else return"Please enter email!"});function Z(l){let o=String.fromCharCode(l.keyCode);if(/^[0-9]+$/.test(o))return!0;l.preventDefault()}function R(l,o){return(l*(o/100)).toFixed(2)}function ee(){return(a.value.fees+15+a.value.fees*(a.value.commission/100)).toFixed(2)}return(l,o)=>{const _=b("icon-doctor"),D=b("icon-star"),G=b("time-picker"),te=b("icon-cross"),se=b("Select"),oe=b("Modal");return i(),n(F,null,[e("section",me,[e("div",ve,[e("div",_e,[e("div",pe,[k(_)]),he]),e("div",fe,"₹"+d(a.value.fees)+" Fee",1)]),e("div",be,[e("div",ke,[e("div",Se,[e("div",ye,[e("h3",ge,d(a.value.name),1),e("div",De,[k(D),S(" "+d(a.value.rating),1)])]),e("div",Ne,d(a.value.address),1)]),e("div",Pe,[e("div",Ve,[u(e("input",{type:"date","onUpdate:modelValue":o[0]||(o[0]=s=>t.calendarDate=s),min:U(),onChange:j},null,40,Ae),[[y,t.calendarDate]]),Ce])])]),e("div",Ee,[e("div",Fe,[S(" Share Your Health Locker "),e("div",Me,[e("div",Te,[e("label",we,[u(e("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":o[1]||(o[1]=s=>t.lockerStatus=s),value:"YES"},null,512),[[E,t.lockerStatus]]),S(" YES ")])]),e("div",Oe,[e("label",Ye,[u(e("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":o[2]||(o[2]=s=>t.lockerStatus=s),value:"NO"},null,512),[[E,t.lockerStatus]]),S(" NO ")])])])]),e("div",Ie,[Le,e("div",xe,[e("div",Ue,[Re,e("div",Ge,"₹"+d(a.value.fees.toFixed(2)),1)]),e("div",$e,[Be,e("div",He," ₹"+d(R(a.value.fees,a.value.commission)),1)]),ze,e("div",qe,[je,e("div",Ke,d(ee()),1)]),We])]),e("div",Je,[S(" Appointment on "),e("strong",null,d(q(t.scheduleOn)),1)]),e("div",Qe,[e("div",Xe,[(i(!0),n(F,null,L(a.value.doctorSchedule,(s,r)=>(i(),n("div",{class:re(["slot-card",{active:V.value==r}]),key:r,onClick:N(h=>Q(r,s.status,s.period,s.date),["prevent"])},[e("div",et,d(s.name),1),e("div",tt,d(s.date),1),e("div",st,[s.status?(i(),n("span",ot,"Slots Available")):(i(),n("span",lt,"Slots Not Available"))])],10,Ze))),128))])]),e("div",at,[it,e("div",nt,[e("div",dt,[(i(!0),n(F,null,L(P.value,(s,r)=>(i(),n("div",{class:"slot-item",key:r},[e("label",{for:`input-${r}`,onClick:N(h=>K(s,r),["prevent"])},[s.online||s.offline||s.clinicVisitStatus?u((i(),n("input",{key:0,type:"radio",id:`input-${r}`,name:"slot","onUpdate:modelValue":o[3]||(o[3]=h=>v.value=h),value:r},null,8,rt)),[[E,v.value]]):m("",!0),s.clinicVisitStatus||s.online||s.offline?(i(),n("div",ut,[S(d(T(s.time_start))+" - "+d(T(s.time_end))+" ",1),s.online?(i(),n("div",mt," Online Consultancy Available ")):m("",!0),s.offline?(i(),n("div",vt," Offline Consultancy Available ")):m("",!0),s.clinicVisitStatus?(i(),n("div",_t," Clinic Studio Consultancy Available ")):m("",!0)])):(i(),n("div",pt,ft))],8,ct)]))),128))])]),t.timePickerStatus?(i(),n("div",Dt,[k(G,{modelValue:t.timePicker,"onUpdate:modelValue":o[5]||(o[5]=s=>t.timePicker=s)},null,8,["modelValue"])])):(i(),n("div",bt,[e("div",kt,[(i(!0),n(F,null,L(a.value.slotTimeData,(s,r)=>(i(),n("div",{class:"slot-item-time",key:r},[e("label",{for:`inputs-${r}`},[u(e("input",{type:"radio",id:`inputs-${r}`,name:"slotTime","onUpdate:modelValue":o[4]||(o[4]=h=>A.value=h),value:s.time,onChange:h=>t.slotId=s.id},null,40,yt),[[E,A.value]]),e("div",gt,d(T(s.time)),1)],8,St)]))),128))])])),e("div",Nt,[e("button",{type:"button",class:"btn primary-btn w-10-r",onClick:N(W,["prevent"])}," Book ")])])])])]),k(oe,{show:t.patientModal,"onUpdate:show":o[14]||(o[14]=s=>t.patientModal=s),class:"details-modal",headerClasses:"header-bg"},{header:$(()=>[Pt,e("div",{class:"close-btn",onClick:o[6]||(o[6]=N(s=>t.patientModal=!1,["prevent"]))},[k(te)])]),default:$(()=>[e("form",Vt,[e("div",At,[e("div",Ct,[e("div",Et,[Ft,u(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>t.firstName=s),placeholder:"Enter First Name",maxlength:"20"},null,512),[[y,t.firstName]]),t.submit&&g.value?(i(),n("div",Mt,d(g.value),1)):m("",!0)]),e("div",Tt,[wt,u(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>t.lastName=s),placeholder:"Enter Last Name",maxlength:"20"},null,512),[[y,t.lastName]]),t.submit&&g.value?(i(),n("div",Ot,d(g.value),1)):m("",!0)])]),e("div",Yt,[e("div",It,[Lt,u(e("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=s=>t.contactNumber=s),placeholder:"Enter Phone",onKeypress:o[10]||(o[10]=s=>Z(s)),maxlength:"10"},null,544),[[y,t.contactNumber]]),t.submit&&Y.value?(i(),n("div",xt,d(Y.value),1)):m("",!0)]),e("div",Ut,[Rt,u(e("input",{type:"text","onUpdate:modelValue":o[11]||(o[11]=s=>t.email=s),placeholder:"Enter Email"},null,512),[[y,t.email]]),t.submit&&I.value?(i(),n("div",Gt,d(I.value),1)):m("",!0)])]),e("div",$t,[e("div",Bt,[Ht,k(se,{modelValue:t.patientGender,"onUpdate:modelValue":o[12]||(o[12]=s=>t.patientGender=s),options:M,placeholder:"Select Gender"},null,8,["modelValue"]),t.submit&&O.value?(i(),n("div",zt,d(O.value),1)):m("",!0)]),e("div",qt,[jt,u(e("input",{type:"date","onUpdate:modelValue":o[13]||(o[13]=s=>t.dob=s),placeholder:"Enter Age",max:U()},null,8,Kt),[[y,t.dob]]),t.submit&&w.value?(i(),n("div",Wt,d(w.value),1)):m("",!0)])])]),e("div",Jt,[e("button",{type:"button",class:"btn primary-btn",onClick:N(J,["prevent"])}," Submit ")])])]),_:1},8,["show"])],64)}}};export{es as default};
