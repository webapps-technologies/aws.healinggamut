import{u as N,m as V,c as C,r as S,n as $,a as m,o as l,b as d,d as t,e as c,w as r,F as O,k as Y,i as g,j as u,t as i,g as D,h as E,v as H,y as L}from"./index-477b0694.js";import{_ as R}from"./download-d4dcec17.js";const W="/assets/update-icon-1d697910.png",j="/assets/delete-3c09bd37.png",G={class:"appointment-page"},q={class:"appointment-content"},z={class:"top-btn-row mb-16"},J=t("h3",null,"Ambulance Booking",-1),K={class:"table-outer"},Q={class:"table"},X=t("thead",null,[t("th",null,"Token No"),t("th",null,"Date/Time"),t("th",null,"Booking From"),t("th",null,"Booking To"),t("th",null,"Type"),t("th",null,"Appointment With"),t("th",null,"Payment Status"),t("th",null,"Status"),t("th",{class:"text-center"},"Option")],-1),Z={class:"text-center"},tt={class:"option-btns"},ot=["onClick"],nt=t("img",{src:W,alt:""},null,-1),et=t("div",{class:"tooltip"},"Change Destination",-1),st=[nt,et],at=["onClick"],it=t("img",{src:j,alt:""},null,-1),lt=t("div",{class:"tooltip"},"Cancel",-1),dt=[it,lt],ct={key:0,class:"table-no-data"},rt=t("div",null,"No records Found!",-1),ut=[rt],pt={key:1,class:"table-footer"},mt={class:"entries"},_t=t("div",{class:"title",showHeader:"true"},"Change Destination",-1),ht={class:"form"},ft={class:"form-item-two"},bt=t("div",{class:"title"},"Destination",-1),vt={class:"form-input mb-10"},gt={key:0,class:"err-msg"},kt=t("h4",null,"Are you sure want to Cancel ?",-1),wt={class:"btns"},yt=t("div",{class:"d-header text-center f-w-bold"},"DOWNLOADING",-1),Mt=t("div",{class:"d-body"},[t("div",{class:"img"},[t("img",{src:R,alt:""})]),t("div",{class:"text"},"Processing Invoice")],-1),Tt={__name:"AmbulanceBooking",setup(At){const p=N();V();const a=C(()=>p.state.Appointments),k=[{id:"Ambulance Booking",name:"Ambulance Booking"}],o=S({downloadModal:!1,limit:10,offset:0,keyword:"",cPage:1,submit:!1,bookingTo:null,appointmentFor:k[0].id,filterAppointmentFor:k[0].id,appointmentId:null});$(()=>{w(o.limit,o.offset,o.keyword,o.appointmentFor,o.cPage)});function w(s,e,h,f,b){p.dispatch("Appointments/getMyAppointments",{limit:s,offset:e,keyword:h,appointmentFor:f,cPage:b})}function P(s){o.appointmentId=s,o.confirmModal=!0}function T(){p.dispatch("Appointments/cancelAppointments",{id:o.appointmentId}),o.confirmModal=!1}function x(s){o.appointmentId=s,a.value.bookUpdateModal=!0}function B(){if(_.value)return o.submit=!0,null;p.dispatch("Appointments/changeDestination",{id:o.appointmentId,bookingTo:o.bookingTo}),a.value.bookUpdateModal=!1}function F(s){o.cPage=s,o.offset=o.limit*(s-1),w(o.limit,o.offset,o.keyword,o.appointmentFor,s<=1?1:s-1)}const _=C(()=>{if(!o.bookingTo)return"Enter destination!"});function I(s){if(s)return L(s).subtract({hours:4,minutes:30}).format("MMM Do YYYY, h:mm A")}return(s,e)=>{var y,M;const h=m("router-link"),f=m("Pagination"),b=m("icon-cross"),v=m("Modal");return l(),d("section",G,[t("div",q,[t("div",z,[J,c(h,{to:"/panel/ambulance",class:"btn primary-btn"},{default:r(()=>[u("Book Ambulance")]),_:1})]),t("div",K,[t("table",Q,[X,t("tbody",null,[(l(!0),d(O,null,Y(a.value.appointmentData,(n,Ct)=>{var A;return l(),d("tr",{key:n},[t("td",null,i(n.appointmentId),1),t("td",null,i(I(n.scheduleOn)),1),t("td",null,i(n.bookingFrom),1),t("td",null,i(n.bookingTo),1),t("td",null,i(n.type),1),t("td",null,i(n.appointmentFor),1),t("td",null,i((A=n.paymentHistory)==null?void 0:A.status),1),t("td",null,i(n.status),1),t("td",Z,[t("div",tt,[t("div",{class:"action-icon",onClick:U=>x(n.id)},st,8,ot),t("div",{class:"action-icon",onClick:U=>P(n.id)},dt,8,at)])])])}),128))])])]),((y=a.value.appointmentData)==null?void 0:y.length)<=0?(l(),d("div",ct,ut)):g("",!0),((M=a.value.appointmentData)==null?void 0:M.length)>0?(l(),d("div",pt,[t("div",mt,[u(" Showing "),t("span",null,i(o.offset+1),1),u(" to "),t("span",null,i(a.value.totalAppointment>o.limit+o.offset?o.limit+o.offset:a.value.totalAppointment),1),u(" of "),t("span",null,i(a.value.totalAppointment),1),u(" entries ")]),c(f,{currentPage:o.cPage,totalItem:a.value.totalAppointment,itemsPerPage:o.limit,"onUpdate:currentPage":e[0]||(e[0]=n=>F(n))},null,8,["currentPage","totalItem","itemsPerPage"])])):g("",!0)]),c(v,{show:a.value.bookUpdateModal,"onUpdate:show":e[3]||(e[3]=n=>a.value.bookUpdateModal=n),class:"",headerClasses:"header-bg"},{header:r(()=>[_t,t("div",{class:"close-btn",onClick:e[1]||(e[1]=D(n=>a.value.bookUpdateModal=!1,["prevent"]))},[c(b)])]),default:r(()=>[t("form",ht,[t("div",ft,[bt,t("div",vt,[E(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>o.bookingTo=n),placeholder:"Enter Destination"},null,512),[[H,o.bookingTo]]),o.submit&&_.value?(l(),d("div",gt,i(_.value),1)):g("",!0)])]),t("div",{class:"save-btn"},[t("button",{type:"button",class:"btn primary-btn",onClick:B},"Save")])])]),_:1},8,["show"]),c(v,{show:o.confirmModal,"onUpdate:show":e[5]||(e[5]=n=>o.confirmModal=n),class:"confirm-modal"},{default:r(()=>[kt,t("div",wt,[t("button",{class:"btn grey-btn cancel-btn",onClick:e[4]||(e[4]=D(n=>o.confirmModal=!1,["prevent"]))}," Cancel "),t("button",{class:"btn confirm-btn",onClick:T},"Confirm")])]),_:1},8,["show"]),c(v,{show:o.downloadModal,"onUpdate:show":e[6]||(e[6]=n=>o.downloadModal=n),class:"download-modal"},{default:r(()=>[yt,Mt]),_:1},8,["show"])])}}};export{Tt as default};
