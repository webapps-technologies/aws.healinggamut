import{u as de,q as re,c as p,z as R,r as ue,y as V,n as ve,a as S,o as a,b as n,d as e,e as b,t as c,j as D,h,v as g,A as E,F as L,k as G,g as N,i as v,w as W,l as me,B as _e}from"./index-477b0694.js";import{_ as he}from"./calender-9d47370a.js";const pe={class:"apt-slot-card"},fe={class:"card-header"},be={class:"left-card-header"},De={class:"icon"},ke=e("h3",null,"Clinic Appointment",-1),ye=e("div",{class:"right-card-header f-w-bold"},null,-1),Se={class:"card-body clinic-apointemt"},ge={class:"clinic-info"},Ce={class:"about"},Ve={class:"rate-row"},Ne={class:"name"},Ae={class:"rating"},we={class:"text"},Ee={class:"date-input"},Pe=["min"],Te=e("div",{class:"icon"},[e("img",{src:he,alt:""})],-1),Fe={key:0,class:"card-body"},Me={class:"card total-card"},Oe=e("div",{class:"card-header"},"Price Details",-1),xe={class:"card-body"},Ye={class:"price"},Ie=e("div",{class:"title"},"Doctor Fee",-1),Ue={class:"val"},Re={class:"price"},Le=e("div",{class:"title"},"Studio Clinic Fee",-1),Ge={class:"val"},$e={class:"price"},He=e("div",{class:"title"},"Platform Fee",-1),Be={class:"val"},ze=me('<div class="price"><div class="title">Payment Gateway Charge</div><div class="val text-green">₹15.00</div></div><div class="price"><div class="title">Discount</div><div class="val text-green">₹0.00</div></div>',2),qe={class:"price total f-w-bold"},je=e("div",{class:"title"},"Total Amount",-1),Ke={class:"val"},We=e("div",{class:"save text-green f-w-bold"}," You will save ₹0 on this order ",-1),Je={class:"clinic-info"},Qe={class:"about"},Xe={class:"rate-row"},Ze={class:"name"},et={class:"rating"},tt={class:"text"},st={class:"slot-section"},ot={class:"flex align-center gap-5 mb-10"},lt={class:"locker"},it={class:"radio-btns"},at={class:"radio"},nt={class:"label"},ct={class:"radio"},dt={class:"label"},rt={class:"slot-header"},ut=e("h4",null,"Slot:",-1),vt={class:"card-container"},mt=["onClick"],_t={class:"day"},ht={class:"date"},pt={class:"slot-status"},ft={key:0,class:"text text-green f-w-bold"},bt={key:1,class:"text text-red f-w-bold"},Dt={class:"slot-body"},kt=e("div",{class:"heading-slot"},"Available Slot :",-1),yt={class:"mb-16"},St={class:"book-slots"},gt=["for","onClick"],Ct=["id","value"],Vt={key:1,class:"time"},Nt={key:0,class:"online"},At={key:1,class:"offline"},wt={key:2,class:"hospital"},Et={key:2,class:"time"},Pt=e("div",{class:"not-online"},"Not Available",-1),Tt=[Pt],Ft={key:0,class:"mb-16"},Mt={class:"book-slots"},Ot=["for"],xt=["id","value","onChange"],Yt={class:"time-slot"},It={key:1,class:"mb-16"},Ut={class:"book-btn"},Rt=e("div",{class:"title",showHeader:"true"},"Patient Detail",-1),Lt={action:"",class:"form"},Gt={class:"form-Container"},$t={class:"tow-row"},Ht={class:"form-item mb-16"},Bt=e("div",{class:"title"},"First Name",-1),zt={key:0,class:"err-msg"},qt={class:"form-item mb-16"},jt=e("div",{class:"title"},"Last Name",-1),Kt={key:0,class:"err-msg"},Wt={class:"tow-row"},Jt={class:"form-item mb-16"},Qt=e("div",{class:"title"},"Phone",-1),Xt={key:0,class:"err-msg"},Zt={class:"form-item mb-16"},es=e("div",{class:"title"},"Email",-1),ts={key:0,class:"err-msg"},ss={class:"tow-row"},os={class:"form-item mb-16"},ls=e("div",{class:"title"},"Gender",-1),is={key:0,class:"err-msg"},as={class:"form-item mb-16"},ns=e("div",{class:"title"},"Dob",-1),cs=["max"],ds={key:0,class:"err-msg"},rs={class:"save-btn"},_s={__name:"ClinicSlot",setup(us){const u=de(),P=re(),d=p(()=>u.state.Clinic),i=p(()=>u.state.Doctor),C=p(()=>u.state.Hospital),k=R(null),A=R(null),J=R(null),$=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],t=ue({limit:12,offset:0,keyword:"",type:"DOCTOR",submit:!1,clinicId:null,scheduleOn:V().format("YYYY-MM-DD"),id:null,doctorFees:0,verificationModal:!1,timePicker:"00:00",timePickerStatus:!1,lockerStatus:null,firstName:null,lastName:null,patientGender:$[0].id,contactNumber:null,email:null,dob:null});ve(()=>{P.query.id&&(t.id=P.query.id,i.value.selectDR=!1,i.value.doctorSchedule=[],d.value.selectedDate=[],C.value.slotTimeData=[],X(P.query.id),Q(t.limit,t.offset,t.keyword,t.type))});function Q(l,o,_,m){u.dispatch("Doctor/getAllDoctor",{limit:l,offset:o,keyword:_,type:m,rating:"",price:""})}function X(l){d.value.slotTimeData=[],u.dispatch("Clinic/getClinicDetails",{id:l})}function Z(){var l;if(!localStorage.getItem("userId"))return router.push({path:"/login"});if(i.value.selectDR&&!t.lockerStatus)return u.dispatch("Alert/error",{msg:"Please Select Locker status"}),null;if(i.value.selectDR&&((l=C.value.slotTimeData)==null?void 0:l.length)>0&&!t.timePickerStatus&&!A.value)return u.dispatch("Alert/error",{msg:"Please Select Time"}),null;if(i.value.selectDR&&k.value<0||k.value===null)return u.dispatch("Alert/error",{msg:"Please Select Slot"}),null;if(t.timePickerStatus&&t.timePicker=="00:00")return u.dispatch("Alert/error",{msg:"Please Select Time!"});t.verificationModal=!0}function ee(){var f;if(F.value||T.value||M.value||O.value||x.value||Y.value)return t.submit=!0,null;t.submit=!1;const l=t.scheduleOn+"T"+t.timePicker,o=t.scheduleOn+"T"+A.value,_=I(i.value.doctorDetails.fees,d.value.price),m={scheduleOn:t.timePickerStatus?l:o,scheduleFor:null,type:"STUDIO CLINIC",appointmentFor:"Studio Clinic Appointment",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,patientDetailId:null,patientDetail:{firstName:t.firstName,lastName:t.lastName,dob:t.dob,gender:t.patientGender,mobile:t.contactNumber,email:t.email},franchiseId:d.value.id,pid:null,doctorDetailId:(f=i.value.doctorDetails)==null?void 0:f.id,labtest:[],doctorFees:i.value.doctorDetails.fees,hospitalFees:_,commission:i.value.doctorDetails.fees*(i.value.doctorDetails.commission/100),gst:0,discount:0,lockerStatus:t.lockerStatus,slotId:null};u.dispatch("Appointments/bookAppointments",m)}function te(){return J.value=null,d.value.selectedDate=[],C.value.slotTimeData=[],u.commit("Clinic/SET_CLINIC_SCHEDULE",t.scheduleOn)}const se=(l,o,_,m)=>{t.scheduleOn=m,C.value.slotTimeData=[],o?(d.value.selectedItem=l,d.value.selectedDate=_):(d.value.selectedItem=null,k.value=null,d.value.selectedDate=[])};function w(l){if(l){var o=V(l,"HH:mm:ss").format("hh:mm A");return o}}function oe(l){if(l){var o=V(l).format("MMM Do YYYY");return o}}function le(l,o){var _,m,f;if(k.value=o,l.online){t.timePickerStatus=!1,t.doctorFees=(_=i.value.doctorDetails)==null?void 0:_.fees;const U=V(t.calendarDate).format("YYYY-MM-DD");return u.dispatch("Hospital/getSlotTime",{currentDate:U,periodId:l.id})}l.offline?(t.doctorFees=(m=i.value.doctorDetails)==null?void 0:m.offlineFees,t.timePickerStatus=!0):l.clinicVisitStatus?(t.timePickerStatus=!0,t.doctorFees=(f=i.value.doctorDetails)==null?void 0:f.studioClinicFees):t.timePickerStatus=!1}const T=p(()=>{if(!t.dob)return"Select DOB!"}),F=p(()=>{if(!t.firstName)return"Enter first name!"}),M=p(()=>{if(!t.lastName)return"Enter last name!"}),O=p(()=>{if(!t.contactNumber)return"Enter phone number"}),x=p(()=>{if(!t.patientGender)return"Select Gender!"}),Y=p(()=>{let l=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(t.email){if(!l.test(t.email))return"Please enter valid email!"}else return"Please enter your email!"});function H(){return V().format("YYYY-MM-DD")}function ie(l){let o=String.fromCharCode(l.keyCode);if(/^[0-9]+$/.test(o))return!0;l.preventDefault()}function I(l,o){return(l*(o/100)).toFixed(2)}function ae(){return(i.value.doctorDetails.fees+15+i.value.doctorDetails.fees*(d.value.price/100)+i.value.doctorDetails.fees*(i.value.doctorDetails.commission/100)).toFixed(2)}return(l,o)=>{var B,z,q,j,K;const _=S("icon-doctor"),m=S("icon-star"),f=S("time-picker"),U=S("icon-cross"),ne=S("Select"),ce=S("Modal");return a(),n("section",pe,[e("div",fe,[e("div",be,[e("div",De,[b(_)]),ke]),ye]),e("div",Se,[e("div",ge,[e("div",Ce,[e("div",Ve,[e("h3",Ne,c(d.value.name),1),e("div",Ae,[b(m),D(" "+c((B=d.value.rating)==null?void 0:B.toFixed(1)),1)])]),e("div",we,c(d.value.address),1)]),e("div",Ee,[h(e("input",{type:"date","onUpdate:modelValue":o[0]||(o[0]=s=>t.scheduleOn=s),min:H(),onChange:te},null,40,Pe),[[g,t.scheduleOn]]),Te])])]),i.value.selectDR?(a(),n("div",Fe,[e("div",Me,[Oe,e("div",xe,[e("div",Ye,[Ie,e("div",Ue," ₹"+c(i.value.doctorDetails.fees.toFixed(2)),1)]),e("div",Re,[Le,e("div",Ge," ₹"+c(I(i.value.doctorDetails.fees,d.value.price)),1)]),e("div",$e,[He,e("div",Be," ₹"+c(I(i.value.doctorDetails.fees,i.value.doctorDetails.commission)),1)]),ze,e("div",qe,[je,e("div",Ke,c(ae()),1)]),We])]),e("div",Je,[e("div",Qe,[e("div",Xe,[e("h3",Ze,c((z=i.value.doctorDetails)==null?void 0:z.name),1),e("div",et,[b(m),D(" "+c((j=(q=i.value.doctorDetails)==null?void 0:q.rating)==null?void 0:j.toFixed(1)),1)])]),e("div",tt,c((K=i.value.doctorDetails)==null?void 0:K.address),1)])]),e("div",st,[e("div",ot,[D(" Appointment on "),e("strong",null,c(oe(t.scheduleOn)),1)]),e("div",lt,[D(" Share Your Health Locker "),e("div",it,[e("div",at,[e("label",nt,[h(e("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":o[1]||(o[1]=s=>t.lockerStatus=s),value:"YES"},null,512),[[E,t.lockerStatus]]),D(" YES ")])]),e("div",ct,[e("label",dt,[h(e("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":o[2]||(o[2]=s=>t.lockerStatus=s),value:"NO"},null,512),[[E,t.lockerStatus]]),D(" NO ")])])])]),e("div",rt,[ut,e("div",vt,[(a(!0),n(L,null,G(i.value.doctorSchedule,(s,r)=>(a(),n("div",{class:_e(["slot-card",{active:d.value.selectedItem==r}]),key:r,onClick:N(y=>se(r,s.status,s.period,s.date),["prevent"])},[e("div",_t,c(s.name),1),e("div",ht,c(s.date),1),e("div",pt,[s.status?(a(),n("span",ft,"Slots Available")):(a(),n("span",bt,"Slot Not Available"))])],10,mt))),128))])]),e("div",Dt,[kt,e("div",yt,[e("div",St,[(a(!0),n(L,null,G(d.value.selectedDate,(s,r)=>(a(),n("div",{class:"slot-item",key:r},[w(s.time_start)?(a(),n("label",{key:0,for:`input-${r}`,onClick:N(y=>le(s,r),["prevent"])},[s.online||s.offline||s.clinicVisitStatus?h((a(),n("input",{key:0,type:"radio",id:`input-${r}`,name:"slot","onUpdate:modelValue":o[3]||(o[3]=y=>k.value=y),value:r},null,8,Ct)),[[E,k.value]]):v("",!0),s.clinicVisitStatus||s.online||s.offline?(a(),n("div",Vt,[D(c(w(s.time_start))+" - "+c(w(s.time_end))+" ",1),s.online?(a(),n("div",Nt," Online Consultancy Available ")):v("",!0),s.offline?(a(),n("div",At," Offline Consultancy Available ")):v("",!0),s.clinicVisitStatus?(a(),n("div",wt," Clinic Studio Consultancy Available ")):v("",!0)])):(a(),n("div",Et,Tt))],8,gt)):v("",!0)]))),128))])]),t.timePickerStatus?(a(),n("div",It,[b(f,{modelValue:t.timePicker,"onUpdate:modelValue":o[5]||(o[5]=s=>t.timePicker=s)},null,8,["modelValue"])])):(a(),n("div",Ft,[e("div",Mt,[(a(!0),n(L,null,G(C.value.slotTimeData,(s,r)=>(a(),n("div",{class:"slot-item-time",key:r},[e("label",{for:`inputs-${r}`},[h(e("input",{type:"radio",id:`inputs-${r}`,name:"slotTime","onUpdate:modelValue":o[4]||(o[4]=y=>A.value=y),value:s.time,onChange:y=>t.slotId=s.id},null,40,xt),[[E,A.value]]),e("div",Yt,c(w(s.time)),1)],8,Ot)]))),128))])])),e("div",Ut,[e("button",{type:"button",class:"btn primary-btn w-10-r",onClick:N(Z,["prevent"])}," Book ")])])])])):v("",!0),b(ce,{show:t.verificationModal,"onUpdate:show":o[14]||(o[14]=s=>t.verificationModal=s),class:"details-modal",headerClasses:"header-bg"},{header:W(()=>[Rt,e("div",{class:"close-btn",onClick:o[6]||(o[6]=N(s=>t.verificationModal=!1,["prevent"]))},[b(U)])]),default:W(()=>[e("form",Lt,[e("div",Gt,[e("div",$t,[e("div",Ht,[Bt,h(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>t.firstName=s),placeholder:"Enter First Name",maxlength:"20"},null,512),[[g,t.firstName]]),t.submit&&F.value?(a(),n("div",zt,c(F.value),1)):v("",!0)]),e("div",qt,[jt,h(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>t.lastName=s),placeholder:"Enter Last Name",maxlength:"20"},null,512),[[g,t.lastName]]),t.submit&&M.value?(a(),n("div",Kt,c(M.value),1)):v("",!0)])]),e("div",Wt,[e("div",Jt,[Qt,h(e("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=s=>t.contactNumber=s),placeholder:"Enter Phone",onKeypress:o[10]||(o[10]=s=>ie(s)),maxlength:"10"},null,544),[[g,t.contactNumber]]),t.submit&&O.value?(a(),n("div",Xt,c(O.value),1)):v("",!0)]),e("div",Zt,[es,h(e("input",{type:"text","onUpdate:modelValue":o[11]||(o[11]=s=>t.email=s),placeholder:"Enter Email"},null,512),[[g,t.email]]),t.submit&&Y.value?(a(),n("div",ts,c(Y.value),1)):v("",!0)])]),e("div",ss,[e("div",os,[ls,b(ne,{modelValue:t.patientGender,"onUpdate:modelValue":o[12]||(o[12]=s=>t.patientGender=s),options:$,placeholder:"Select Gender"},null,8,["modelValue"]),t.submit&&x.value?(a(),n("div",is,c(x.value),1)):v("",!0)]),e("div",as,[ns,h(e("input",{type:"date","onUpdate:modelValue":o[13]||(o[13]=s=>t.dob=s),max:H(),placeholder:"Enter Age"},null,8,cs),[[g,t.dob]]),t.submit&&T.value?(a(),n("div",ds,c(T.value),1)):v("",!0)])])]),e("div",rs,[e("button",{type:"button",class:"btn primary-btn",onClick:N(ee,["prevent"])}," Submit ")])])]),_:1},8,["show"])])}}};export{_s as default};
