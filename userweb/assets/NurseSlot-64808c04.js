import{u as de,q as ce,m as re,c as p,z as A,r as ue,y as b,n as me,a as k,o as a,b as i,d as e,e as f,t as d,j as U,h as v,v as y,F as C,k as G,g as S,w as z,l as ve,B as _e,A as q,i as m}from"./index-477b0694.js";import{_ as he}from"./calender-9d47370a.js";const pe={class:"apt-slot-card"},fe={class:"card-header"},be={class:"left-card-header"},ke={class:"icon"},ye=e("h3",null,"Nurse Appointment",-1),ge={class:"right-card-header f-w-bold"},De={class:"card-body"},Se={class:"clinic-info"},Ne={class:"about"},Pe={class:"rate-row"},Ve={class:"name"},Me={class:"rating"},Te={class:"text"},Ae={class:"clinic-option"},Ce={class:"date-input"},Ee=["min"],we=e("div",{class:"icon"},[e("img",{src:he,alt:""})],-1),Fe={class:"card total-card"},Oe=e("div",{class:"card-header"},"Price Details",-1),Ye={class:"card-body"},Ie={class:"price"},xe=e("div",{class:"title"},"Doctor Fee",-1),Le={class:"val"},Ue={class:"price"},Ge=e("div",{class:"title"},"Platform Fee",-1),$e={class:"val"},Re=ve('<div class="price"><div class="title">Payment Gateway Charge</div><div class="val text-green">₹15.00</div></div><div class="price"><div class="title">Discount</div><div class="val text-green">₹0.00</div></div>',2),Be={class:"price total f-w-bold"},He=e("div",{class:"title"},"Total Amount",-1),ze={class:"val"},qe=e("div",{class:"save text-green f-w-bold"}," You will save ₹0 on this order ",-1),je={class:"slot-section"},Ke={class:"mb-10"},We={class:"slot-header"},Je={class:"card-container"},Qe=["onClick"],Xe={class:"day"},Ze={class:"date"},et={class:"slot-status"},tt={key:0,class:"text text-green f-w-bold"},st={key:1,class:"text text-red f-w-bold"},ot={class:"slot-body"},lt=e("div",{class:"heading-slot"},"Available Slot :",-1),at={class:"mb-16"},it={class:"book-slots"},nt=["for","onClick"],dt=["id","value"],ct={key:1,class:"time"},rt={key:0,class:"online"},ut={key:1,class:"offline"},mt={key:2,class:"hospital"},vt={key:2,class:"time"},_t=e("div",{class:"not-online"},"Not Available",-1),ht=[_t],pt={key:0,class:"mb-16"},ft={class:"book-slots"},bt=["for"],kt=["id","value","onChange"],yt={class:"time-slot"},gt={key:1,class:"mb-16 flex justify-space"},Dt=e("div",{class:"title"},"Start Time",-1),St=e("div",{class:"title"},"End Time",-1),Nt={class:"book-btn"},Pt=e("div",{class:"title",showHeader:"true"},"Patient Detail",-1),Vt={action:"",class:"form"},Mt={class:"form-Container"},Tt={class:"tow-row"},At={class:"form-item mb-16"},Ct=e("div",{class:"title"},"First Name",-1),Et={key:0,class:"err-msg"},wt={class:"form-item mb-16"},Ft=e("div",{class:"title"},"Last Name",-1),Ot={key:0,class:"err-msg"},Yt={class:"tow-row"},It={class:"form-item mb-16"},xt=e("div",{class:"title"},"Phone",-1),Lt={key:0,class:"err-msg"},Ut={class:"form-item mb-16"},Gt=e("div",{class:"title"},"Email",-1),$t={key:0,class:"err-msg"},Rt={class:"tow-row"},Bt={class:"form-item mb-16"},Ht=e("div",{class:"title"},"Dob",-1),zt=["max"],qt={key:0,class:"err-msg"},jt={class:"form-item mb-16"},Kt=e("div",{class:"title"},"Gender",-1),Wt={key:0,class:"err-msg"},Jt={class:"save-btn"},ts={__name:"NurseSlot",setup(Qt){const r=de(),$=ce(),j=re(),n=p(()=>r.state.Doctor),N=A([]),P=A(null),_=A(null),g=A(null),K=[{id:"ONLINE",name:"ONLINE"},{id:"OFFLINE",name:"OFFLINE"}],E=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],t=ue({clinic:null,id:null,submit:!1,calendarDate:b().format("YYYY-MM-DD"),weekday:null,lockerStatus:"NO",type:K[0],slotTime:null,timePickerStatus:!1,patientModal:!1,scheduleOn:b().format("YYYY-MM-DD"),timePicker:"00:00:00",end_time:"00:00:00",firstName:null,lastName:null,patientGender:E[0].id,contactNumber:null,email:null,dob:null,slotId:null});me(()=>{$.query.id&&W($.query.id)});function W(l){n.value.slotTimeData=[],r.dispatch("Doctor/getDoctorDetails",{id:l})}function w(l){if(l){var o=b(l,"HH:mm:ss").format("hh:mm A");return o}}function J(l){if(l){var o=b(l).format("MMM Do YYYY");return o}}function Q(){return N.value=[],P.value=null,n.value.slotTimeData=[],r.commit("Doctor/SET_DOCTOR_SCHEDULE",t.calendarDate)}function X(l,o){_.value=o,t.timePickerStatus=!0;const h=b(t.calendarDate).format("YYYY-MM-DD");return r.dispatch("Doctor/getSlotTime",{currentDate:h,periodId:l.id})}function Z(){var l;if(!localStorage.getItem("userId"))return j.push({path:"/login"});if(P.value==null)return r.dispatch("Alert/error",{msg:"Please Select Day Slot"});if(_.value!==null&&_.value>=0){if(((l=n.value.slotTimeData)==null?void 0:l.length)>0&&!t.timePickerStatus&&!g.value)return r.dispatch("Alert/error",{msg:"Please Select Time"})}else return r.dispatch("Alert/error",{msg:"Please Select Time Slot"});t.patientModal=!0}async function ee(){var l;if(t.timePickerStatus&&t.timePicker=="00:00")return r.dispatch("Alert/error",{msg:"Please Select Time!"});if(!t.lockerStatus)return r.dispatch("Alert/error",{msg:"Please Select Locker status"});if(_.value>=0){let T=function(u){let le=Math.floor(u/864e5),ae=Math.floor(u%(1e3*60*60*24)/(1e3*60*60)),ie=Math.floor(u%(1e3*60*60)/(1e3*60)),ne=Math.floor(u%(1e3*60)/1e3);return{days:le,hours:ae,minutes:ie,seconds:ne}};if(((l=n.value.slotTimeData)==null?void 0:l.length)>0&&!t.timePickerStatus&&!g.value)return r.dispatch("Alert/error",{msg:"Please Select Time"});if(F.value||O.value||Y.value||x.value||I.value||L.value)return t.submit=!0,null;t.submit=!1;const o=t.scheduleOn+"T"+t.timePicker,h=t.scheduleOn+"T"+t.end_time,D=t.scheduleOn+"T"+g.value;let V=new Date(o),M=new Date(h)-V;const s={scheduleOn:t.timePickerStatus?o:D,scheduleFor:null,type:t.timePickerStatus?"OFFLINE":"ONLINE",appointmentFor:"Nurse Appointment",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,patientDetailId:null,franchiseId:null,pid:null,doctorDetailId:null,patientDetail:{firstName:t.firstName,lastName:t.lastName,dob:t.dob,gender:t.patientGender,mobile:t.contactNumber,email:t.email},labtest:[],doctorFees:+n.value.fees,hospitalFees:0,commission:B(n.value.fees,n.value.commission),gst:0,discount:0,totalHours:T(M).hours<=0?1:T(M).hours,lockerStatus:t.lockerStatus,doctorDetailId:n.value.id,slotId:t.timePickerStatus?null:t.slotId};(await r.dispatch("Appointments/bookAppointments",s)).status===201&&(t.firstName=null,t.lastName=null,t.patientGender=E[0].id,t.contactNumber=null,t.email=null,t.dob=null,t.timePicker="00:00",t.patientModal=!1)}else return r.dispatch("Alert/error",{msg:"Please Select Slot"})}function R(){return b().format("YYYY-MM-DD")}const te=(l,o,h,D)=>{t.scheduleOn=D,n.value.slotTimeData=[],_.value=null,o?(P.value=l,N.value=h):N.value=[]},F=p(()=>{if(!t.firstName)return"Please enter first name"}),O=p(()=>{if(!t.lastName)return"Please enter last name"}),Y=p(()=>{if(!t.dob)return"Please enter age"}),I=p(()=>{if(!t.patientGender)return"Please select gender"}),x=p(()=>{if(!t.contactNumber)return"Please enter phone no"}),L=p(()=>{let l=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(t.email){if(!l.test(t.email))return"Please enter valid email!"}else return"Please enter email!"});function se(l){let o=String.fromCharCode(l.keyCode);if(/^[0-9]+$/.test(o))return!0;l.preventDefault()}function B(l,o){return(l*(o/100)).toFixed(2)}function oe(){return(n.value.fees+15+n.value.fees*(n.value.commission/100)).toFixed(2)}return(l,o)=>{const h=k("icon-doctor"),D=k("icon-star"),V=k("time-picker"),H=k("icon-cross"),M=k("Select"),T=k("Modal");return a(),i(C,null,[e("section",pe,[e("div",fe,[e("div",be,[e("div",ke,[f(h)]),ye]),e("div",ge,"₹"+d(n.value.fees)+" Fee",1)]),e("div",De,[e("div",Se,[e("div",Ne,[e("div",Pe,[e("h3",Ve,d(n.value.name),1),e("div",Me,[f(D),U(" "+d(n.value.rating),1)])]),e("div",Te,d(n.value.address),1)]),e("div",Ae,[e("div",Ce,[v(e("input",{type:"date","onUpdate:modelValue":o[0]||(o[0]=s=>t.calendarDate=s),min:R(),onChange:Q},null,40,Ee),[[y,t.calendarDate]]),we])])]),e("div",Fe,[Oe,e("div",Ye,[e("div",Ie,[xe,e("div",Le,"₹"+d(n.value.fees.toFixed(2)),1)]),e("div",Ue,[Ge,e("div",$e," ₹"+d(B(n.value.fees,n.value.commission)),1)]),Re,e("div",Be,[He,e("div",ze,d(oe()),1)]),qe])]),e("div",je,[e("div",Ke,[U(" Appointment on "),e("strong",null,d(J(t.scheduleOn)),1)]),e("div",We,[e("div",Je,[(a(!0),i(C,null,G(n.value.doctorSchedule,(s,c)=>(a(),i("div",{class:_e(["slot-card",{active:P.value==c}]),key:c,onClick:S(u=>te(c,s.status,s.period,s.date),["prevent"])},[e("div",Xe,d(s.name),1),e("div",Ze,d(s.date),1),e("div",et,[s.status?(a(),i("span",tt,"Slots Available")):(a(),i("span",st,"Slot Not Available"))])],10,Qe))),128))])]),e("div",ot,[lt,e("div",at,[e("div",it,[(a(!0),i(C,null,G(N.value,(s,c)=>(a(),i("div",{class:"slot-item",key:c},[e("label",{for:`input-${c}`,onClick:S(u=>X(s,c),["prevent"])},[s.online||s.offline||s.clinicVisitStatus?v((a(),i("input",{key:0,type:"radio",id:`input-${c}`,name:"slot","onUpdate:modelValue":o[1]||(o[1]=u=>_.value=u),value:c},null,8,dt)),[[q,_.value]]):m("",!0),s.clinicVisitStatus||s.online||s.offline?(a(),i("div",ct,[U(d(w(s.time_start))+" - "+d(w(s.time_end))+" ",1),s.online?(a(),i("div",rt," Online Consultancy Available ")):m("",!0),s.offline?(a(),i("div",ut," Consultancy Available ")):m("",!0),s.clinicVisitStatus?(a(),i("div",mt," Clinic Studio Consultancy Available ")):m("",!0)])):(a(),i("div",vt,ht))],8,nt)]))),128))])]),t.timePickerStatus?(a(),i("div",gt,[e("div",null,[Dt,f(V,{modelValue:t.timePicker,"onUpdate:modelValue":o[3]||(o[3]=s=>t.timePicker=s)},null,8,["modelValue"])]),e("div",null,[St,f(V,{modelValue:t.end_time,"onUpdate:modelValue":o[4]||(o[4]=s=>t.end_time=s)},null,8,["modelValue"])])])):(a(),i("div",pt,[e("div",ft,[(a(!0),i(C,null,G(n.value.slotTimeData,(s,c)=>(a(),i("div",{class:"slot-item-time",key:c},[e("label",{for:`inputs-${c}`},[v(e("input",{type:"radio",id:`inputs-${c}`,name:"slotTime","onUpdate:modelValue":o[2]||(o[2]=u=>g.value=u),value:s.time,onChange:u=>t.slotId=s.id},null,40,kt),[[q,g.value]]),e("div",yt,d(w(s.time)),1)],8,bt)]))),128))])])),e("div",Nt,[e("button",{type:"button",class:"btn primary-btn w-10-r",onClick:S(Z,["prevent"])}," Book ")])])])])]),f(T,{show:t.patientModal,"onUpdate:show":o[13]||(o[13]=s=>t.patientModal=s),class:"details-modal",headerClasses:"header-bg"},{header:z(()=>[Pt,e("div",{class:"close-btn",onClick:o[5]||(o[5]=S(s=>t.patientModal=!1,["prevent"]))},[f(H)])]),default:z(()=>[e("form",Vt,[e("div",Mt,[e("div",Tt,[e("div",At,[Ct,v(e("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=s=>t.firstName=s),placeholder:"Enter First Name",maxlength:"20"},null,512),[[y,t.firstName]]),t.submit&&F.value?(a(),i("div",Et,d(F.value),1)):m("",!0)]),e("div",wt,[Ft,v(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>t.lastName=s),placeholder:"Enter Last Name",maxlength:"20"},null,512),[[y,t.lastName]]),t.submit&&O.value?(a(),i("div",Ot,d(O.value),1)):m("",!0)])]),e("div",Yt,[e("div",It,[xt,v(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>t.contactNumber=s),placeholder:"Enter Phone",onKeypress:o[9]||(o[9]=s=>se(s)),maxlength:"10"},null,544),[[y,t.contactNumber]]),t.submit&&x.value?(a(),i("div",Lt,d(x.value),1)):m("",!0)]),e("div",Ut,[Gt,v(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=s=>t.email=s),placeholder:"Enter Email"},null,512),[[y,t.email]]),t.submit&&L.value?(a(),i("div",$t,d(L.value),1)):m("",!0)])]),e("div",Rt,[e("div",Bt,[Ht,v(e("input",{type:"date","onUpdate:modelValue":o[11]||(o[11]=s=>t.dob=s),placeholder:"Enter Age",max:R()},null,8,zt),[[y,t.dob]]),t.submit&&Y.value?(a(),i("div",qt,d(Y.value),1)):m("",!0)]),e("div",jt,[Kt,f(M,{modelValue:t.patientGender,"onUpdate:modelValue":o[12]||(o[12]=s=>t.patientGender=s),options:E,placeholder:"Select Gender"},null,8,["modelValue"]),t.submit&&I.value?(a(),i("div",Wt,d(I.value),1)):m("",!0)])])]),e("div",Jt,[e("button",{type:"button",class:"btn primary-btn",onClick:S(ee,["prevent"])}," Submit ")])])]),_:1},8,["show"])],64)}}};export{ts as default};
