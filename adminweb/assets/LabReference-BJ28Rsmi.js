import{e as j,c as P,z as J,j as u,k as i,l as d,m as o,A as n,H as c,B as k,y as l,q as C,M as K,u as M,F as G,I as Q,E as w,x as p,t as V,J as A}from"./@vue-bQO0P59g.js";import{C as W,E as X,S as Y}from"./@mdi-CZk6uuAL.js";import{u as Z}from"./vuex-DHdsu8jA.js";import{u as ee}from"./vue-router-D5J0r3Gc.js";import"./export-from-json-BvevaQwb.js";const te={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},le=l("option",{value:!0},"Active",-1),ae=l("option",{value:!1},"Inactive",-1),oe=[le,ae],se={class:"grid grid-cols-1 lg:grid-cols-1 gap-6 new-table"},ne={class:"mt-3 px-6 table-sec"},ie={key:0},re=l("thead",null,[l("tr",null,[l("th",null,"Sl.No."),l("th",null,"Name"),l("th",null,"Status"),l("th",{class:"text-center"},"Actions")])],-1),de={"data-label":"Sr.No"},ue={"data-label":"Name"},ce={key:0,"data-label":"Status",class:"text-green-500 font-bold"},fe={key:1,"data-label":"Status",class:"text-rose-500 font-bold"},me={class:"actions-cell"},pe={key:0,class:"flex justify-center items-center"},ge=l("div",{class:"spinner-dual-ring"},[l("div",{class:"ldio"},[l("div"),l("div",null,[l("div")])])],-1),be=[ge],_e={key:0},he={class:"flex justify-center"},ve={class:"form-check flex items-center"},ye={class:"form-check-label inline-block items-center text-gray-800 cursor-pointer dark:text-slate-300 mr-2"},ke={class:"form-check form-check-inline"},Ce={class:"form-check-label inline-block items-center text-gray-800 cursor-pointer dark:text-slate-300 mr-2"},Me={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},Ve={class:"absolute flex justify-center items-center gap-2"},xe=["src"],Ie={key:1,class:"text-center text-neutral-400 font-bold"},Ee={__name:"LabReference",setup(Le){const f=Z();ee();const r=j(()=>f.state.LabReference),e=P({submit:!1,limit:10,offset:0,search:"",status:!0,statusChange:!0,editMode:!1,cModal:!1,id:null,name:null,statusModal:!1,imgModal:!1,logoImage:null,logoFile:null,featured:!0});J(()=>{g(e.limit,e.offset,e.search,e.status)});function g(s,t,m,b){f.dispatch("LabReference/all",{limit:s,offset:t,search:m,status:b})}function E(){e.offset=e.offset+e.limit,g(e.limit,e.offset,e.search,e.status)}function U(){if(e.search){let s=r.value.data.filter(t=>t.label.includes(e.search));r.value.data=s}}function N(s){if(s.length>1){let t=r.value.data.filter(m=>m.label.includes(s));r.value.data=t}else s.length<=0&&g(e.limit,e.offset,e.search,e.status)}function T(){g(e.limit,0,e.search,e.statusChange)}function D(){e.cModal=!0,e.editMode=!1,e.id=null,e.name=null,e.name_hn=null,e.name_bn=null}function $(s,t){e.cModal=!0,e.editMode=!0,e.id=s,e.name=t}async function F(){if(v.value)return e.submit=!0,null;e.submit=!1,e.editMode?(await f.dispatch("LabReference/update",{id:e.id,label:e.name,status:"ACTIVE"}),e.cModal=!1):(await f.dispatch("LabReference/save",{label:e.name,status:"ACTIVE"}),e.cModal=!1),g(e.limit,e.offset,e.search,e.status),e.cModal=!1}function B(s,t){e.statusModal=!0,e.id=s,e.status=t,e.featured=t}function z(){e.id&&f.dispatch("LabReference/setStatus",{id:e.id,status:e.status,featured:e.featured}),e.statusModal=!1}async function q(s){if(s){const t=await s.target;if(t.files[0].type==="image/png"||t.files[0].type==="image/jpg"||t.files[0].type==="image/jpeg")if(t.files[0].size<=1e6){if(t.files){const m=new FileReader;m.onload=b=>{e.logoImage=b.target.result},e.logoFile=t.files[0],m.readAsDataURL(t.files[0])}}else f.dispatch("Alert/error",{msg:"Image too big (max 1 Mb allowed)"});else f.dispatch("Alert/error",{msg:"Upload image in png format."})}}function H(){e.logoFile&&f.dispatch("LabReference/updateLogo",{id:e.id,file:e.logoFile}),g(e.limit,e.offset,e.search,e.status),e.imgModal=!1}const v=j(()=>e.name?null:"Required.");return(s,t)=>{const m=u("hero-bar"),b=u("control"),x=u("field"),_=u("base-button"),I=u("main-section"),L=u("base-button-rounded"),h=u("base-buttons"),R=u("card-component"),y=u("modal-box");return i(),d("section",null,[o(m,null,{default:n(()=>[k("Lab Department")]),_:1}),o(I,null,{default:n(()=>[l("div",te,[o(b,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=a=>e.search=a),type:"text",onKeyup:t[1]||(t[1]=a=>N(a.target.value)),placeholder:"Search by : Name"},null,8,["modelValue"]),o(x,null,{default:n(()=>[C(l("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.statusChange=a),onChange:t[3]||(t[3]=a=>T()),class:"form-select appearance-none block w-full px-3 py-2 h-10 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-dark-700 focus:bg-white focus:border-blue-600 focus:outline-none"},oe,544),[[K,e.statusChange]])]),_:1}),o(_,{class:"h-10",type:"button",color:"themeColor",small:"",label:"Search",onClick:t[4]||(t[4]=c(a=>U(),["prevent"]))})])]),_:1}),o(I,null,{default:n(()=>[l("div",se,[o(R,{class:"mb-6",title:"List",onHeaderIconClicked:t[5]||(t[5]=a=>D()),headerIcon:M(W),iconText:"Add Reference","has-table":""},{default:n(()=>[l("div",ne,[r.value.data.length>0?(i(),d("table",ie,[re,l("tbody",null,[(i(!0),d(G,null,Q(r.value.data,(a,S)=>(i(),d("tr",{key:S},[l("td",de,w(S+1),1),l("td",ue,w(a.label),1),a.status=="ACTIVE"?(i(),d("td",ce,"Active")):(i(),d("td",fe,"Inactive")),l("td",me,[o(h,{type:"justify-start lg:justify-center","no-wrap":""},{default:n(()=>[o(L,{icon:M(X),title:"Change Status",color:"info",onClick:c(O=>B(a.id,a.status),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"]),o(L,{icon:M(Y),title:"Edit Reference",color:"purple",onClick:c(O=>$(a.id,a.label),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])):p("",!0)]),r.value.data.length<=0?(i(),V(R,{key:0,empty:""})):p("",!0)]),_:1},8,["headerIcon"])]),r.value.dataLoader?(i(),d("div",pe,be)):p("",!0),r.value.loadMore&&!r.value.dataLoader?(i(),V(h,{key:1,type:"justify-center lg:justify-center"},{default:n(()=>[o(_,{type:"button",color:"themeColor",label:"Load More",onClick:t[6]||(t[6]=c(a=>E(),["prevent"]))})]),_:1})):p("",!0)]),_:1}),o(y,{modelValue:e.cModal,"onUpdate:modelValue":t[8]||(t[8]=a=>e.cModal=a),title:e.editMode?"Update Reference":"Add Reference",form:"",onSubmit:t[9]||(t[9]=c(a=>s.onSubmit(),["prevent"]))},{default:n(()=>[l("section",null,[o(x,{label:"Name *",class:"mr-2",help:e.submit&&v.value?v.value:""},{default:n(()=>[o(b,{modelValue:e.name,"onUpdate:modelValue":t[7]||(t[7]=a=>e.name=a),type:"text",name:"name",autocomplete:"Name",placeholder:"Reference Name"},null,8,["modelValue"])]),_:1},8,["help"]),o(h,{type:"justify-center lg:justify-center pt-5"},{default:n(()=>[o(_,{type:"button",color:"themeColor",small:"",label:"Submit",onClick:c(F,["prevent"]),effect:""})]),_:1})])]),_:1},8,["modelValue","title"]),o(y,{modelValue:e.statusModal,"onUpdate:modelValue":t[12]||(t[12]=a=>e.statusModal=a),title:"Reference Status"},{default:n(()=>[e.id?(i(),d("section",_e,[l("div",he,[l("div",ve,[l("label",ye,[C(l("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[10]||(t[10]=a=>e.status=a),value:"ACTIVE"},null,512),[[A,e.status]]),k(" ACTIVE")])]),l("div",ke,[l("label",Ce,[C(l("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[11]||(t[11]=a=>e.status=a),value:"DEACTIVE"},null,512),[[A,e.status]]),k(" DEACTIVE")])])]),o(h,{type:"justify-center lg:justify-center pt-5"},{default:n(()=>[r.value.loaderNew?p("",!0):(i(),V(_,{key:0,color:"info",onClick:c(z,["prevent"]),type:"button",label:"Submit",effect:""}))]),_:1})])):p("",!0)]),_:1},8,["modelValue"]),o(y,{modelValue:e.imgModal,"onUpdate:modelValue":t[15]||(t[15]=a=>e.imgModal=a),title:"Update Logo"},{default:n(()=>[l("section",null,[l("div",Me,[l("input",{type:"file",name:"logo",accept:"image/png || image/jpg || image/jpeg",onChange:t[13]||(t[13]=a=>q(a)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),l("div",Ve,[e.logoImage?(i(),d("img",{key:0,class:"h-48 opacity-1",src:e.logoImage},null,8,xe)):p("",!0),e.logoImage?p("",!0):(i(),d("span",Ie,"Upload Logo"))])]),o(h,{type:"justify-center lg:justify-center pt-5"},{default:n(()=>[o(_,{type:"button",color:"danger",small:"",label:"Upload",onClick:c(H,["prevent"])}),o(_,{type:"button",color:"info",small:"",label:"Cancel",onClick:t[14]||(t[14]=c(a=>e.imgModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"])])}}};export{Ee as default};
