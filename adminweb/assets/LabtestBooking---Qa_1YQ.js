import{e as O,c as H,z as q,j as v,k as n,l as f,m as s,A as c,B as _,t as M,y as e,E as a,u as F,F as S,I as j,H as A,x as g}from"./@vue-bQO0P59g.js";import{U as Y,V as J,I as K}from"./@mdi-CZk6uuAL.js";import{u as Q,b as W}from"./vue-router-D5J0r3Gc.js";import{u as X}from"./vuex-DHdsu8jA.js";const Z={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ee={for:"Name",class:"font-semibold text-slate-800 dark:text-white"},te=e("span",{class:"text-slate-400/[0.9]"},"Name : ",-1),le={for:"EMail",class:"font-semibold text-slate-800 dark:text-white"},oe=e("span",{class:"text-slate-400/[0.9]"},"EMail : ",-1),se={for:"Alternative Number",class:"font-semibold text-slate-800 dark:text-white"},ae=e("span",{class:"text-slate-400/[0.9]"},"Alternative Number : ",-1),ne={for:"Gender",class:"font-semibold text-slate-800 dark:text-white"},ie=e("span",{class:"text-slate-400/[0.9]"},"Gender : ",-1),de={for:"Date Of Birth",class:"font-semibold text-slate-800 dark:text-white"},re=e("span",{class:"text-slate-400/[0.9]"},"Date Of Birth : ",-1),ce={for:"Blood Group",class:"font-semibold text-slate-800 dark:text-white"},ue=e("span",{class:"text-slate-400/[0.9]"},"Blood Group : ",-1),_e={for:"Address",class:"font-semibold text-slate-800 dark:text-white"},fe=e("span",{class:"text-slate-400/[0.9]"},"Address : ",-1),pe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},me={class:"w-full overflow-x-scroll mt-3"},he={key:0},be=e("caption",null,null,-1),ge=e("thead",null,[e("tr",null,[e("th",null,"Sl.No."),e("th",null,"Created At"),e("th",{class:"text-center"},"Actions")])],-1),ve={"data-label":"Sr.No"},ye={"data-label":"CreatedAt"},xe={class:"actions-cell"},ke=["href"],De={class:"w-full mt-3"},we={key:0},Ce=e("caption",null,null,-1),Me=e("thead",null,[e("tr",null,[e("th",null,"Sl.No."),e("th",null,"Test"),e("th",null,"Price"),e("th",null,"Discount"),e("th",null,"Total Price"),e("th",null,"Created At")])],-1),Ae={"data-label":"Sr.No"},Te={"data-label":"Title"},Be={"data-label":"Price"},Fe={"data-label":"Discount"},Ne={"data-label":"Discounted Price"},Le={"data-label":"CreatedAt"},Ve={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ie={for:"Day",class:"font-semibold text-slate-800 dark:text-white"},Se=e("span",{class:"text-slate-400/[0.9]"},"Day : ",-1),je={for:"From Time",class:"font-semibold text-slate-800 dark:text-white"},Pe=e("span",{class:"text-slate-400/[0.9]"},"From Time : ",-1),Ue={for:"To Time",class:"font-semibold text-slate-800 dark:text-white"},Ee=e("span",{class:"text-slate-400/[0.9]"},"To Time : ",-1),Re={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},Ge={class:"absolute flex justify-center items-center gap-2"},$e=["src"],ze={key:1,class:"text-center text-neutral-400 font-bold"},Oe={key:0},He=e("div",{class:"flex justify-center"},[e("h5",null,"Are you sure to delete this File?")],-1),We={__name:"LabtestBooking",setup(qe){const k=X();Q();const P=W(),o=O(()=>k.state.Appointment),l=H({fileModel:!1,deleteModal:!1,file:null,fileImage:null,id:null,link:null});q(()=>{U()});function U(i,t,p,d){k.dispatch("Appointment/getOneAppointment",{id:P.query.id})}async function E(i){if(i){const t=await i.target;if(t.files[0].size<=1e6){if(t.files){const p=new FileReader;p.onload=d=>{l.fileImage=d.target.result},l.file=t.files[0],p.readAsDataURL(t.files[0])}}else k.dispatch("ErrorSuccess/error",{msg:"File too big (max 1 Mb allowed)"})}}function R(i){l.deleteModal=!0,l.id=i}function G(){l.id&&(k.dispatch("LabtestBooking/deleteFile",{id:l.id}),l.deleteModal=!1)}function $(){l.file&&(k.dispatch("LabtestBooking/uploadFile",{id:l.id,file:l.file}),l.fileModel=!1)}function N(i){if(i){const d=i.split(":");var t=d[0];if(t>12){var p=t-12;p<10?t="0"+p:t=p}else t==="00"&&(t="12");return d[0]>=12?t+":"+d[1]+" PM":t+":"+d[1]+" AM"}}function z(i){l.fileModel=!0,l.id=i}function L(i){if(i){const t=new Date(i).toString().split(" ");return t[2]+" "+t[1]+", "+t[3]}return"-"}return(i,t)=>{const p=v("hero-bar"),d=v("new-card"),T=v("main-section"),y=v("base-button"),B=v("base-buttons"),V=v("card-component"),I=v("modal-box");return n(),f("section",null,[s(p,null,{default:c(()=>[_("Labtest")]),_:1}),s(T,null,{default:c(()=>{var r;return[o.value?(n(),M(d,{key:0,title:"Patient Detail (PID-"+((r=o.value.patientDetail)==null?void 0:r.pid)+")"},{default:c(()=>{var m,h,u,b,x,D,w,C;return[e("div",Z,[e("label",ee,[te,_(a(((m=o.value.patientDetail)==null?void 0:m.firstName)+" "+((h=o.value.patientDetail)==null?void 0:h.lastName)),1)]),e("label",le,[oe,_(a((u=o.value.patientDetail)==null?void 0:u.email),1)]),e("label",se,[ae,_(a((b=o.value.patientDetail)==null?void 0:b.mobile),1)]),e("label",ne,[ie,_(a((x=o.value.patientDetail)==null?void 0:x.gender),1)]),e("label",de,[re,_(a((D=o.value.patientDetail)==null?void 0:D.dob),1)]),e("label",ce,[ue,_(a((w=o.value.patientDetail)==null?void 0:w.group),1)]),e("label",_e,[fe,_(a((C=o.value.patientDetail)==null?void 0:C.address),1)])])]}),_:1},8,["title"])):(n(),M(d,{key:1,empty:""}))]}),_:1}),s(T,null,{default:c(()=>{var r;return[e("div",pe,[s(V,{class:"mb-6",title:"Labtest Report",onHeaderIconClicked:t[0]||(t[0]=m=>z(o.value.id)),headerIcon:F(Y),"has-table":""},{default:c(()=>{var m,h;return[e("div",me,[((m=o.value.appointmentCall)==null?void 0:m.length)>0?(n(),f("table",he,[be,ge,e("tbody",null,[(n(!0),f(S,null,j(o.value.appointmentCall,(u,b)=>(n(),f("tr",{key:b},[e("td",ve,a(b+1),1),e("td",ye,a(L(u.createdAt)),1),e("td",xe,[s(B,{type:"justify-center lg:justify-center"},{default:c(()=>[e("a",{href:u.link,target:"_blank",rel:"noreferrer",class:"mr-4"},[s(y,{type:"button",title:"Download",color:"info",icon:F(J),small:""},null,8,["icon"])],8,ke),s(y,{type:"button",title:"Delete File",color:"danger",icon:F(K),small:"",onClick:A(x=>R(u.id),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])):g("",!0)]),((h=o.value.appointmentCall)==null?void 0:h.length)<=0?(n(),M(V,{key:0,empty:""})):g("",!0)]}),_:1},8,["headerIcon"]),s(d,{class:"mb-6",title:"Labtest Booking (Total: "+((r=o.value.appointmentLabtest)==null?void 0:r.length)+")","has-table":""},{default:c(()=>{var m,h;return[e("div",De,[((m=o.value.appointmentLabtest)==null?void 0:m.length)>0?(n(),f("table",we,[Ce,Me,e("tbody",null,[(n(!0),f(S,null,j(o.value.appointmentLabtest,(u,b)=>{var x,D,w,C;return n(),f("tr",{key:b},[e("td",Ae,a(b+1),1),e("td",Te,a((x=u.labTest)==null?void 0:x.title),1),e("td",Be,a((D=u.labTest)==null?void 0:D.price),1),e("td",Fe,a((w=u.labTest)==null?void 0:w.discount),1),e("td",Ne,a((C=u.labTest)==null?void 0:C.discountPrice),1),e("td",Le,a(L(u.createdAt)),1)])}),128))])])):g("",!0)]),((h=o.value.appointmentLabtest)==null?void 0:h.length)<=0?(n(),M(d,{key:0,empty:""})):g("",!0)]}),_:1},8,["title"])])]}),_:1}),s(T,null,{default:c(()=>[o.value.result?(n(),M(d,{key:0,title:"Labtest Schedule"},{default:c(()=>[e("div",Ve,[e("label",Ie,[Se,_(a(o.value.result.labtestSchedule.name),1)]),e("label",je,[Pe,_(a(N(o.value.result.labtestSchedule.fromTime)),1)]),e("label",Ue,[Ee,_(a(N(o.value.result.labtestSchedule.toTime)),1)])])]),_:1})):g("",!0)]),_:1}),s(T),s(I,{modelValue:l.fileModel,"onUpdate:modelValue":t[3]||(t[3]=r=>l.fileModel=r),title:"Update File"},{default:c(()=>[e("section",null,[e("div",Re,[e("input",{type:"file",name:"logo",onChange:t[1]||(t[1]=r=>E(r)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),e("div",Ge,[l.fileImage?(n(),f("img",{key:0,class:"h-48 opacity-1",src:l.fileImage},null,8,$e)):g("",!0),l.fileImage?g("",!0):(n(),f("span",ze,"Upload File"))])]),s(B,{type:"justify-center lg:justify-center pt-5"},{default:c(()=>[s(y,{type:"button",color:"danger",small:"",label:"Upload",onClick:A($,["prevent"])}),s(y,{type:"button",color:"info",small:"",label:"Cancel",onClick:t[2]||(t[2]=A(r=>l.fileModel=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),s(I,{modelValue:l.deleteModal,"onUpdate:modelValue":t[5]||(t[5]=r=>l.deleteModal=r),title:"File Delete Confirmation !!!"},{default:c(()=>[l.id?(n(),f("section",Oe,[He,s(B,{type:"justify-center lg:justify-center pt-5"},{default:c(()=>[s(y,{type:"button",color:"denger",small:"",label:"Yes",onClick:A(G,["prevent"])}),s(y,{type:"button",color:"info",small:"",label:"No",onClick:t[4]||(t[4]=A(r=>l.deleteModal=!1,["prevent"]))})]),_:1})])):g("",!0)]),_:1},8,["modelValue"])])}}};export{We as default};
