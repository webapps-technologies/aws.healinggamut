import{e as N,c as W,z as X,j as c,k as n,l as r,m as a,A as i,H as d,B as M,y as l,q as V,M as Y,u as h,F as Z,I as ee,E as I,x as p,t as S,J as U}from"./@vue-bQO0P59g.js";import{C as te,E as oe,S as le,T as ae,F as se}from"./@mdi-CZk6uuAL.js";import{u as ne}from"./vuex-DHdsu8jA.js";import{u as ie}from"./vue-router-D5J0r3Gc.js";import{e as L}from"./export-from-json-BvevaQwb.js";const re={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},de=l("option",{value:!0},"Active",-1),ue=l("option",{value:!1},"Inactive",-1),ce=[de,ue],me={class:"grid grid-cols-1 lg:grid-cols-1 gap-6 new-table"},fe={class:"mt-3 px-6 table-sec"},pe={key:0},ge=l("thead",null,[l("tr",null,[l("th",null,"Sl.No."),l("th",null,"Name"),l("th",null,"Image"),l("th",null,"Created"),l("th",null,"Status"),l("th",{class:"text-center"},"Actions")])],-1),be={"data-label":"Sr.No"},_e={key:0,"data-label":"image"},ye=["src"],he={key:1,"data-label":"image"},ve=l("img",{src:"https://kreditstorage.b-cdn.net/logo/noimage.png",class:"h-8"},null,-1),Ce=[ve],ke={"data-label":"Name"},xe={"data-label":"Created"},Me={key:2,"data-label":"Status",class:"text-green-500 font-bold"},Ve={key:3,"data-label":"Status",class:"text-rose-500 font-bold"},Ie={class:"actions-cell"},Se={key:0,class:"flex justify-center items-center"},we=l("div",{class:"spinner-dual-ring"},[l("div",{class:"ldio"},[l("div"),l("div",null,[l("div")])])],-1),je=[we],Ae={key:0},Ee={class:"flex justify-center"},Ne={class:"form-check flex items-center"},Ue={for:"active",class:"form-check-label inline-block items-center text-gray-800 cursor-pointer dark:text-slate-300 mr-2"},Le={class:"form-check form-check-inline"},Te={for:"deactive",class:"form-check-label inline-block items-center text-gray-800 cursor-pointer dark:text-slate-300 mr-2"},De={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},Fe={class:"absolute flex justify-center items-center gap-2"},$e=["src"],Re={key:1,class:"text-center text-neutral-400 font-bold"},Je={__name:"Categories",setup(Be){const m=ne(),T=ie(),f=N(()=>m.state.Category),e=W({submit:!1,limit:10,offset:0,search:"",status:!0,statusChange:!0,editMode:!1,cModal:!1,id:null,name:null,name_hn:null,name_bn:null,statusModal:!1,imgModal:!1,logoImage:null,logoFile:null,featured:!0});X(()=>{g(e.limit,e.offset,e.search,e.status)});function g(s,t,u,_){m.dispatch("Category/all",{limit:s,offset:t,search:u,status:_})}function D(){e.offset=e.offset+e.limit,g(e.limit,e.offset,e.search,e.status)}function F(s){s.length>2?g(e.limit,0,s,e.status):g(e.limit,0,e.search,e.status)}function $(s){const t="Categories",u=L.types.xls;s&&L({data:s,fileName:t,exportType:u})}function R(){g(e.limit,0,e.search,e.statusChange)}function B(s){if(s){const t=new Date(s).toString().split(" ");return t[2]+" "+t[1]+", "+t[3]}return"-"}function q(){e.cModal=!0,e.editMode=!1,e.id=null,e.name=null,e.name_hn=null,e.name_bn=null}function z(s,t){e.cModal=!0,e.editMode=!0,e.id=s,e.name=t}async function O(){if(v.value)return e.submit=!0,null;e.submit=!1,e.editMode?(await m.dispatch("Category/update",{id:e.id,label:e.name,status:"ACTIVE"}),e.cModal=!1):(await m.dispatch("Category/save",{label:e.name,status:"ACTIVE"}),e.cModal=!1),g(e.limit,e.offset,e.search,e.status),e.cModal=!1}function P(s,t){e.statusModal=!0,e.id=s,e.status=t,e.featured=t}function H(){e.id&&m.dispatch("Category/setCategoryStatus",{id:e.id,status:e.status,featured:e.featured}),e.statusModal=!1}function J(s,t){e.imgModal=!0,e.id=s,e.logoImage=t}async function K(s){if(s){const t=await s.target;if(t.files[0].type==="image/png"||t.files[0].type==="image/jpg"||t.files[0].type==="image/jpeg")if(t.files[0].size<=1e6){if(t.files){const u=new FileReader;u.onload=_=>{e.logoImage=_.target.result},e.logoFile=t.files[0],u.readAsDataURL(t.files[0])}}else m.dispatch("Alert/error",{msg:"Image too big (max 1 Mb allowed)"});else m.dispatch("Alert/error",{msg:"Upload image in png format."})}}function G(){e.logoFile&&m.dispatch("Category/updateLogo",{id:e.id,file:e.logoFile}),g(e.limit,e.offset,e.search,e.status),e.imgModal=!1}function Q(s,t,u){T.push({path:s,query:{id:t,name:u}})}const v=N(()=>e.name?null:"Required.");return(s,t)=>{const u=c("hero-bar"),_=c("control"),w=c("field"),b=c("base-button"),j=c("main-section"),C=c("base-button-rounded"),y=c("base-buttons"),A=c("card-component"),k=c("modal-box");return n(),r("section",null,[a(u,null,{default:i(()=>[M("Categories")]),_:1}),a(j,null,{default:i(()=>[l("div",re,[a(_,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=o=>e.search=o),onKeyup:t[1]||(t[1]=o=>F(o.target.value)),type:"text",placeholder:"Search by : Name"},null,8,["modelValue"]),a(w,null,{default:i(()=>[V(l("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>e.statusChange=o),onChange:t[3]||(t[3]=o=>R()),class:"form-select appearance-none block w-full px-3 py-2 h-10 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-dark-700 focus:bg-white focus:border-blue-600 focus:outline-none"},ce,544),[[Y,e.statusChange]])]),_:1}),a(b,{class:"h-10",type:"button",color:"themeColor",small:"",label:"Export to excel",onClick:t[4]||(t[4]=d(o=>$(f.value.excelData),["prevent"]))})])]),_:1}),a(j,null,{default:i(()=>[l("div",me,[a(A,{class:"mb-6",title:"List",onHeaderIconClicked:t[5]||(t[5]=o=>q()),headerIcon:h(te),iconText:"Add Categories","has-table":""},{default:i(()=>[l("div",fe,[f.value.data.length>0?(n(),r("table",pe,[ge,l("tbody",null,[(n(!0),r(Z,null,ee(f.value.data,(o,E)=>(n(),r("tr",{key:E},[l("td",be,I(E+1),1),o.image?(n(),r("td",_e,[l("img",{src:o.image,class:"h-8 w-14"},null,8,ye)])):(n(),r("td",he,Ce)),l("td",ke,I(o.label),1),l("td",xe,I(B(o.createdAt)),1),o.status=="ACTIVE"?(n(),r("td",Me,"Active")):(n(),r("td",Ve,"Inactive")),l("td",Ie,[a(y,{type:"justify-start lg:justify-center","no-wrap":""},{default:i(()=>[a(C,{icon:h(oe),title:"Change Status",color:"info",onClick:d(x=>P(o.id,o.status),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"]),a(C,{icon:h(le),title:"Edit Category",color:"purple",onClick:d(x=>z(o.id,o.label),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"]),a(C,{icon:h(ae),title:"View labtest Details",color:"teal",onClick:d(x=>Q("/labtest/categories",o.id,o.name),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"]),a(b,{color:"success",title:"Change Image",small:"",icon:h(se),onClick:d(x=>J(o.id,o.image),["prevent"]),rounded:""},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])):p("",!0)]),f.value.data.length<=0?(n(),S(A,{key:0,empty:""})):p("",!0)]),_:1},8,["headerIcon"])]),f.value.dataLoader?(n(),r("div",Se,je)):p("",!0),f.value.loadMore&&!f.value.dataLoader?(n(),S(y,{key:1,type:"justify-center lg:justify-center"},{default:i(()=>[a(b,{type:"button",color:"themeColor",label:"Load More",onClick:t[6]||(t[6]=d(o=>D(),["prevent"]))})]),_:1})):p("",!0)]),_:1}),a(k,{modelValue:e.cModal,"onUpdate:modelValue":t[8]||(t[8]=o=>e.cModal=o),title:e.editMode?"Update Category":"Add Category",form:"",onSubmit:t[9]||(t[9]=d(o=>s.onSubmit(),["prevent"]))},{default:i(()=>[l("section",null,[a(w,{label:"Name *",class:"mr-2",help:e.submit&&v.value?v.value:""},{default:i(()=>[a(_,{modelValue:e.name,"onUpdate:modelValue":t[7]||(t[7]=o=>e.name=o),type:"text",name:"name",autocomplete:"Name",placeholder:"Category Name"},null,8,["modelValue"])]),_:1},8,["help"]),a(y,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[a(b,{type:"button",color:"themeColor",small:"",label:"Submit",onClick:d(O,["prevent"]),effect:""})]),_:1})])]),_:1},8,["modelValue","title"]),a(k,{modelValue:e.statusModal,"onUpdate:modelValue":t[12]||(t[12]=o=>e.statusModal=o),title:"Category Status"},{default:i(()=>[e.id?(n(),r("section",Ae,[l("div",Ee,[l("div",Ne,[l("label",Ue,[V(l("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[10]||(t[10]=o=>e.status=o),value:"ACTIVE"},null,512),[[U,e.status]]),M(" ACTIVE")])]),l("div",Le,[l("label",Te,[V(l("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[11]||(t[11]=o=>e.status=o),value:"DEACTIVE"},null,512),[[U,e.status]]),M(" DEACTIVE")])])]),a(y,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[f.value.loaderNew?p("",!0):(n(),S(b,{key:0,color:"info",onClick:d(H,["prevent"]),type:"button",label:"Submit",effect:""}))]),_:1})])):p("",!0)]),_:1},8,["modelValue"]),a(k,{modelValue:e.imgModal,"onUpdate:modelValue":t[15]||(t[15]=o=>e.imgModal=o),title:"Update Logo"},{default:i(()=>[l("section",null,[l("div",De,[l("input",{type:"file",name:"logo",accept:"image/png || image/jpg || image/jpeg",onChange:t[13]||(t[13]=o=>K(o)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),l("div",Fe,[e.logoImage?(n(),r("img",{key:0,class:"h-48 opacity-1",src:e.logoImage},null,8,$e)):p("",!0),e.logoImage?p("",!0):(n(),r("span",Re,"Upload Logo"))])]),a(y,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[a(b,{type:"button",color:"danger",small:"",label:"Upload",onClick:d(G,["prevent"])}),a(b,{type:"button",color:"info",small:"",label:"Cancel",onClick:t[14]||(t[14]=d(o=>e.imgModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"])])}}};export{Je as default};
