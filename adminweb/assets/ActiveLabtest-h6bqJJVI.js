import{e as w,c as W,z as X,j as g,k as n,l as i,m as s,A as r,H as c,B as v,y as l,u as k,F as Y,I as Z,E as p,x as u,t as C,q as E,J as L}from"./@vue-bQO0P59g.js";import{J as tt,M as et,E as ot,S as lt,F as at}from"./@mdi-CZk6uuAL.js";import{e as A}from"./export-from-json-BvevaQwb.js";import{u as st}from"./vue-router-D5J0r3Gc.js";import{u as nt}from"./vuex-DHdsu8jA.js";const it={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},dt={class:"grid grid-cols-1 lg:grid-cols-1 gap-6 new-table"},rt={class:"mt-3 px-6 table-sec"},ut={key:0},ct=l("thead",{class:"bg-white dark:bg-gray-900/80 dark:backdrop-blur-md"},[l("tr",null,[l("th",null,"Sl.No."),l("th",null,"Icon"),l("th",null,"Test Name"),l("th",null,"Price"),l("th",null,"Discount"),l("th",null,"Offered"),l("th",null,"Type"),l("th",null,"Created"),l("th",null,"Status"),l("th",{class:"text-center"},"Actions")])],-1),pt={"data-label":"Sr.No"},ft={key:0,"data-label":"Icon"},mt=["src"],gt={key:1,"data-label":"Icon"},_t=l("img",{src:"https://kreditstorage.b-cdn.net/logo/noimage.png",class:"h-8"},null,-1),ht=[_t],bt={"data-label":"Title"},yt={"data-label":"Amount"},kt={"data-label":"Discount"},vt={"data-label":"Offered"},Ct={"data-label":"Type"},Vt={"data-label":"Created"},It={"data-label":"Status"},xt={key:0,class:"text-green-500 font-bold"},Et={key:1,class:"text-rose-500 font-bold"},Lt={key:2,class:"text-yellow-500 font-bold"},Mt={class:"actions-cell"},Tt={key:0,class:"flex justify-center items-center"},wt=l("div",{class:"spinner-dual-ring"},[l("div",{class:"ldio"},[l("div"),l("div",null,[l("div")])])],-1),At=[wt],Dt={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},St={class:"absolute flex justify-center items-center gap-2"},jt=["src"],Nt={key:1,class:"text-center text-neutral-400 font-bold"},Ut={key:0},Ft={class:"flex justify-center"},Bt={class:"form-check form-check-inline"},Ot={class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2 cursor-pointer"},$t={class:"form-check form-check-inline"},Rt={class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2 cursor-pointer"},Pt={class:"form-check form-check-inline"},zt={class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2 cursor-pointer"},Wt={__name:"ActiveLabtest",setup(Gt){const _=nt(),D=st(),f=w(()=>_.state.LabTest),S=w(()=>_.state.LabTestCat),V=[{id:"ACTIVE",label:"ACTIVE"},{id:"DEACTIVE",label:"DEACTIVE"}],t=W({limit:10,offset:0,search:"",status:V[0],statusChange:V[0],imgModal:!1,id:null,logoImage:null,logoFile:null,statusModal:!1,categoryModal:!1,category:[]});X(()=>{var a;b(t.limit,t.offset,t.search,(a=t.status)==null?void 0:a.id)});function b(a,e,d,h){_.dispatch("LabTest/all",{limit:a,offset:e,search:d,status:h})}function j(){var a;t.offset=t.offset+t.limit,b(t.limit,t.offset,t.search,(a=t.status)==null?void 0:a.id)}function N(a){a.length>2?b(t.limit,0,a,t.status.id):a.length<=0&&b(t.limit,0,t.search,t.status.id)}function U(a){const e="Labtests",d=A.types.xls;a&&A({data:a,fileName:e,exportType:d})}function F(){var a;b(t.limit,t.offset,t.search,(a=t.status)==null?void 0:a.id)}function B(a,e){let d=a*e/100;return a-d}function M(a,e,d){D.push({path:a,query:{id:e,testname:d}})}function O(a){if(a){const e=new Date(a).toString().split(" ");return e[2]+" "+e[1]+", "+e[3]}return"-"}function $(a,e){t.imgModal=!0,t.id=a,t.logoImage=e}async function R(a){if(a){const e=await a.target;if(e.files[0].type==="image/png"||e.files[0].type==="image/jpg"||e.files[0].type==="image/jpeg")if(e.files[0].size<=1e6){if(e.files){const d=new FileReader;d.onload=h=>{t.logoImage=h.target.result},t.logoFile=e.files[0],d.readAsDataURL(e.files[0])}}else _.dispatch("Alert/error",{msg:"Image too big (max 1 Mb allowed)"});else _.dispatch("Alert/error",{msg:"Upload image in png format."})}}function P(){t.logoFile&&_.dispatch("LabTest/updateLogo",{id:t.id,file:t.logoFile}),t.imgModal=!1}function z(a,e){t.statusModal=!0,t.id=a,t.statusChange=e}function G(){t.id&&_.dispatch("LabTest/setLabtestStatus",{id:t.id,status:t.statusChange}),t.statusModal=!1}async function J(){await _.dispatch("LabTestCat/save",{categoryId:t.category.id,labtestId:t.id}),t.categoryModal=!1}return(a,e)=>{const d=g("hero-bar"),h=g("control"),m=g("base-button"),y=g("base-buttons"),q=g("new-card"),H=g("card-component"),K=g("main-section"),I=g("modal-box"),Q=g("field");return n(),i("section",null,[s(d,null,{default:r(()=>[v("Lab Tests")]),_:1}),s(K,null,{default:r(()=>[l("div",it,[s(h,{modelValue:t.search,"onUpdate:modelValue":e[0]||(e[0]=o=>t.search=o),onKeyup:e[1]||(e[1]=o=>N(o.target.value)),type:"text",placeholder:"Search by : test name"},null,8,["modelValue"]),s(h,{modelValue:t.status,"onUpdate:modelValue":e[2]||(e[2]=o=>t.status=o),options:V,onChange:F},null,8,["modelValue"])]),l("div",dt,[s(H,{class:"mb-6",title:"List",onHeaderIconClicked:e[3]||(e[3]=o=>U(f.value.excelData)),headerIcon:k(tt),"has-table":""},{default:r(()=>[l("div",rt,[f.value.data.length>0?(n(),i("table",ut,[ct,l("tbody",null,[(n(!0),i(Y,null,Z(f.value.data,(o,T)=>(n(),i("tr",{key:T},[l("td",pt,p(T+1),1),o.image?(n(),i("td",ft,[l("img",{src:o.image,class:"h-8"},null,8,mt)])):(n(),i("td",gt,ht)),l("td",bt,p(o.title),1),l("td",yt," ₹"+p(parseFloat(o.price).toFixed(2)),1),l("td",kt,p(o.discount)+"%",1),l("td",vt," ₹"+p(B(o.price,o.discount).toFixed(2)),1),l("td",Ct,p(o.type),1),l("td",Vt,p(O(o.createdAt)),1),l("td",It,[o.status==="ACTIVE"?(n(),i("span",xt,p(o.status),1)):u("",!0),o.status==="DEACTIVE"?(n(),i("span",Et,p(o.status),1)):u("",!0),o.status==="PENDING"?(n(),i("span",Lt,p(o.status),1)):u("",!0)]),l("td",Mt,[s(y,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[s(m,{color:"info",title:"View",icon:k(et),small:"",rounded:"",onClick:c(x=>M("/labtest/info",o.id),["prevent"])},null,8,["icon","onClick"]),s(m,{type:"button",title:"Change Status",color:"info",icon:k(ot),small:"",rounded:"",onClick:c(x=>z(o.id,o.status),["prevent"])},null,8,["icon","onClick"]),s(m,{color:"info",icon:k(lt),title:"Edit Labtest",small:"",rounded:"",onClick:c(x=>M("/Labtest/edit",o.id,o.title),["prevent"])},null,8,["icon","onClick"]),s(m,{color:"success",title:"Change Image",small:"",rounded:"",icon:k(at),onClick:c(x=>$(o.id,o.image),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])):u("",!0)]),f.value.data.length<=0?(n(),C(q,{key:0,empty:""})):u("",!0)]),_:1},8,["headerIcon"])]),f.value.dataLoader?(n(),i("div",Tt,At)):u("",!0),f.value.loadMore&&!f.value.dataLoader?(n(),C(y,{key:1,type:"justify-center lg:justify-center"},{default:r(()=>[s(m,{type:"button",color:"themeColor",label:"Load More",onClick:e[4]||(e[4]=c(o=>j(),["prevent"]))})]),_:1})):u("",!0)]),_:1}),s(I,{modelValue:t.imgModal,"onUpdate:modelValue":e[7]||(e[7]=o=>t.imgModal=o),title:"Update Image"},{default:r(()=>[l("section",null,[l("div",Dt,[l("input",{type:"file",name:"logo",accept:"image/*",onChange:e[5]||(e[5]=o=>R(o)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),l("div",St,[t.logoImage?(n(),i("img",{key:0,class:"h-48 opacity-1",src:t.logoImage},null,8,jt)):u("",!0),t.logoImage?u("",!0):(n(),i("span",Nt,"Upload Logo"))])]),s(y,{type:"justify-center lg:justify-center pt-5"},{default:r(()=>[s(m,{type:"button",color:"danger",small:"",label:"Upload",onClick:c(P,["prevent"])}),s(m,{type:"button",color:"info",small:"",label:"Cancel",onClick:e[6]||(e[6]=c(o=>t.imgModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),s(I,{modelValue:t.statusModal,"onUpdate:modelValue":e[11]||(e[11]=o=>t.statusModal=o),title:"Lab test status"},{default:r(()=>[t.id?(n(),i("section",Ut,[l("div",Ft,[l("div",Bt,[l("label",Ot,[E(l("input",{class:"form-check-input ml-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":e[8]||(e[8]=o=>t.statusChange=o),value:"ACTIVE"},null,512),[[L,t.statusChange]]),v(" ACTIVE")])]),l("div",$t,[l("label",Rt,[E(l("input",{class:"form-check-input ml-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":e[9]||(e[9]=o=>t.statusChange=o),value:"DEACTIVE"},null,512),[[L,t.statusChange]]),v(" DEACTIVE")])]),l("div",Pt,[l("label",zt,[E(l("input",{class:"form-check-input ml-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":e[10]||(e[10]=o=>t.statusChange=o),value:"PENDING"},null,512),[[L,t.statusChange]]),v(" PENDING")])])]),s(y,{type:"justify-center lg:justify-center pt-5"},{default:r(()=>[f.value.loaderNew?u("",!0):(n(),C(m,{key:0,type:"button",color:"info",small:"",label:"Change Status",onClick:c(G,["prevent"])}))]),_:1})])):u("",!0)]),_:1},8,["modelValue"]),s(I,{modelValue:t.categoryModal,"onUpdate:modelValue":e[13]||(e[13]=o=>t.categoryModal=o),title:"Add Category",form:"",onSubmit:e[14]||(e[14]=c(o=>a.onSubmit(),["prevent"]))},{default:r(()=>[l("section",null,[s(Q,{label:"Category *"},{default:r(()=>[s(h,{modelValue:t.category,"onUpdate:modelValue":e[12]||(e[12]=o=>t.category=o),options:S.value.catdata},null,8,["modelValue","options"])]),_:1}),s(y,{type:"justify-center lg:justify-center pt-5"},{default:r(()=>[f.value.loaderNew?u("",!0):(n(),C(m,{key:0,type:"button",color:"themeColor",small:"",label:"Submit",onClick:c(J,["prevent"])}))]),_:1})])]),_:1},8,["modelValue"])])}}};export{Wt as default};
