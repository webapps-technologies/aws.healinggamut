import{e as D,c as ge,z as ye,j as v,k as s,l as f,m as n,A as i,H as r,B as he,E as y,u as b,y as a,F as be,I as ke,x as p,t as g,q as I,J as E,K as P}from"./@vue-bQO0P59g.js";import{C as ve,D as Ce,H as _e,E as Ve,F as N,I as we}from"./@mdi-CZk6uuAL.js";import{b as Me,u as De}from"./vue-router-D5J0r3Gc.js";import{u as Ie}from"./vuex-DHdsu8jA.js";import{h as Ee}from"./moment-Cl4UOzQZ.js";const Se={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ue={class:"grid grid-cols-1 lg:grid-cols-1 gap-6 new-table"},xe={class:"mt-3 table-sec"},Ae={key:0},Le=a("thead",{class:"bg-white dark:bg-gray-900/80 dark:backdrop-blur-md"},[a("tr",null,[a("th",null,"Sl.No."),a("th",null,"Login ID"),a("th",null,"Staff Name"),a("th",null,"Staff Roles"),a("th",null,"Staff Status"),a("th",null,"Staff Created"),a("th",{class:"text-center"},"Actions")])],-1),je={"data-label":"Sr.No"},Pe={"data-label":"login Id"},Ne={"data-label":"name"},Fe={"data-label":"Roles"},Re={key:0,"data-label":"Status",class:"text-green-500 font-bold"},Te={key:1,"data-label":"Status",class:"text-rose-500 font-bold"},$e={key:2,"data-label":"Status",class:"text-red-500 font-bold"},qe={key:3,"data-label":"Status",class:"text-orange-500 font-bold"},ze={key:4,"data-label":"Status",class:"text-yellow-500 font-bold"},Oe={"data-label":"CreatedAt"},Ye={class:"actions-cell"},Be={key:0,class:"flex justify-center items-center"},Ke=a("div",{class:"spinner-dual-ring"},[a("div",{class:"ldio"},[a("div"),a("div",null,[a("div")])])],-1),Ge=[Ke],He={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},Ze={key:0},We=a("div",{class:"flex justify-center"},[a("h5",null,"Are you sure to delete this account?")],-1),Xe={key:0},Je={class:"flex justify-center"},Qe={class:"form-check form-check-inline"},et=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio10"},"Pending",-1),tt={class:"form-check form-check-inline"},lt=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"Active",-1),at={class:"form-check form-check-inline"},ot=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"Inactive",-1),nt={class:"form-check form-check-inline"},st=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"Suspended",-1),it={class:"form-check form-check-inline"},dt=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"Deleted",-1),rt={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},ut={class:"absolute flex justify-center items-center gap-2"},ft=["src"],ct={key:0,class:"text-center text-neutral-400 font-bold"},pt={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},mt={class:"absolute flex justify-center items-center gap-2"},gt=["src"],yt={key:0,class:"text-center text-neutral-400 font-bold"},ht={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},bt={class:"absolute flex justify-center items-center gap-2"},kt=["src"],vt={key:0,class:"text-center text-neutral-400 font-bold"},It={__name:"myStaffs",setup(Ct){const U=[{id:"ACTIVE",label:"ACTIVE"},{id:"DEACTIVE",label:"DEACTIVE"},{id:"DELETED",label:"DELETED"},{id:"SUSPENDED",label:"SUSPENDED"},{id:"PENDING",label:"PENDING"}],F=[{id:"MALE",label:"MALE"},{id:"FEMALE",label:"FEMALE"},{id:"UNISEX",label:"UNISEX"},{id:"OTHER",label:"OTHER"}],m=Ie(),S=Me(),K=De(),h=D(()=>m.state.Account),e=ge({limit:10,offset:0,search:"",status:U[0],statusChange:U[0],roles:"EMPLOYEE",staffModal:!1,staffid:null,cModal:!1,loginId:null,name:null,emailId:null,gender:F[0],dob:Ee().format("YYYY-MM-DD"),password:null,confirmPassword:null,checkpassword:null,submit:!1,id:null,accountId:null,statusModal:!1,aadharModel:!1,profileModel:!1,panModel:!1,aadharFile:null,panFile:null,profileFile:null,aadharLink:null,panLink:null,profileLink:null});ye(()=>{C(e.limit,e.offset,e.search,e.status.id,e.roles)});function C(o,t,c,d,V){S.query.id&&(e.accountId=S.query.id,m.dispatch("Account/getMyStaffs",{limit:o,offset:t,search:c,status:d,roles:V,id:S.query.id}))}function G(){e.offset=e.offset+e.limit,C(e.limit,e.offset,e.search,e.status.id,e.roles)}function H(o){o.length>2?C(e.limit,0,o,e.status.id,e.roles):C(e.limit,0,e.search,e.status.id,e.roles)}function Z(){C(e.limit,0,e.search,e.statusChange.id,e.roles)}function W(o,t){e.statusModal=!0,e.id=o,e.status=t}function X(){e.id&&m.dispatch("Account/setStatus",{id:e.id,status:e.status}),e.statusModal=!1}function J(o,t){e.aadharModel=!0,e.id=o,t.length>0&&(e.aadharLink=t[0].aadhar)}function Q(o,t){e.panModel=!0,e.id=o,t.length>0&&(e.panLink=t[0].pan)}function ee(o,t){e.profileModel=!0,e.id=o,t.length>0&&(e.profileLink=t[0].profile)}function R(){e.aadharFile&&(m.dispatch("Account/aadharUpdateFile",{id:e.id,file:e.aadharFile}),e.aadharModel=!1)}function T(){e.panFile&&(m.dispatch("Account/panUpdateFile",{id:e.id,file:e.panFile}),e.panModel=!1)}function $(){e.profileFile&&(m.dispatch("Account/profileUpdateFile",{id:e.id,file:e.profileFile}),e.profileModel=!1)}async function te(o){if(o){const t=await o.target;if(t.files[0].type==="image/png"||t.files[0].type==="image/jpg"||t.files[0].type==="image/jpeg")if(t.files[0].size<=1e6){if(t.files){const c=new FileReader;c.onload=d=>{e.aadharLink=d.target.result},e.aadharFile=t.files[0],c.readAsDataURL(t.files[0])}}else m.dispatch("Alert/error",{msg:"Image too big (max 1 Mb allowed)"});else m.dispatch("Alert/error",{msg:"Upload image in png,jpg,jpeg format."})}}async function le(o){if(o){const t=await o.target;if(t.files[0].type==="image/png"||t.files[0].type==="image/jpg"||t.files[0].type==="image/jpeg")if(t.files[0].size<=1e6){if(t.files){const c=new FileReader;c.onload=d=>{e.panLink=d.target.result},e.panFile=t.files[0],c.readAsDataURL(t.files[0])}}else m.dispatch("Alert/error",{msg:"Image too big (max 1 Mb allowed)"});else m.dispatch("Alert/error",{msg:"Upload image in png,jpg,jpeg format."})}}async function ae(o){if(o){const t=await o.target;if(t.files[0].type==="image/png"||t.files[0].type==="image/jpg"||t.files[0].type==="image/jpeg")if(t.files[0].size<=1e6){if(t.files){const c=new FileReader;c.onload=d=>{e.profileLink=d.target.result},e.profileFile=t.files[0],c.readAsDataURL(t.files[0])}}else m.dispatch("Alert/error",{msg:"Image too big (max 1 Mb allowed)"});else m.dispatch("Alert/error",{msg:"Upload image in png,jpg,jpeg format."})}}function q(o,t,c){K.push({path:o,query:{id:t,username:c}})}function oe(o){if(o){const t=new Date(o).toString().split(" ");return t[2]+" "+t[1]+", "+t[3]+" "+t[4]}return"-"}function ne(){e.cModal=!0,e.loginId=null,e.name=null,e.emailId=null,e.password=null,e.confirmPassword=null}async function se(){if(x.value||A.value||L.value||j.value){e.submit=!0;return}e.submit=!1,await m.dispatch("Account/adminSave",{loginId:e.loginId,password:e.password,name:e.name,emailId:e.emailId,gender:e.gender.id,dob:e.dob,roles:e.roles.id}),C(e.limit,e.offset,e.search,e.status.id,e.roles),e.cModal=!1}function ie(o){e.staffModal=!0,e.staffid=o}function de(){e.staffid&&m.dispatch("Account/deleteAdmin",{sid:e.staffid}),C(e.limit,e.offset,e.search),e.staffModal=!1}function re(){e.staffModal=!1}function ue(){var o=new Date,t=o.getDate(),c=o.getFullYear(),d=o.getMonth()+1;d<10&&(d="0"+d),t<10&&(t="0"+t);var V=c+"-"+d+"-"+t;return V}const x=D(()=>e.loginId?e.loginId.length<9?"Minimum nine characters required.":null:"This filed required."),A=D(()=>e.name?null:"This filed required."),L=D(()=>{const o=/^([\w\.\+]{1,})([^\W])(@)([\w]{1,})(\.[\w]{1,})+$/;return e.emailId?o.test(e.emailId)?null:"Enter valid email address.":"This filed required."}),j=D(()=>{const o=/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;return e.password?o.test(e.password)?null:"Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character.":"This filed required."}),z=D(()=>e.confirmPassword?e.checkpassword=="No"?"Password does not match.":null:"This filed required.");function fe(o){let t=String.fromCharCode(o.keyCode);if(/^[a-zA-Z ]+$/.test(t))return!0;o.preventDefault()}function ce(o){let t=String.fromCharCode(o.keyCode);if(/^[0-9]+$/.test(t))return!0;o.preventDefault()}function pe(o){let t=String.fromCharCode(o.keyCode);if(/^[a-z0-9@.]+$/.test(t))return!0;o.preventDefault()}function me(o,t){o==t?e.checkpassword="Yes":e.checkpassword="No"}return(o,t)=>{const c=v("hero-bar"),d=v("control"),V=v("main-section"),u=v("base-button"),k=v("base-buttons"),O=v("card-component"),_=v("field"),w=v("modal-box");return s(),f("section",null,[n(c,null,{default:i(()=>[he("Staffs ("+y(b(S).query.username)+")",1)]),_:1}),n(V,null,{default:i(()=>[a("div",Se,[n(d,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=l=>e.search=l),onKeyup:t[1]||(t[1]=l=>H(l.target.value)),type:"text",maxlength:"20",placeholder:"Search by : Username"},null,8,["modelValue"]),n(d,{modelValue:e.statusChange,"onUpdate:modelValue":t[2]||(t[2]=l=>e.statusChange=l),options:U,onChange:t[3]||(t[3]=l=>Z())},null,8,["modelValue"])])]),_:1}),n(V,null,{default:i(()=>[a("div",Ue,[n(O,{class:"mb-6",title:"List (Total: "+h.value.total+")",onHeaderIconClicked:t[4]||(t[4]=l=>ne()),headerIcon:b(ve),iconText:"Add New Staff","has-table":""},{default:i(()=>[a("div",xe,[h.value.data.length>0?(s(),f("table",Ae,[Le,a("tbody",null,[(s(!0),f(be,null,ke(h.value.data,(l,Y)=>{var B;return s(),f("tr",{key:Y},[a("td",je,y(Y+1),1),a("td",Pe,y(l.loginId),1),a("td",Ne,y((B=l.staffDetail[0])==null?void 0:B.name),1),a("td",Fe,y(l.roles),1),l.status=="ACTIVE"?(s(),f("td",Re,y(l.status),1)):l.status=="DEACTIVE"?(s(),f("td",Te,y(l.status),1)):l.status=="DELETED"?(s(),f("td",$e,y(l.status),1)):l.status=="SUSPENDED"?(s(),f("td",qe,y(l.status),1)):l.status=="PENDING"?(s(),f("td",ze,y(l.status),1)):p("",!0),a("td",Oe,y(oe(l.createdAt)),1),a("td",Ye,[n(k,{type:"justify-center lg:justify-center"},{default:i(()=>[n(u,{color:"warning",title:"Staff Permission",icon:b(Ce),rounded:"",onClick:r(M=>q("/view_permission",l.id,l.loginId),["prevent"])},null,8,["icon","onClick"]),n(u,{color:"info",title:"View My Staffs",icon:b(_e),rounded:"",onClick:r(M=>q("/mystaffs",l.id,l.loginId),["prevent"])},null,8,["icon","onClick"]),n(u,{color:"info",icon:b(Ve),title:"Change Staff Status",rounded:"",onClick:r(M=>W(l.id,l.status),["prevent"])},null,8,["icon","onClick"]),n(u,{color:"success",title:"Update Staff Profile Picture",icon:b(N),rounded:"",onClick:r(M=>ee(l.id,l.staffDetail),["prevent"])},null,8,["icon","onClick"]),n(u,{color:"orange",title:"Update Staff Aadhar Card",icon:b(N),rounded:"",onClick:r(M=>J(l.id,l.staffDetail),["prevent"])},null,8,["icon","onClick"]),n(u,{color:"teal",title:"Update Staff Pan Card",icon:b(N),rounded:"",onClick:r(M=>Q(l.id,l.staffDetail),["prevent"])},null,8,["icon","onClick"]),n(u,{type:"button",title:"Delete Staff Details",color:"danger",icon:b(we),rounded:"",onClick:r(M=>ie(l.id),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])])}),128))])])):p("",!0)]),h.value.data.length<=0?(s(),g(O,{key:0,empty:""})):p("",!0)]),_:1},8,["title","headerIcon"])]),h.value.dataLoader?(s(),f("div",Be,Ge)):p("",!0),h.value.loadMore&&!h.value.dataLoader?(s(),g(k,{key:1,type:"justify-center lg:justify-center"},{default:i(()=>[n(u,{type:"button",color:"themeColor",label:"Load More",onClick:t[5]||(t[5]=r(l=>G(),["prevent"]))})]),_:1})):p("",!0)]),_:1}),n(w,{modelValue:e.cModal,"onUpdate:modelValue":t[17]||(t[17]=l=>e.cModal=l),title:"Add New Staff",form:"",onSubmit:t[18]||(t[18]=r(l=>o.onSubmit(),["prevent"])),width:"w-3/5"},{default:i(()=>[a("section",null,[a("div",He,[n(_,{label:"Login ID *",help:e.submit&&x.value?x.value:""},{default:i(()=>[n(d,{modelValue:e.loginId,"onUpdate:modelValue":t[6]||(t[6]=l=>e.loginId=l),type:"text",name:"loginId",autocomplete:"loginId",onKeypress:t[7]||(t[7]=l=>ce(l)),maxlength:"10"},null,8,["modelValue"])]),_:1},8,["help"]),n(_,{label:"Name *",help:e.submit&&A.value?A.value:""},{default:i(()=>[n(d,{modelValue:e.name,"onUpdate:modelValue":t[8]||(t[8]=l=>e.name=l),type:"text",name:"name",autocomplete:"Name",onKeypress:t[9]||(t[9]=l=>fe(l)),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["help"]),n(_,{label:"Email ID *",help:e.submit&&L.value?L.value:""},{default:i(()=>[n(d,{modelValue:e.emailId,"onUpdate:modelValue":t[10]||(t[10]=l=>e.emailId=l),type:"text",name:"emailId",onKeypress:t[11]||(t[11]=l=>pe(l)),autocomplete:"Email Id",maxlength:"50"},null,8,["modelValue"])]),_:1},8,["help"]),n(_,{label:"Gender *"},{default:i(()=>[n(d,{modelValue:e.gender,"onUpdate:modelValue":t[12]||(t[12]=l=>e.gender=l),options:F},null,8,["modelValue"])]),_:1}),n(_,{label:"Date of Birth *"},{default:i(()=>[n(d,{modelValue:e.dob,"onUpdate:modelValue":t[13]||(t[13]=l=>e.dob=l),type:"date",name:"dob",max:ue()},null,8,["modelValue","max"])]),_:1}),n(_,{label:"Password *",help:e.submit&&j.value?j.value:""},{default:i(()=>[n(d,{modelValue:e.password,"onUpdate:modelValue":t[14]||(t[14]=l=>e.password=l),type:"password",name:"password",autocomplete:"Password",maxlength:"16"},null,8,["modelValue"])]),_:1},8,["help"]),n(_,{label:"Confirm Password *",help:e.submit&&z.value?z.value:""},{default:i(()=>[n(d,{modelValue:e.confirmPassword,"onUpdate:modelValue":t[15]||(t[15]=l=>e.confirmPassword=l),type:"password",name:"confirmPassword",autocomplete:"Confirm Password",onKeyup:t[16]||(t[16]=l=>me(e.password,l.target.value)),maxlength:"16"},null,8,["modelValue"])]),_:1},8,["help"])]),n(k,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[h.value.loaderNew?p("",!0):(s(),g(u,{key:0,type:"button",color:"themeColor",small:"",label:"Submit",onClick:r(se,["prevent"])}))]),_:1})])]),_:1},8,["modelValue"]),n(w,{modelValue:e.staffModal,"onUpdate:modelValue":t[19]||(t[19]=l=>e.staffModal=l),title:"Delete Confirmation!!!"},{default:i(()=>[e.staffid?(s(),f("section",Ze,[We,n(k,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[h.value.dataLoader?p("",!0):(s(),g(u,{key:0,type:"button",color:"danger",small:"",label:"Confirm",onClick:r(de,["prevent"])})),n(u,{type:"button",color:"info",small:"",label:"Cancel",onClick:r(re,["prevent"])})]),_:1})])):p("",!0)]),_:1},8,["modelValue"]),n(w,{modelValue:e.statusModal,"onUpdate:modelValue":t[25]||(t[25]=l=>e.statusModal=l),title:"Change Status"},{default:i(()=>[e.id?(s(),f("section",Xe,[a("div",Je,[a("div",Qe,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[20]||(t[20]=l=>e.status=l),value:"PENDING"},null,512),[[E,e.status]]),et]),a("div",tt,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[21]||(t[21]=l=>e.status=l),value:"ACTIVE"},null,512),[[E,e.status]]),lt]),a("div",at,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[22]||(t[22]=l=>e.status=l),value:"DEACTIVE"},null,512),[[E,e.status]]),ot]),a("div",nt,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[23]||(t[23]=l=>e.status=l),value:"SUSPENDED"},null,512),[[E,e.status]]),st]),a("div",it,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[24]||(t[24]=l=>e.status=l),value:"DELETED"},null,512),[[E,e.status]]),dt])]),n(k,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[h.value.loaderNew?p("",!0):(s(),g(u,{key:0,type:"button",color:"info",small:"",label:"Change Status",onClick:r(X,["prevent"])}))]),_:1})])):p("",!0)]),_:1},8,["modelValue"]),n(w,{modelValue:e.profileModel,"onUpdate:modelValue":t[28]||(t[28]=l=>e.profileModel=l),title:"Profile Upload"},{default:i(()=>[a("section",null,[a("div",rt,[a("input",{type:"file",name:"logo",accept:"image/*",onChange:t[26]||(t[26]=l=>ae(l)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),a("div",ut,[(s(),g(P,null,[e.profileLink?(s(),f("img",{key:0,class:"h-48 opacity-1",src:e.profileLink,alt:"banner"},null,8,ft)):p("",!0)],1024)),e.profileLink?p("",!0):(s(),f("span",ct,"Upload Profile"))])]),n(k,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[e.editMode?(s(),g(u,{key:0,type:"button",color:"danger",small:"",label:"Upload",onClick:r($,["prevent"])})):(s(),g(u,{key:1,type:"button",color:"danger",small:"",label:"Upload",onClick:r($,["prevent"])})),n(u,{type:"button",color:"info",small:"",label:"Cancel",onClick:t[27]||(t[27]=r(l=>e.panModel=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),n(w,{modelValue:e.aadharModel,"onUpdate:modelValue":t[31]||(t[31]=l=>e.aadharModel=l),title:"Aadhar Upload"},{default:i(()=>[a("section",null,[a("div",pt,[a("input",{type:"file",name:"logo",accept:"image/*",onChange:t[29]||(t[29]=l=>te(l)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),a("div",mt,[(s(),g(P,null,[e.aadharLink?(s(),f("img",{key:0,class:"h-48 opacity-1",src:e.aadharLink,alt:"banner"},null,8,gt)):p("",!0)],1024)),e.aadharLink?p("",!0):(s(),f("span",yt,"Upload Aadhar"))])]),n(k,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[e.editMode?(s(),g(u,{key:0,type:"button",color:"danger",small:"",label:"Upload",onClick:r(R,["prevent"])})):(s(),g(u,{key:1,type:"button",color:"danger",small:"",label:"Upload",onClick:r(R,["prevent"])})),n(u,{type:"button",color:"info",small:"",label:"Cancel",onClick:t[30]||(t[30]=r(l=>e.aadharModel=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),n(w,{modelValue:e.panModel,"onUpdate:modelValue":t[34]||(t[34]=l=>e.panModel=l),title:"Pan Upload"},{default:i(()=>[a("section",null,[a("div",ht,[a("input",{type:"file",name:"logo",accept:"image/*",onChange:t[32]||(t[32]=l=>le(l)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),a("div",bt,[(s(),g(P,null,[e.panLink?(s(),f("img",{key:0,class:"h-48 opacity-1",src:e.panLink,alt:"banner"},null,8,kt)):p("",!0)],1024)),e.panLink?p("",!0):(s(),f("span",vt,"Upload Pan"))])]),n(k,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[e.editMode?(s(),g(u,{key:0,type:"button",color:"danger",small:"",label:"Upload",onClick:r(T,["prevent"])})):(s(),g(u,{key:1,type:"button",color:"danger",small:"",label:"Upload",onClick:r(T,["prevent"])})),n(u,{type:"button",color:"info",small:"",label:"Cancel",onClick:t[33]||(t[33]=r(l=>e.panModel=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"])])}}};export{It as default};
