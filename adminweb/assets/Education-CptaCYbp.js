import{e as y,c as A,j as u,k as d,l as c,y as o,m as a,A as i,u as k,F as E,I as R,H as g,E as _,x as I}from"./@vue-bQO0P59g.js";import{a2 as K,F as P,a3 as z}from"./@mdi-CZk6uuAL.js";import{b as B}from"./vue-router-D5J0r3Gc.js";import{u as Q}from"./vuex-DHdsu8jA.js";const H={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},T={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},W={class:"mt-3 table-sec"},Z=o("caption",null,null,-1),G=o("thead",{class:"bg-blue dark:bg-gray-900/80 dark:backdrop-blur-md"},[o("tr",null,[o("th",null,"Sl.No."),o("th",null,"Qualification"),o("th",null,"College"),o("th",null,"City"),o("th",null,"Passing Year"),o("th",null,"Document"),o("th",{class:"text-center"},"Action")])],-1),J={"data-label":"Sl.No."},O={"data-label":"Qualification"},X={"data-label":"College"},ee={"data-label":"City"},le={"data-label":"Passing Year"},te={key:0,"data-label":"Document"},oe=["src"],ae={key:1,"data-label":"Document"},ne=o("img",{src:"https://kreditstorage.b-cdn.net/logo/noimage.png",class:"h-8"},null,-1),ie=[ne],se={class:"text-center"},re=o("div",{class:"text-center pb-5"},[o("h2",{class:"text-lg text-red-500"}," Are you sure you want to delete this Education? ")],-1),ue={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},de={class:"absolute flex justify-center items-center gap-2"},ce=["src"],ge={key:1,class:"text-center text-neutral-400 font-bold"},be={__name:"Education",setup(pe){const p=Q();B();const m=y(()=>p.state.Doctor),e=A({editMode:!1,finalSubmit:!1,delId:null,imgModal:!1,logoImage:null,logoFile:null,qualification:null,college:null,city:null,passing_year:null}),M=async()=>{if(v.value||h.value||C.value||V.value){e.finalSubmit=!0;return}const n={doctorDetailId:m.value.user.id,qualification:e.qualification,college:e.college,city:e.city,passingYear:e.passing_year};await p.dispatch("Doctor/addEducation",n),e.qualification=null,e.college=null,e.city=null,e.passing_year=null};function j(n,l){e.imgModal=!0,e.delId=n,e.logoImage=l}async function q(n){if(n){const l=await n.target;if(l.files[0].type==="image/png"||l.files[0].type==="image/jpg"||l.files[0].type==="image/jpeg")if(l.files[0].size<=1e6){if(l.files){const s=new FileReader;s.onload=f=>{e.logoImage=f.target.result},e.logoFile=l.files[0],s.readAsDataURL(l.files[0])}}else p.dispatch("ErrorSuccess/error",{msg:"Image too big (max 1 Mb allowed)"});else p.dispatch("ErrorSuccess/error",{msg:"Upload image in png format."})}}function U(){e.logoFile&&p.dispatch("Doctor/updateLogo",{id:e.delId,file:e.logoFile}),e.imgModal=!1}const w=n=>{e.delId=n,m.value.deleteModal=!0},F=()=>{e.delId&&p.dispatch("Doctor/deleteEducation",{id:e.delId})},v=y(()=>{if(!e.qualification)return"Enter your qualification!"}),h=y(()=>{if(!e.college)return"Enter your college!"}),C=y(()=>{if(!e.city)return"Enter your city!"}),V=y(()=>{if(e.passing_year){if(e.passing_year.length<4)return"Enter Valid Reg. Year !"}else return"Reg. Year required!"});function Y(n){let l=String.fromCharCode(n.keyCode);if(/^[0-9]+$/.test(l))return!0;n.preventDefault()}function x(n){let l=String.fromCharCode(n.keyCode);if(/^[a-zA-Z0-9 ]+$/.test(l))return!0;n.preventDefault()}return(n,l)=>{const s=u("control"),f=u("field"),N=u("divider"),r=u("base-button"),b=u("base-buttons"),$=u("card-component"),D=u("modal-box");return d(),c(E,null,[o("div",H,[a($,{title:"Education Detail",icon:k(K)},{default:i(()=>[o("div",T,[a(f,{label:"Qualification *",help:e.finalSubmit&&v.value?v.value:""},{default:i(()=>[a(s,{modelValue:e.qualification,"onUpdate:modelValue":l[0]||(l[0]=t=>e.qualification=t),type:"text",name:"qualification",onKeypress:l[1]||(l[1]=t=>x(t)),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["help"]),a(f,{label:"College",help:e.finalSubmit&&h.value?h.value:""},{default:i(()=>[a(s,{modelValue:e.college,"onUpdate:modelValue":l[2]||(l[2]=t=>e.college=t),type:"text",name:"college",onKeypress:l[3]||(l[3]=t=>x(t)),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["help"]),a(f,{label:"City",help:e.finalSubmit&&C.value?C.value:""},{default:i(()=>[a(s,{modelValue:e.city,"onUpdate:modelValue":l[4]||(l[4]=t=>e.city=t),type:"text",name:"city",onKeypress:l[5]||(l[5]=t=>x(t)),maxlength:"30"},null,8,["modelValue"])]),_:1},8,["help"]),a(f,{label:"Passing Year",help:e.finalSubmit&&V.value?V.value:""},{default:i(()=>[a(s,{modelValue:e.passing_year,"onUpdate:modelValue":l[6]||(l[6]=t=>e.passing_year=t),type:"text",name:"passing_year",onKeypress:l[7]||(l[7]=t=>Y(t)),maxlength:"4"},null,8,["modelValue"])]),_:1},8,["help"])]),a(N),a(b,null,{default:i(()=>[a(r,{color:"themeColor",type:"button",label:"Submit",onClick:g(M,["prevent"])})]),_:1})]),_:1},8,["icon"])]),o("div",W,[o("table",null,[Z,G,o("tbody",null,[(d(!0),c(E,null,R(m.value.user.doctorEducation,(t,S)=>(d(),c("tr",{key:S},[o("td",J,_(S+1),1),o("td",O,_(t.qualification),1),o("td",X,_(t.college),1),o("td",ee,_(t.city),1),o("td",le,_(t.passingYear),1),t.proof?(d(),c("td",te,[o("img",{src:t.proof,class:"h-8"},null,8,oe)])):(d(),c("td",ae,ie)),o("td",se,[a(b,{type:"justify-center","no-wrap":""},{default:i(()=>[a(r,{color:"success",title:"Change Document",small:"",icon:k(P),onClick:g(L=>j(t.id,t.image),["prevent"])},null,8,["icon","onClick"]),a(r,{color:"danger",title:"Delete Education",icon:k(z),small:"",rounded:"",onClick:g(L=>w(t.id),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])]),a(D,{modelValue:m.value.deleteModal,"onUpdate:modelValue":l[10]||(l[10]=t=>m.value.deleteModal=t),title:"Delete Education"},{default:i(()=>[o("section",null,[re,a(b,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[a(r,{type:"button",color:"danger",small:"",label:"Yes",onClick:l[8]||(l[8]=g(t=>F(),["prevent"]))}),a(r,{type:"button",color:"info",small:"",label:"No",onClick:l[9]||(l[9]=g(t=>m.value.deleteModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),a(D,{modelValue:e.imgModal,"onUpdate:modelValue":l[13]||(l[13]=t=>e.imgModal=t),title:"Update Document"},{default:i(()=>[o("section",null,[o("div",ue,[o("input",{type:"file",name:"logo",accept:"image/png || image/jpg || image/jpeg",onChange:l[11]||(l[11]=t=>q(t)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),o("div",de,[e.logoImage?(d(),c("img",{key:0,class:"h-48 opacity-1",src:e.logoImage},null,8,ce)):I("",!0),e.logoImage?I("",!0):(d(),c("span",ge,"Upload Document"))])]),a(b,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[a(r,{type:"button",color:"danger",small:"",label:"Upload",onClick:g(U,["prevent"])}),a(r,{type:"button",color:"info",small:"",label:"Cancel",onClick:l[12]||(l[12]=g(t=>e.imgModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"])],64)}}};export{be as default};
