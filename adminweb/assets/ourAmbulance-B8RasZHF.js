import{e as b,c as se,z as de,j as y,k as c,l as m,y as a,m as n,A as s,u as _,F as T,I as ue,H as p,E as v,q as I,J as A,t as re,x as g}from"./@vue-bQO0P59g.js";import{a2 as ce,F,G as me,E as pe,M as fe}from"./@mdi-CZk6uuAL.js";import{b as ge}from"./vue-router-D5J0r3Gc.js";import{u as be}from"./vuex-DHdsu8jA.js";const ye={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},he={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},ve={class:"grid grid-cols-1 lg:grid-cols-1 gap-4"},_e={class:"mt-3 table-sec"},Ne=a("caption",null,null,-1),ke=a("thead",{class:"bg-blue dark:bg-gray-900/80 dark:backdrop-blur-md"},[a("tr",null,[a("th",null,"Sl.No."),a("th",null,"Name"),a("th",null,"Email"),a("th",null,"Contact Number"),a("th",null,"Plat Number"),a("th",null,"City"),a("th",null,"Pincode"),a("th",null,"Status"),a("th",{class:"text-center"},"Action")])],-1),Ce={"data-label":"Sl.No."},Ve={"data-label":"Name"},Ie={"data-label":"Email"},Ae={"data-label":"Contact Number"},De={"data-label":"Plat Number"},Se={"data-label":"City"},xe={"data-label":"Pincode"},Me={"data-label":"Status"},Le={"data-label":"Action",class:"actions-cell"},Ue={key:0},Pe={class:"flex justify-center"},we={class:"form-check form-check-inline"},Ee=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio10"},"PENDING",-1),je={class:"form-check form-check-inline"},Fe=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"ACTIVE",-1),Re={class:"form-check form-check-inline"},$e=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"DEACTIVE",-1),Te={class:"form-check form-check-inline"},ze=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"SUSPENDED",-1),Oe={class:"form-check form-check-inline"},Be=a("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"DELETED",-1),qe={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},Ke={class:"absolute flex justify-center items-center gap-2"},Ge=["src"],We={key:1,class:"text-center text-neutral-400 font-bold"},Ze={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},He={class:"absolute flex justify-center items-center gap-2"},Je=["src"],Qe={key:1,class:"text-center text-neutral-400 font-bold"},Xe={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},Ye={class:"absolute flex justify-center items-center gap-2"},el=["src"],ll={key:1,class:"text-center text-neutral-400 font-bold"},tl={key:0},al={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ol={key:0,class:"form-check form-check-inline"},nl=a("div",{class:"pb-4 font-medium"},"Aadhar Document",-1),il=["src"],sl={key:1,class:"form-check form-check-inline"},dl=a("div",{class:"pb-4 font-medium"},"License Document",-1),ul=["src"],rl={key:2,class:"form-check form-check-inline"},cl=a("div",{class:"pb-4 font-medium"},"Pan Document",-1),ml=["src"],hl={__name:"ourAmbulance",setup(pl){const z=/^([\w\.\+]{1,})([^\W])(@)([\w]{1,})(\.[\w]{1,})+$/,r=be();ge();const h=b(()=>r.state.Ambulance),e=se({id:null,editMode:!1,finalSubmit:!1,name:null,platNumber:null,contactNumber:null,altContactNumber:null,email:null,address:null,state:null,city:null,pincode:null,stateId:null,status:null,statusModal:!1,imgADModal:!1,logoADImage:null,logoADFile:null,imgLIModal:!1,logoLIImage:null,logoLIFile:null,imgPNModal:!1,logoPNImage:null,logoPNFile:null,showModal:!1,aadhar:null,license:null,pan:null});de(()=>{R("")});const R=o=>{r.dispatch("Ambulance/states",{limit:50,offset:0,search:o,status:!0})},O=o=>{e.stateId=o.id,$("")},$=o=>{r.dispatch("Ambulance/getCity",{limit:50,offset:0,search:o,status:!0,id:e.stateId})};function B(o){e.editMode=!0,e.id=o.id,e.name=o.name,e.platNumber=o.platNumber,e.contactNumber=o.contactNumber,e.altContactNumber=o.altContactNumber,e.email=o.email,e.address=o.address,e.state={id:o.state,name:o.state},e.city={id:o.city,name:o.city},e.pincode=o.pincode}const q=async()=>{var o,l,i,d,k,D;if(S.value||x.value||M.value||L.value||U.value||P.value||w.value||E.value){e.finalSubmit=!0;return}if(e.editMode){const u={id:e.id,name:e.name,platNumber:e.platNumber,contactNumber:e.contactNumber,altContactNumber:e.altContactNumber,email:e.email,address:e.address,state:(o=e.state)==null?void 0:o.name,city:(l=e.city)==null?void 0:l.name,pincode:e.pincode,ambulanceId:h.value.user.id,accountId:(i=h.value.user.account)==null?void 0:i.id};await r.dispatch("Ambulance/updateListAmbulance",u)}else{const u={name:e.name,platNumber:e.platNumber,contactNumber:e.contactNumber,altContactNumber:e.altContactNumber,email:e.email,address:e.address,state:(d=e.state)==null?void 0:d.name,city:(k=e.city)==null?void 0:k.name,pincode:e.pincode,ambulanceId:h.value.user.id,accountId:(D=h.value.user.account)==null?void 0:D.id};await r.dispatch("Ambulance/addListAmbulance",u)}e.name=null,e.platNumber=null,e.contactNumber=null,e.altContactNumber=null,e.email=null,e.address=null,e.state=null,e.city=null,e.pincode=null};function K(o,l){e.statusModal=!0,e.id=o,e.status=l}function G(){e.id&&r.dispatch("Ambulance/setAblistStatus",{id:e.id,status:e.status}),e.statusModal=!1}function W(o,l){e.imgADModal=!0,e.id=o,e.logoADImage=l}async function Z(o){if(o){const l=await o.target;if(l.files[0].type==="image/png"||l.files[0].type==="image/jpg"||l.files[0].type==="image/jpeg")if(l.files[0].size<=1e6){if(l.files){const i=new FileReader;i.onload=d=>{e.logoADImage=d.target.result},e.logoADFile=l.files[0],i.readAsDataURL(l.files[0])}}else r.dispatch("ErrorSuccess/error",{msg:"Image too big (max 1 Mb allowed)"});else r.dispatch("ErrorSuccess/error",{msg:"Upload image in png format."})}}function H(){e.logoADFile&&r.dispatch("Ambulance/updateAadharImage",{id:e.id,data:e.logoADFile}),e.imgADModal=!1}function J(o,l){e.imgLIModal=!0,e.id=o,e.logoLIImage=l}async function Q(o){if(o){const l=await o.target;if(l.files[0].type==="image/png"||l.files[0].type==="image/jpg"||l.files[0].type==="image/jpeg")if(l.files[0].size<=1e6){if(l.files){const i=new FileReader;i.onload=d=>{e.logoLIImage=d.target.result},e.logoLIFile=l.files[0],i.readAsDataURL(l.files[0])}}else r.dispatch("ErrorSuccess/error",{msg:"Image too big (max 1 Mb allowed)"});else r.dispatch("ErrorSuccess/error",{msg:"Upload image in png format."})}}function X(){e.logoLIFile&&r.dispatch("Ambulance/updateLicenseImage",{id:e.id,data:e.logoLIFile}),e.imgLIModal=!1}function Y(o,l){e.imgPNModal=!0,e.id=o,e.logoPNImage=l}async function ee(o){if(o){const l=await o.target;if(l.files[0].type==="image/png"||l.files[0].type==="image/jpg"||l.files[0].type==="image/jpeg")if(l.files[0].size<=1e6){if(l.files){const i=new FileReader;i.onload=d=>{e.logoPNImage=d.target.result},e.logoPNFile=l.files[0],i.readAsDataURL(l.files[0])}}else r.dispatch("ErrorSuccess/error",{msg:"Image too big (max 1 Mb allowed)"});else r.dispatch("ErrorSuccess/error",{msg:"Upload image in png format."})}}function le(){e.logoPNFile&&r.dispatch("Ambulance/updatePanImage",{id:e.id,data:e.logoPNFile}),e.imgPNModal=!1}function te(o,l,i,d){e.showModal=!0,e.id=o,e.aadhar=l,e.license=i,e.pan=d}const S=b(()=>{if(!e.name)return"Name required!"}),x=b(()=>{if(!e.email||!z.test(e.email))return"Invalid email!"}),M=b(()=>{if(!e.platNumber)return"Plat Number required!"}),L=b(()=>{if(e.contactNumber){if(e.contactNumber.length<10)return"Invalid contact no!"}else return"Contact no required!"}),U=b(()=>{if(e.altContactNumber&&e.altContactNumber.length<10)return"Invalid alt contact no!"}),P=b(()=>{if(!e.state)return"Select State!"}),w=b(()=>{if(!e.city)return"Select City!"}),E=b(()=>{if(e.pincode){if(e.pincode.length<6)return"Invalid pincode!"}else return"Pincode required!"});function ae(o){let l=String.fromCharCode(o.keyCode);if(/^[a-zA-Z0-9@.]+$/.test(l))return!0;o.preventDefault()}function j(o){let l=String.fromCharCode(o.keyCode);if(/^[0-9]+$/.test(l))return!0;o.preventDefault()}function oe(o){let l=String.fromCharCode(o.keyCode);if(/^[a-zA-Z ]+$/.test(l))return!0;o.preventDefault()}return(o,l)=>{const i=y("control"),d=y("field"),k=y("search-select"),D=y("divider"),u=y("base-button"),N=y("base-buttons"),ne=y("card-component"),ie=y("base-button-rounded"),C=y("modal-box");return c(),m(T,null,[a("div",ye,[n(ne,{title:"Our Ambulance Detail",icon:_(ce)},{default:s(()=>[a("div",he,[n(d,{label:"Name *",help:e.finalSubmit&&S.value?S.value:""},{default:s(()=>[n(i,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.name=t),type:"text",name:"Name",onKeypress:l[1]||(l[1]=t=>oe(t)),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["help"]),n(d,{label:"E-mail *",help:e.finalSubmit&&x.value?x.value:""},{default:s(()=>[n(i,{modelValue:e.email,"onUpdate:modelValue":l[2]||(l[2]=t=>e.email=t),type:"email",name:"email",onKeypress:l[3]||(l[3]=t=>ae(t)),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["help"]),n(d,{label:"Plat Number",help:e.finalSubmit&&M.value?M.value:""},{default:s(()=>[n(i,{modelValue:e.platNumber,"onUpdate:modelValue":l[4]||(l[4]=t=>e.platNumber=t),type:"text",name:"platNumber",maxlength:"6"},null,8,["modelValue"])]),_:1},8,["help"]),n(d,{label:"Contact Number *",help:e.finalSubmit&&L.value?L.value:""},{default:s(()=>[n(i,{modelValue:e.contactNumber,"onUpdate:modelValue":l[5]||(l[5]=t=>e.contactNumber=t),type:"text",name:"contactNumber",autocomplete:"Title",maxlength:"10",onKeypress:l[6]||(l[6]=t=>j(t))},null,8,["modelValue"])]),_:1},8,["help"]),n(d,{label:"Alternative Contact Number",help:e.finalSubmit&&U.value?U.value:""},{default:s(()=>[n(i,{modelValue:e.altContactNumber,"onUpdate:modelValue":l[7]||(l[7]=t=>e.altContactNumber=t),type:"text",name:"altContactNumber",autocomplete:"Title",maxlength:"10",onKeypress:l[8]||(l[8]=t=>j(t))},null,8,["modelValue"])]),_:1},8,["help"]),n(d,{label:"State",help:e.finalSubmit&&P.value?P.value:""},{default:s(()=>{var t;return[n(k,{modelValue:e.state,"onUpdate:modelValue":l[9]||(l[9]=f=>e.state=f),options:h.value.dataState,placeholder:(t=e.state)==null?void 0:t.name,onOnType:l[10]||(l[10]=f=>R(f)),onOnSelected:l[11]||(l[11]=f=>O(f))},null,8,["modelValue","options","placeholder"])]}),_:1},8,["help"]),n(d,{label:"City",help:e.finalSubmit&&w.value?w.value:""},{default:s(()=>{var t;return[n(k,{modelValue:e.city,"onUpdate:modelValue":l[12]||(l[12]=f=>e.city=f),options:h.value.dataCity,placeholder:(t=e.city)==null?void 0:t.name,onOnType:l[13]||(l[13]=f=>$(f))},null,8,["modelValue","options","placeholder"])]}),_:1},8,["help"]),n(d,{label:"Pincode",help:e.finalSubmit&&E.value?E.value:""},{default:s(()=>[n(i,{modelValue:e.pincode,"onUpdate:modelValue":l[14]||(l[14]=t=>e.pincode=t),type:"text",name:"pincode",onKeypress:l[15]||(l[15]=t=>j(t)),maxlength:"6"},null,8,["modelValue"])]),_:1},8,["help"])]),a("div",ve,[n(d,{label:"Address"},{default:s(()=>[n(i,{modelValue:e.address,"onUpdate:modelValue":l[16]||(l[16]=t=>e.address=t),type:"textarea",name:"address",maxlength:"250"},null,8,["modelValue"])]),_:1})]),n(D),n(N,null,{default:s(()=>[n(u,{color:"themeColor",type:"button",label:e.editMode?"Update":"Submit",onClick:p(q,["prevent"])},null,8,["label"])]),_:1})]),_:1},8,["icon"])]),a("div",_e,[a("table",null,[Ne,ke,a("tbody",null,[(c(!0),m(T,null,ue(h.value.user.ambulanceList,(t,f)=>(c(),m("tr",{key:f},[a("td",Ce,v(f+1),1),a("td",Ve,v(t.name),1),a("td",Ie,v(t.email),1),a("td",Ae,v(t.contactNumber),1),a("td",De,v(t.platNumber),1),a("td",Se,v(t.city),1),a("td",xe,v(t.pincode),1),a("td",Me,v(t.status),1),a("td",Le,[n(N,{type:"justify-start lg:justify-center","no-wrap":""},{default:s(()=>[n(u,{color:"success",title:"Upload Aadhar",small:"",rounded:"",icon:_(F),onClick:p(V=>W(t.id,t.aadhar),["prevent"])},null,8,["icon","onClick"]),n(u,{color:"orange",title:"Upload License",small:"",rounded:"",icon:_(F),onClick:p(V=>J(t.id,t.license),["prevent"])},null,8,["icon","onClick"]),n(u,{color:"teal",title:"Upload Pan",small:"",rounded:"",icon:_(F),onClick:p(V=>Y(t.id,t.pan),["prevent"])},null,8,["icon","onClick"]),n(ie,{icon:_(me),title:"Edit Ambulance Details",color:"purple",onClick:p(V=>B(t),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"]),n(u,{color:"info",icon:_(pe),title:"Change Status",small:"",rounded:"",onClick:p(V=>K(t.id,t.status),["prevent"])},null,8,["icon","onClick"]),n(u,{color:"info",icon:_(fe),title:"View Documents",small:"",rounded:"",onClick:p(V=>te(t.id,t.aadhar,t.license,t.pan),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])]),n(C,{modelValue:e.statusModal,"onUpdate:modelValue":l[22]||(l[22]=t=>e.statusModal=t),title:"Ambulance Status"},{default:s(()=>[e.id?(c(),m("section",Ue,[a("div",Pe,[a("div",we,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[17]||(l[17]=t=>e.status=t),value:"PENDING"},null,512),[[A,e.status]]),Ee]),a("div",je,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[18]||(l[18]=t=>e.status=t),value:"ACTIVE"},null,512),[[A,e.status]]),Fe]),a("div",Re,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[19]||(l[19]=t=>e.status=t),value:"DEACTIVE"},null,512),[[A,e.status]]),$e]),a("div",Te,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[20]||(l[20]=t=>e.status=t),value:"SUSPENDED"},null,512),[[A,e.status]]),ze]),a("div",Oe,[I(a("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[21]||(l[21]=t=>e.status=t),value:"DELETED"},null,512),[[A,e.status]]),Be])]),n(N,{type:"justify-center lg:justify-center pt-5"},{default:s(()=>[h.value.loaderNew?g("",!0):(c(),re(u,{key:0,type:"button",color:"info",small:"",label:"Change Status",onClick:p(G,["prevent"])}))]),_:1})])):g("",!0)]),_:1},8,["modelValue"]),n(C,{modelValue:e.imgADModal,"onUpdate:modelValue":l[25]||(l[25]=t=>e.imgADModal=t),title:"Update Aadhar Document"},{default:s(()=>[a("section",null,[a("div",qe,[a("input",{type:"file",name:"logo",accept:"image/png || image/jpg || image/jpeg",onChange:l[23]||(l[23]=t=>Z(t)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),a("div",Ke,[e.logoADImage?(c(),m("img",{key:0,class:"h-48 opacity-1",src:e.logoADImage},null,8,Ge)):g("",!0),e.logoADImage?g("",!0):(c(),m("span",We,"Upload"))])]),n(N,{type:"justify-center lg:justify-center pt-5"},{default:s(()=>[n(u,{type:"button",color:"danger",small:"",label:"Upload",onClick:p(H,["prevent"])}),n(u,{type:"button",color:"info",small:"",label:"Cancel",onClick:l[24]||(l[24]=p(t=>e.imgADModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),n(C,{modelValue:e.imgLIModal,"onUpdate:modelValue":l[28]||(l[28]=t=>e.imgLIModal=t),title:"Update License Document"},{default:s(()=>[a("section",null,[a("div",Ze,[a("input",{type:"file",name:"logo",accept:"image/png || image/jpg || image/jpeg",onChange:l[26]||(l[26]=t=>Q(t)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),a("div",He,[e.logoLIImage?(c(),m("img",{key:0,class:"h-48 opacity-1",src:e.logoLIImage},null,8,Je)):g("",!0),e.logoLIImage?g("",!0):(c(),m("span",Qe,"Upload"))])]),n(N,{type:"justify-center lg:justify-center pt-5"},{default:s(()=>[n(u,{type:"button",color:"danger",small:"",label:"Upload",onClick:p(X,["prevent"])}),n(u,{type:"button",color:"info",small:"",label:"Cancel",onClick:l[27]||(l[27]=p(t=>e.imgLIModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),n(C,{modelValue:e.imgPNModal,"onUpdate:modelValue":l[31]||(l[31]=t=>e.imgPNModal=t),title:"Update Pan Document"},{default:s(()=>[a("section",null,[a("div",Xe,[a("input",{type:"file",name:"logo",accept:"image/png || image/jpg || image/jpeg",onChange:l[29]||(l[29]=t=>ee(t)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),a("div",Ye,[e.logoPNImage?(c(),m("img",{key:0,class:"h-48 opacity-1",src:e.logoPNImage},null,8,el)):g("",!0),e.logoPNImage?g("",!0):(c(),m("span",ll,"Upload"))])]),n(N,{type:"justify-center lg:justify-center pt-5"},{default:s(()=>[n(u,{type:"button",color:"danger",small:"",label:"Upload",onClick:p(le,["prevent"])}),n(u,{type:"button",color:"info",small:"",label:"Cancel",onClick:l[30]||(l[30]=p(t=>e.imgPNModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),n(C,{modelValue:e.showModal,"onUpdate:modelValue":l[32]||(l[32]=t=>e.showModal=t),title:"Documents",width:"w-3/5"},{default:s(()=>[e.id?(c(),m("section",tl,[a("div",al,[e.aadhar?(c(),m("div",ol,[nl,a("img",{src:e.aadhar,class:"w-full"},null,8,il)])):g("",!0),e.license?(c(),m("div",sl,[dl,a("img",{src:e.license,class:"w-full"},null,8,ul)])):g("",!0),e.pan?(c(),m("div",rl,[cl,a("img",{src:e.pan,class:"w-full"},null,8,ml)])):g("",!0)])])):g("",!0)]),_:1},8,["modelValue"])],64)}}};export{hl as default};
