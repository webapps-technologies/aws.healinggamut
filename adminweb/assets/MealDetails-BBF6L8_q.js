import{e as b,c as te,z as se,j as m,k as c,l as f,m as a,A as r,F as P,y as t,B as h,E as i,u as T,I as le,H as v,x as _,t as F}from"./@vue-bQO0P59g.js";import{K as ae,N as oe}from"./@mdi-CZk6uuAL.js";import{h as de}from"./moment-Cl4UOzQZ.js";import{b as ie}from"./vue-router-D5J0r3Gc.js";import{u as ne}from"./vuex-DHdsu8jA.js";const re={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},ce={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 pb-6"},ue={for:"Name",class:"font-semibold text-slate-800 dark:text-white"},me=t("span",{class:"text-slate-400/[0.9]"},"Meal Name : ",-1),fe={for:"Address",class:"font-semibold text-slate-800 dark:text-white"},pe=t("span",{class:"text-slate-400/[0.9]"},"Price : ",-1),_e={for:"State",class:"font-semibold text-slate-800 dark:text-white"},ge=t("span",{class:"text-slate-400/[0.9]"},"Discount : ",-1),he={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 pb-6"},be={for:"City",class:"font-semibold text-slate-800 dark:text-white"},ye=t("span",{class:"text-slate-400/[0.9]"},"Ratting : ",-1),xe={for:"Pincode",class:"font-semibold text-slate-800 dark:text-white col-span-2"},ve=t("span",{class:"text-slate-400/[0.9]"},"Short Description : ",-1),ke={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},Ae={for:"Pincode",class:"font-semibold text-slate-800 dark:text-white"},Se=t("span",{class:"text-slate-400/[0.9]"},"Description : ",-1),we={class:"grid grid-cols-1 lg:grid-cols-1 gap-6 border"},Me={class:"mt-3 px-6 table-sec"},Ve={key:0},Ie=t("caption",null,null,-1),Ce=t("thead",{class:"bg-white dark:bg-gray-900/80 dark:backdrop-blur-md"},[t("tr",null,[t("th",null,"Sl.No."),t("th",null,"State Name"),t("th",null,"City Name"),t("th",null,"Area Name"),t("th",null,"Pincode"),t("th",null,"Address"),t("th",{class:"lg:flex lg:justify-center"},"Action")])],-1),De={"data-label":"Sr.No"},Ne={"data-label":"state"},je={"data-label":"city"},Le={"data-label":"area"},Ue={"data-label":"pincode"},Oe={"data-label":"address"},Ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6 new-table"},Pe={class:"flex justify-right md:block"},Te={key:0,for:"Labtest Status"},Fe=t("span",{class:"text-indigo-500 font-semibold"},"Status :",-1),Be={class:"font-semibold pl-2 text-green-400"},Ye={key:1,for:"Labtest Status"},Re=t("span",{class:"text-indigo-500 font-semibold"},"Status : ",-1),ze={class:"font-semibold pl-2 text-red-400"},He={key:2,for:"Labtest Status"},$e=t("span",{class:"text-indigo-500 font-semibold"},"Status : ",-1),qe={class:"font-semibold pl-2 text-yellow-600"},Ge={class:"mr-6 mb-3 last:mr-0 font-semibold text-slate-800 dark:text-white"},Ke=t("span",{class:"text-indigo-500"},"Created At :",-1),Je={class:"control-label ml-1"},Qe=t("br",null,null,-1),We={class:"mr-6 mb-3 last:mr-0 font-semibold text-slate-800 dark:text-white"},Xe=t("span",{class:"text-indigo-500"},"Updated At :",-1),Ze={class:"control-label ml-1"},et={class:"grid grid-cols-1 lg:grid-cols-3 gap-2"},tt={class:"grid grid-cols-1 lg:grid-cols-1 gap-2"},st={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},lt={class:"absolute flex justify-center items-center gap-2"},at=["src"],ot={key:1,class:"text-center text-neutral-400 font-bold"},dt=t("p",{class:"text-slate-600 dark:text-white/75 pb-5 text-xl flex justify-center"}," Are you sure, you want to Delete ? ",-1),pt={__name:"MealDetails",setup(it){const n=ne(),w=ie(),d=b(()=>n.state.Meals),k=b(()=>n.state.Location),e=te({limit:10,offset:0,keyword:"",status:!0,submit:!1,id:null,mealId:null,addressModel:!1,imgModal:!1,deleteModelStatus:!1,addressId:null,state:null,city:null,area:null,address:null,selectStateId:null,selectCityId:null,image:null,imageFile:null});se(()=>{w.query.id&&(e.mealId=w.query.id,B(e.mealId),Y())});const B=l=>{n.dispatch("Meals/getOneMeals",{id:l})};function Y(){n.dispatch("Location/getState",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status})}function R(l){l&&n.dispatch("Location/getState",{limit:e.limit,offset:e.offset,keyword:l,status:e.status})}function z(l){l.id&&(e.selectStateId=l.id,n.dispatch("Location/getCity",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status,stateId:l.id}))}function H(l){var s;e.state?n.dispatch("Location/getCity",{limit:e.limit,offset:e.offset,keyword:l,status:e.status,stateId:(s=e.state)==null?void 0:s.id}):n.dispatch("Alert/error",{msg:"Please Select State"})}function $(l){l.id&&n.dispatch("Location/getArea",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status,cityId:l.id})}function q(l){var s;e.state&&e.city?n.dispatch("Location/getArea",{limit:e.limit,offset:e.offset,keyword:l,status:e.status,cityId:(s=e.city)==null?void 0:s.id}):n.dispatch("Alert/error",{msg:"Please Select City"})}function G(){var l,s,u;if(V.value||I.value||C.value){e.submit=!0;return}e.submit=!1,n.dispatch("Meals/saveOneMealAddress",{address:e.address,cityId:(l=e.city)==null?void 0:l.id,areaId:(s=e.area)==null?void 0:s.id,stateId:(u=e.state)==null?void 0:u.id,mealId:e.mealId}),e.addressModel=!1}function M(l){return l?de(l).format("MMM Do YYYY hh:mm A"):"-"}function K(l){e.deleteModelStatus=!0,e.addressId=l}function J(){n.dispatch("Meals/saveOneMealsAddressDelete",{id:e.addressId}),e.deleteModelStatus=!1}function Q(){e.addressModel=!0,e.state=null,e.city=null,e.area=null,e.address=null}async function W(l){if(l){const s=await l.target;if(s.files[0].type==="image/png"||s.files[0].type==="image/jpg"||s.files[0].type==="image/jpeg")if(s.files[0].size<=1e6){if(s.files){const u=new FileReader;u.onload=p=>{e.image=p.target.result},e.imageFile=s.files[0],u.readAsDataURL(s.files[0])}}else n.dispatch("Alert/error",{msg:"Image too big (max 1 Mb allowed)"});else n.dispatch("Alert/error",{msg:"Upload image in png format."})}}function X(){e.imageFile&&(n.dispatch("Meals/saveOneHotelImage",{mealId:e.mealId,file:e.imageFile}),e.imgModal=!1)}const V=b(()=>{var l;if(!((l=e.state)!=null&&l.id))return"Select State!"}),I=b(()=>{var l;if(!((l=e.city)!=null&&l.id))return"Select City!"}),C=b(()=>{var l;if(!((l=e.area)!=null&&l.id))return"Select area!"});return(l,s)=>{const u=m("new-card"),p=m("base-button"),y=m("base-buttons"),Z=m("card-component"),D=m("main-section"),A=m("search-select"),x=m("field"),ee=m("control"),S=m("modal-box");return c(),f(P,null,[a(D,null,{default:r(()=>[t("div",re,[a(u,{title:"Meal Details"},{default:r(()=>[t("div",ce,[t("label",ue,[me,h(i(d.value.name),1)]),t("label",fe,[pe,h(i(d.value.price),1)]),t("label",_e,[ge,h(i(d.value.discount)+"%",1)])]),t("div",he,[t("label",be,[ye,h(i(d.value.rating),1)]),t("label",xe,[ve,h(i(d.value.shortDesc),1)])]),t("div",ke,[t("label",Ae,[Se,h(i(d.value.desc),1)])])]),_:1}),t("div",we,[a(Z,{class:"mb-6",title:"Address",onHeaderIconClicked:Q,headerIcon:T(ae),iconText:"Add Address","has-table":""},{default:r(()=>{var o,N;return[t("div",Me,[((o=d.value.mealAddress)==null?void 0:o.length)>0?(c(),f("table",Ve,[Ie,Ce,t("tbody",null,[(c(!0),f(P,null,le(d.value.mealAddress,(g,j)=>{var L,U,O,E;return c(),f("tr",{key:j},[t("td",De,i(j+1),1),t("td",Ne,i((L=g.state)==null?void 0:L.name),1),t("td",je,i((U=g.city)==null?void 0:U.name),1),t("td",Le,i((O=g.area)==null?void 0:O.name),1),t("td",Ue,i((E=g.area)==null?void 0:E.pincode),1),t("td",Oe,i(g.address),1),t("td",null,[a(y,{type:"justify-start lg:justify-center","no-wrap":""},{default:r(()=>[a(p,{type:"button",title:"Delete Address",color:"danger",icon:T(oe),small:"",rounded:"",onClick:v(nt=>K(g.id),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])])}),128))])])):_("",!0)]),((N=d.value.mealAddress)==null?void 0:N.length)<=0?(c(),F(u,{key:0,empty:""})):_("",!0)]}),_:1},8,["headerIcon"])])])]),_:1}),a(D,null,{default:r(()=>[t("div",Ee,[a(u,{title:"Dates"},{default:r(()=>[t("div",Pe,[d.value.status=="ACTIVE"?(c(),f("label",Te,[Fe,t("span",Be,i(d.value.status),1)])):_("",!0),d.value.status=="PENDING"?(c(),f("label",Ye,[Re,t("span",ze,i(d.value.status),1)])):_("",!0),d.value.status=="DEACTIVE"?(c(),f("label",He,[$e,t("span",qe,i(d.value.status),1)])):_("",!0)]),t("label",Ge,[Ke,t("span",Je,i(M(d.value.createdAt)),1)]),Qe,t("label",We,[Xe,t("span",Ze,i(M(d.value.updatedAt)),1)])]),_:1})]),a(S,{modelValue:e.addressModel,"onUpdate:modelValue":s[4]||(s[4]=o=>e.addressModel=o),title:"Add Address"},{default:r(()=>[t("div",et,[a(x,{label:"State *",help:e.submit?V.value:""},{default:r(()=>[a(A,{modelValue:e.state,"onUpdate:modelValue":s[0]||(s[0]=o=>e.state=o),options:k.value.stateData,onOnType:R,onOnSelected:z},null,8,["modelValue","options"])]),_:1},8,["help"]),a(x,{label:"City *",help:e.submit?I.value:""},{default:r(()=>[a(A,{modelValue:e.city,"onUpdate:modelValue":s[1]||(s[1]=o=>e.city=o),options:k.value.cityData,onOnType:H,onOnSelected:$},null,8,["modelValue","options"])]),_:1},8,["help"]),a(x,{label:"Area *",help:e.submit?C.value:""},{default:r(()=>[a(A,{modelValue:e.area,"onUpdate:modelValue":s[2]||(s[2]=o=>e.area=o),options:k.value.areaData,onOnType:q},null,8,["modelValue","options"])]),_:1},8,["help"])]),t("div",tt,[a(x,{label:"Address"},{default:r(()=>[a(ee,{modelValue:e.address,"onUpdate:modelValue":s[3]||(s[3]=o=>e.address=o),type:"textarea",name:"address",autocomplete:"address",placeholder:"Enter Address"},null,8,["modelValue"])]),_:1})]),a(y,{type:"justify-center lg:justify-center pt-5"},{default:r(()=>[d.value.loaderNew?_("",!0):(c(),F(p,{key:0,type:"button",color:"info",small:"",label:"Submit",onClick:v(G,["prevent"])}))]),_:1})]),_:1},8,["modelValue"]),a(S,{modelValue:e.imgModal,"onUpdate:modelValue":s[7]||(s[7]=o=>e.imgModal=o),title:"Add Image"},{default:r(()=>[t("section",null,[t("div",st,[t("input",{type:"file",id:"image_input",name:"logo",accept:"image/*",onChange:s[5]||(s[5]=o=>W(o)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),t("div",lt,[e.image?(c(),f("img",{key:0,class:"h-48 opacity-1",src:e.image},null,8,at)):_("",!0),e.image?_("",!0):(c(),f("span",ot,"Upload Image"))])]),a(y,{type:"justify-center lg:justify-center pt-5"},{default:r(()=>[a(p,{type:"button",color:"danger",small:"",label:"Upload",onClick:v(X,["prevent"])}),a(p,{type:"button",color:"info",small:"",label:"Cancel",onClick:s[6]||(s[6]=v(o=>e.imgModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),a(S,{modelValue:e.deleteModelStatus,"onUpdate:modelValue":s[9]||(s[9]=o=>e.deleteModelStatus=o),title:"Address delete confirmation",class:"backdrop-blur-sm"},{default:r(()=>[dt,a(y,{class:"flex justify-center"},{default:r(()=>[a(p,{onClick:J,color:"danger",small:"",label:"Yes"}),a(p,{onClick:s[8]||(s[8]=o=>e.deleteModelStatus=!1),color:"info",small:"",label:"No"})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{pt as default};
