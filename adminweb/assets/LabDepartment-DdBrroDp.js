import{e as x,c as K,z as O,j as d,k as n,l as r,m as o,A as i,H as c,B as k,y as a,u as C,F as P,I as q,E as I,x as m,t as M,q as L,J as j}from"./@vue-bQO0P59g.js";import{K as J,E as Z,S as G}from"./@mdi-CZk6uuAL.js";import{u as Q}from"./vuex-DHdsu8jA.js";import{u as W}from"./vue-router-D5J0r3Gc.js";import"./export-from-json-BvevaQwb.js";const X={class:"grid grid-cols-1 lg:grid-cols-1 gap-6 new-table"},Y={class:"mt-3 table-sec"},ee={key:0},te=a("thead",null,[a("tr",null,[a("th",null,"Sl.No."),a("th",null,"Department Name"),a("th",null,"Department Status"),a("th",{class:"text-center"},"Actions")])],-1),ae={"data-label":"Sr.No"},le={"data-label":"Name"},oe={key:0,"data-label":"Status",class:"text-green-500 font-bold"},se={key:1,"data-label":"Status",class:"text-rose-500 font-bold"},ne={class:"actions-cell"},ie={key:0,class:"flex justify-center items-center"},re=a("div",{class:"spinner-dual-ring"},[a("div",{class:"ldio"},[a("div"),a("div",null,[a("div")])])],-1),de=[re],ue={key:0},ce={class:"flex justify-center"},me={class:"form-check flex items-center"},pe={class:"form-check-label inline-block items-center text-gray-800 cursor-pointer dark:text-slate-300 mr-2"},fe={class:"form-check form-check-inline"},ge={class:"form-check-label inline-block items-center text-gray-800 cursor-pointer dark:text-slate-300 mr-2"},be={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},_e={class:"absolute flex justify-center items-center gap-2"},ye=["src"],he={key:1,class:"text-center text-neutral-400 font-bold"},xe={__name:"LabDepartment",setup(ve){const u=Q();W();const p=x(()=>u.state.LabDepartment),e=K({submit:!1,limit:10,offset:0,search:"",status:"ACTIVE",statusChange:"ACTIVE",editMode:!1,cModal:!1,id:null,name:null,statusModal:!1,imgModal:!1,logoImage:null,logoFile:null});O(()=>{y(e.limit,e.offset,e.search,e.status)});function y(s,t,f,g){u.dispatch("LabDepartment/all",{limit:s,offset:t,search:f,status:g})}function A(){e.offset=e.offset+e.limit,y(e.limit,e.offset,e.search,e.status)}function E(){e.cModal=!0,e.editMode=!1,e.id=null,e.name=null,e.name_hn=null,e.name_bn=null}function S(s,t){e.cModal=!0,e.editMode=!0,e.id=s,e.name=t}async function w(){if(h.value)return e.submit=!0,null;e.submit=!1,e.editMode?(await u.dispatch("LabDepartment/update",{id:e.id,label:e.name,status:"ACTIVE"}),e.cModal=!1):(await u.dispatch("LabDepartment/save",{label:e.name,status:"ACTIVE"}),e.cModal=!1),y(e.limit,e.offset,e.search,e.status),e.cModal=!1}function N(s,t){e.statusModal=!0,e.id=s,e.status=t}function U(){e.id&&u.dispatch("LabDepartment/setStatus",{id:e.id,status:e.status}),e.statusModal=!1}async function T(s){if(s){const t=await s.target;if(t.files[0].type==="image/png"||t.files[0].type==="image/jpg"||t.files[0].type==="image/jpeg")if(t.files[0].size<=1e6){if(t.files){const f=new FileReader;f.onload=g=>{e.logoImage=g.target.result},e.logoFile=t.files[0],f.readAsDataURL(t.files[0])}}else u.dispatch("Alert/error",{msg:"Image too big (max 1 Mb allowed)"});else u.dispatch("Alert/error",{msg:"Upload image in png format."})}}function F(){e.logoFile&&u.dispatch("LabDepartment/updateLogo",{id:e.id,file:e.logoFile}),y(e.limit,e.offset,e.search,e.status),e.imgModal=!1}const h=x(()=>e.name?null:"Enter Department Name!");function $(s){let t=String.fromCharCode(s.keyCode);if(/^[a-zA-Z ]+$/.test(t))return!0;s.preventDefault()}return(s,t)=>{const f=d("hero-bar"),g=d("base-button-rounded"),b=d("base-buttons"),V=d("card-component"),_=d("base-button"),B=d("main-section"),R=d("control"),z=d("field"),v=d("modal-box");return n(),r("section",null,[o(f,null,{default:i(()=>[k("Lab Department")]),_:1}),o(B,null,{default:i(()=>[a("div",X,[o(V,{class:"mb-6",title:"List",onHeaderIconClicked:t[0]||(t[0]=l=>E()),headerIcon:C(J),iconText:"Add New Department","has-table":""},{default:i(()=>[a("div",Y,[p.value.data.length>0?(n(),r("table",ee,[te,a("tbody",null,[(n(!0),r(P,null,q(p.value.data,(l,D)=>(n(),r("tr",{key:D},[a("td",ae,I(D+1),1),a("td",le,I(l.label),1),l.status=="ACTIVE"?(n(),r("td",oe,"Active")):(n(),r("td",se,"Deactive")),a("td",ne,[o(b,{type:"justify-start lg:justify-center","no-wrap":""},{default:i(()=>[o(g,{icon:C(Z),title:"Change Status",color:"info",onClick:c(H=>N(l.id,l.status),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"]),o(g,{icon:C(G),title:"Edit Category",color:"purple",onClick:c(H=>S(l.id,l.label),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])):m("",!0)]),p.value.data.length<=0?(n(),M(V,{key:0,empty:""})):m("",!0)]),_:1},8,["headerIcon"])]),p.value.dataLoader?(n(),r("div",ie,de)):m("",!0),p.value.loadMore&&!p.value.dataLoader?(n(),M(b,{key:1,type:"justify-center lg:justify-center"},{default:i(()=>[o(_,{type:"button",color:"themeColor",label:"Load More",onClick:t[1]||(t[1]=c(l=>A(),["prevent"]))})]),_:1})):m("",!0)]),_:1}),o(v,{modelValue:e.cModal,"onUpdate:modelValue":t[4]||(t[4]=l=>e.cModal=l),title:e.editMode?"Update Department":"Add Department",form:"",onSubmit:t[5]||(t[5]=c(l=>s.onSubmit(),["prevent"]))},{default:i(()=>[a("section",null,[o(z,{label:"Department Name *",class:"mr-2",help:e.submit&&h.value?h.value:""},{default:i(()=>[o(R,{modelValue:e.name,"onUpdate:modelValue":t[2]||(t[2]=l=>e.name=l),type:"text",name:"name",autocomplete:"Name",placeholder:"Enter Department Name",onKeypress:t[3]||(t[3]=l=>$(l)),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["help"]),o(b,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[o(_,{type:"button",color:"themeColor",small:"",label:"Submit",onClick:c(w,["prevent"]),effect:""})]),_:1})])]),_:1},8,["modelValue","title"]),o(v,{modelValue:e.statusModal,"onUpdate:modelValue":t[8]||(t[8]=l=>e.statusModal=l),title:"Department Status"},{default:i(()=>[e.id?(n(),r("section",ue,[a("div",ce,[a("div",me,[a("label",pe,[L(a("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[6]||(t[6]=l=>e.status=l),value:"ACTIVE"},null,512),[[j,e.status]]),k(" ACTIVE")])]),a("div",fe,[a("label",ge,[L(a("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[7]||(t[7]=l=>e.status=l),value:"DEACTIVE"},null,512),[[j,e.status]]),k(" DEACTIVE")])])]),o(b,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[p.value.loaderNew?m("",!0):(n(),M(_,{key:0,color:"info",onClick:c(U,["prevent"]),type:"button",label:"Submit",effect:""}))]),_:1})])):m("",!0)]),_:1},8,["modelValue"]),o(v,{modelValue:e.imgModal,"onUpdate:modelValue":t[11]||(t[11]=l=>e.imgModal=l),title:"Update Logo"},{default:i(()=>[a("section",null,[a("div",be,[a("input",{type:"file",name:"logo",accept:"image/png || image/jpg || image/jpeg",onChange:t[9]||(t[9]=l=>T(l)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),a("div",_e,[e.logoImage?(n(),r("img",{key:0,class:"h-48 opacity-1",src:e.logoImage},null,8,ye)):m("",!0),e.logoImage?m("",!0):(n(),r("span",he,"Upload Logo"))])]),o(b,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[o(_,{type:"button",color:"danger",small:"",label:"Upload",onClick:c(F,["prevent"])}),o(_,{type:"button",color:"info",small:"",label:"Cancel",onClick:t[10]||(t[10]=c(l=>e.imgModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"])])}}};export{xe as default};
