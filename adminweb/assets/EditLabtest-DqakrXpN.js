import{e as r,c as Y,z,j as p,k,l as F,m as a,A as s,y as R,t as H,H as U,x as $}from"./@vue-bQO0P59g.js";import{u as j}from"./vuex-DHdsu8jA.js";import{b as G,u as J}from"./vue-router-D5J0r3Gc.js";const Q={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},X={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},ae={__name:"EditLabtest",setup(Z){const T=[{id:"Test",label:"Test"},{id:"Panel",label:"Panel"},{id:"Package",label:"Package"},{id:"Pin Master",label:"Pin Master"}],q=[{id:"No",label:"No"},{id:"Yes",label:"Yes"}],d=j(),v=G(),w=J(),e=r(()=>d.state.LabTest),L=r(()=>d.state.Category),N=r(()=>d.state.LabDepartment),o=Y({submit:!1,updateId:"",offered:null,limit:10,offset:0,keyword:"",status:"VERIFIED"});async function W(){var i,t,u;if(h.value||c.value||y.value||D.value||V.value||b.value||f.value||g.value||C.value||_.value)return o.submit=!0,null;o.submit=!1,await d.dispatch("LabTest/update",{id:o.updateId,title:e.value.title,labCategory:(i=e.value.labCategory)==null?void 0:i.label,labDepartment:(t=e.value.labDepartment)==null?void 0:t.label,price:e.value.price,discount:e.value.discount,discountPrice:e.value.discountPrice,reportWithin:e.value.reportWithin,shortDesc:e.value.shortDesc,desc:e.value.desc,type:e.value.type.id,homeCollection:e.value.homeCollection.id,laboratoryId:(u=e.value.laboratory)==null?void 0:u.id})}z(()=>{I(),B(o.limit,o.offset,o.keyword,o.status),K(o.limit,o.offset,o.keyword,o.status),A(o.limit,o.offset,o.keyword,o.status)});async function I(){v.query.id&&(o.updateId=v.query.id,await d.dispatch("LabTest/getOneLabtest",{id:v.query.id}))}async function B(i,t,u,n){await d.dispatch("LabTest/getAllLab",{limit:i,offset:t,keyword:u,status:n})}function K(i,t,u,n){d.dispatch("Category/all",{limit:i,offset:t,search:u,status:n})}function A(i,t,u,n){d.dispatch("LabDepartment/all",{limit:i,offset:t,search:u,status:n})}const h=r(()=>{if(!e.value.title)return"Title Required."}),c=r(()=>{if(!e.value.price)return"Price Required."}),b=r(()=>{if(e.value.shortDesc){if(e.value.shortDesc.length>50)return"Please enter maximum 50 characters"}else return"Required."}),f=r(()=>{if(!e.value.desc)return"Required."}),V=r(()=>{if(!e.value.reportWithin)return"Report With in Required."}),y=r(()=>{if(!e.value.discount)return"Discount Required."}),_=r(()=>{if(!e.value.laboratory)return"Laboratory Required."}),g=r(()=>{if(!e.value.labDepartment)return"Department Required."}),D=r(()=>{if(!e.value.discountPrice)return"Required."}),C=r(()=>{if(!e.value.labCategory)return"Category Required."});function m(i){let t=String.fromCharCode(i.keyCode);if(/^[0-9]+$/.test(t))return!0;i.preventDefault()}function x(i,t){let u=i*t/100,n=i-u;e.value.discountPrice=n}function E(){w.go(-1)}return(i,t)=>{const u=p("control"),n=p("field"),P=p("base-button"),M=p("base-buttons"),O=p("new-card"),S=p("main-section");return k(),F("section",null,[a(S,null,{default:s(()=>[a(O,{title:"Update Labtest",class:"mb-6"},{default:s(()=>[R("div",Q,[a(n,{label:"Test Name *",help:h.value},{default:s(()=>[a(u,{modelValue:e.value.title,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.title=l),type:"text",name:"title",autocomplete:"Title"},null,8,["modelValue"])]),_:1},8,["help"]),a(n,{label:"Category",help:o.submit&&C.value?C.value:""},{default:s(()=>[a(u,{modelValue:e.value.labCategory,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.labCategory=l),options:L.value.data,class:"coll-span-2"},null,8,["modelValue","options"])]),_:1},8,["help"]),a(n,{label:"Department",help:o.submit&&g.value?g.value:""},{default:s(()=>[a(u,{modelValue:e.value.labDepartment,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.labDepartment=l),options:N.value.data},null,8,["modelValue","options"])]),_:1},8,["help"]),a(n,{label:"Price *",help:o.submit&&c.value?c.value:""},{default:s(()=>[a(u,{modelValue:e.value.price,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.price=l),type:"text",name:"price",autocomplete:"Title",onKeypress:t[4]||(t[4]=l=>m(l)),onKeyup:t[5]||(t[5]=l=>x(l.target.value,e.value.discount)),maxlength:"5"},null,8,["modelValue"])]),_:1},8,["help"]),a(n,{label:"Discount (%) *",help:o.submit&&y.value?y.value:""},{default:s(()=>[a(u,{modelValue:e.value.discount,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.discount=l),type:"text",name:"discount",autocomplete:"Title",onKeypress:t[7]||(t[7]=l=>m(l)),onKeyup:t[8]||(t[8]=l=>x(e.value.price,l.target.value)),maxlength:"2"},null,8,["modelValue"])]),_:1},8,["help"]),a(n,{label:"Discount Price *",help:o.submit&&D.value?D.value:""},{default:s(()=>[a(u,{modelValue:e.value.discountPrice,"onUpdate:modelValue":t[9]||(t[9]=l=>e.value.discountPrice=l),type:"text",name:"discountPrice",autocomplete:"Title",onKeypress:t[10]||(t[10]=l=>m(l)),disabled:!0},null,8,["modelValue"])]),_:1},8,["help"]),a(n,{label:"Report With In",help:o.submit&&V.value?V.value:""},{default:s(()=>[a(u,{modelValue:e.value.reportWithin,"onUpdate:modelValue":t[11]||(t[11]=l=>e.value.reportWithin=l),type:"text",name:"reportWithin",autocomplete:"reportWithin",onKeypress:t[12]||(t[12]=l=>m(l)),maxlength:"3"},null,8,["modelValue"])]),_:1},8,["help"]),a(n,{label:"Short Description",help:o.submit&&b.value?b.value:""},{default:s(()=>[a(u,{modelValue:e.value.shortDesc,"onUpdate:modelValue":t[13]||(t[13]=l=>e.value.shortDesc=l),type:"text",name:"shortDesc",autocomplete:"shortDesc",maxlength:"250"},null,8,["modelValue"])]),_:1},8,["help"]),a(n,{label:"Description",help:o.submit&&f.value?f.value:""},{default:s(()=>[a(u,{modelValue:e.value.desc,"onUpdate:modelValue":t[14]||(t[14]=l=>e.value.desc=l),type:"textarea",name:"desc",autocomplete:"desc",maxlength:"500"},null,8,["modelValue"])]),_:1},8,["help"]),a(n,{label:"Test Type"},{default:s(()=>[a(u,{modelValue:e.value.type,"onUpdate:modelValue":t[15]||(t[15]=l=>e.value.type=l),options:T},null,8,["modelValue"])]),_:1}),a(n,{label:"Home Collection"},{default:s(()=>[a(u,{modelValue:e.value.homeCollection,"onUpdate:modelValue":t[16]||(t[16]=l=>e.value.homeCollection=l),options:q},null,8,["modelValue"])]),_:1}),a(n,{label:"Lab"},{default:s(()=>[a(u,{modelValue:e.value.laboratory,"onUpdate:modelValue":t[17]||(t[17]=l=>e.value.laboratory=l),options:e.value.labData},null,8,["modelValue","options"])]),_:1})]),R("div",X,[a(M,null,{default:s(()=>[e.value.loaderNew?$("",!0):(k(),H(P,{key:0,type:"button",onClick:U(W,["prevent"]),color:"themeColor",label:"Update"})),a(P,{color:"themeColor",label:"Back",outline:"",onClick:t[18]||(t[18]=U(l=>E(),["prevent"]))})]),_:1})])]),_:1})]),_:1})])}}};export{ae as default};
