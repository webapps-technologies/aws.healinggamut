import{e as B,c as G,z as q,j as m,k as n,l as i,m as l,A as d,B as k,y as a,F as H,I as J,E as p,x as r,u as v,H as g,t as I,q as E,J as x}from"./@vue-bQO0P59g.js";import{M as K,E as Q,S as W,F as X}from"./@mdi-CZk6uuAL.js";import{u as Y}from"./vue-router-D5J0r3Gc.js";import{u as Z}from"./vuex-DHdsu8jA.js";const tt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},et={class:"grid grid-cols-1 lg:grid-cols-1 gap-6 new-table"},at={class:"mt-3 px-6 table-sec"},ot={key:0},st=a("thead",{class:"bg-white dark:bg-gray-900/80 dark:backdrop-blur-md"},[a("tr",null,[a("th",null,"Sl.No."),a("th",null,"Image"),a("th",null,"Name"),a("th",null,"Address"),a("th",null,"Pincode"),a("th",null,"Created"),a("th",null,"Status"),a("th",{class:"text-center"},"Actions")])],-1),lt={"data-label":"Sr.No"},nt={key:0,"data-label":"image"},it=["src"],dt={key:1,"data-label":"image"},rt=a("img",{src:"https://kreditstorage.b-cdn.net/logo/noimage.png",class:"h-8"},null,-1),ut=[rt],ct={"data-label":"Name"},mt={"data-label":"Address"},pt={"data-label":"Pincode"},gt={"data-label":"Created"},ft={"data-label":"Status"},_t={key:0,class:"text-green-500 font-bold"},ht={key:1,class:"text-rose-500 font-bold"},yt={key:2,class:"text-yellow-600 font-bold"},bt={class:"actions-cell"},kt={key:0,class:"flex justify-center items-center"},vt=a("div",{class:"spinner-dual-ring"},[a("div",{class:"ldio"},[a("div"),a("div",null,[a("div")])])],-1),Ct=[vt],Vt={key:0},It={class:"flex justify-center"},Et={class:"form-check form-check-inline"},xt={class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2 cursor-pointer"},Mt={class:"form-check form-check-inline"},Ut={class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2 cursor-pointer"},Nt={class:"form-check form-check-inline"},At={class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2 cursor-pointer"},wt={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},Dt={class:"absolute flex justify-center items-center gap-2"},jt=["src"],St={key:1,class:"text-center text-neutral-400 font-bold"},Lt={__name:"ActiveOrganization",setup(Ot){const _=Z(),D=Y(),f=B(()=>_.state.Organization),C=[{id:"ACTIVE",name:"ACTIVE"},{id:"DEACTIVE",name:"DEACTIVE"},{id:"PENDING",name:"PENDING"}],t=G({limit:10,offset:0,search:"",status:C[0],statusChange:C[0],statusUpdate:null,id:null,statusModal:!1,imgModal:!1,logoImage:null,imageFile:null});q(()=>{var s;y(t.limit,t.offset,t.search,(s=t.status)==null?void 0:s.id)});function y(s,e,u,h){_.dispatch("Organization/all",{limit:s,offset:e,search:u,status:h})}function j(){var s;t.offset=t.offset+t.limit,y(t.limit,t.offset,t.search,(s=t.status)==null?void 0:s.id)}function S(s){var e,u;s.length>2?y(t.limit,0,s,(e=t.status)==null?void 0:e.id):s.length<=0&&y(t.limit,0,t.search,(u=t.status)==null?void 0:u.id)}function O(){var s;y(t.limit,0,t.search,(s=t.statusChange)==null?void 0:s.id)}function M(s,e){D.push({path:s,query:{id:e}})}function z(s){if(s){const e=new Date(s).toString().split(" ");return e[2]+" "+e[1]+", "+e[3]}return"-"}function T(s,e){t.statusModal=!0,t.id=s,t.statusUpdate=e}function P(){t.id&&_.dispatch("Organization/setOrgStatus",{id:t.id,status:t.statusUpdate}),t.statusModal=!1}function F(s,e){t.imgModal=!0,t.id=s,t.logoImage=e}async function L(s){if(s){const e=await s.target;if(e.files[0].type==="image/png"||e.files[0].type==="image/jpg"||e.files[0].type==="image/jpeg")if(e.files[0].size<=1e6){if(e.files){const u=new FileReader;u.onload=h=>{t.logoImage=h.target.result},t.imageFile=e.files[0],u.readAsDataURL(e.files[0])}}else _.dispatch("Alart/error",{msg:"Image too big (max 1 Mb allowed)"});else _.dispatch("Alart/error",{msg:"Upload image in png format."})}}function R(){t.imageFile&&(_.dispatch("Organization/setOrgImage",{id:t.id,file:t.imageFile}),t.imgModal=!1)}return(s,e)=>{const u=m("hero-bar"),h=m("control"),$=m("field"),U=m("main-section"),c=m("base-button"),b=m("base-buttons"),N=m("new-card"),A=m("modal-box");return n(),i("section",null,[l(u,null,{default:d(()=>[k("Clinic/ Hospital")]),_:1}),l(U,null,{default:d(()=>[a("div",tt,[l(h,{modelValue:t.search,"onUpdate:modelValue":e[0]||(e[0]=o=>t.search=o),onKeyup:e[1]||(e[1]=o=>S(o.target.value)),type:"text",placeholder:"Search by : Name or Pincode"},null,8,["modelValue"]),l($,null,{default:d(()=>[l(h,{modelValue:t.statusChange,"onUpdate:modelValue":e[2]||(e[2]=o=>t.statusChange=o),onChange:e[3]||(e[3]=o=>O()),options:C},null,8,["modelValue"])]),_:1})])]),_:1}),l(U,null,{default:d(()=>[a("div",et,[l(N,{class:"mb-6",title:"List","has-table":""},{default:d(()=>[a("div",at,[f.value.data.length>0?(n(),i("table",ot,[st,a("tbody",null,[(n(!0),i(H,null,J(f.value.data,(o,w)=>(n(),i("tr",{key:w},[a("td",lt,p(w+1),1),o.image1?(n(),i("td",nt,[a("img",{src:o.image1,class:"h-8 w-14"},null,8,it)])):(n(),i("td",dt,ut)),a("td",ct,p(o.name),1),a("td",mt,p(o.address),1),a("td",pt,p(o.pincode),1),a("td",gt,p(z(o.createdAt)),1),a("td",ft,[o.status==="ACTIVE"?(n(),i("span",_t,p(o.status),1)):r("",!0),o.status==="DEACTIVE"?(n(),i("span",ht,p(o.status),1)):r("",!0),o.status==="PENDING"?(n(),i("span",yt,p(o.status),1)):r("",!0)]),a("td",bt,[l(b,{type:"justify-start lg:justify-center","no-wrap":""},{default:d(()=>[l(c,{color:"info",title:"View",icon:v(K),small:"",rounded:"",onClick:g(V=>M("/vorganization",o.id),["prevent"])},null,8,["icon","onClick"]),l(c,{type:"button",title:"Change Status",color:"info",icon:v(Q),small:"",rounded:"",onClick:g(V=>T(o.id,o.status),["prevent"])},null,8,["icon","onClick"]),l(c,{color:"info",icon:v(W),title:"Edit Organization",small:"",rounded:"",onClick:g(V=>M("/eorganization",o.id),["prevent"])},null,8,["icon","onClick"]),l(c,{color:"success",title:"Change Image",small:"",rounded:"",icon:v(X),onClick:g(V=>F(o.id,o.image1),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])):r("",!0)]),f.value.data.length<=0?(n(),I(N,{key:0,empty:""})):r("",!0)]),_:1})]),f.value.dataLoader?(n(),i("div",kt,Ct)):r("",!0),f.value.loadMore&&!f.value.dataLoader?(n(),I(b,{key:1,type:"justify-center lg:justify-center"},{default:d(()=>[l(c,{type:"button",color:"info",label:"Load More",onClick:e[4]||(e[4]=g(o=>j(),["prevent"]))})]),_:1})):r("",!0)]),_:1}),l(A,{modelValue:t.statusModal,"onUpdate:modelValue":e[8]||(e[8]=o=>t.statusModal=o),title:"Organization status"},{default:d(()=>[t.id?(n(),i("section",Vt,[a("div",It,[a("div",Et,[a("label",xt,[E(a("input",{class:"form-check-input ml-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":e[5]||(e[5]=o=>t.statusUpdate=o),value:"ACTIVE"},null,512),[[x,t.statusUpdate]]),k(" ACTIVE ")])]),a("div",Mt,[a("label",Ut,[E(a("input",{class:"form-check-input ml-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":e[6]||(e[6]=o=>t.statusUpdate=o),value:"DEACTIVE"},null,512),[[x,t.statusUpdate]]),k(" DEACTIVE")])]),a("div",Nt,[a("label",At,[E(a("input",{class:"form-check-input ml-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":e[7]||(e[7]=o=>t.statusUpdate=o),value:"PENDING"},null,512),[[x,t.statusUpdate]]),k(" PENDING")])])]),l(b,{type:"justify-center lg:justify-center pt-5"},{default:d(()=>[f.value.loaderNew?r("",!0):(n(),I(c,{key:0,type:"button",color:"info",small:"",label:"Change Status",onClick:g(P,["prevent"])}))]),_:1})])):r("",!0)]),_:1},8,["modelValue"]),l(A,{modelValue:t.imgModal,"onUpdate:modelValue":e[11]||(e[11]=o=>t.imgModal=o),title:"Update Image"},{default:d(()=>[a("section",null,[a("div",wt,[a("input",{type:"file",name:"logo",id:"image_input",accept:"image/*",onChange:e[9]||(e[9]=o=>L(o)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),a("div",Dt,[t.logoImage?(n(),i("img",{key:0,class:"h-48 opacity-1",src:t.logoImage},null,8,jt)):r("",!0),t.logoImage?r("",!0):(n(),i("span",St,"Upload Image"))])]),l(b,{type:"justify-center lg:justify-center pt-5"},{default:d(()=>[l(c,{type:"button",color:"danger",small:"",label:"Upload",onClick:g(R,["prevent"])}),l(c,{type:"button",color:"info",small:"",label:"Cancel",onClick:e[10]||(e[10]=g(o=>t.imgModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"])])}}};export{Lt as default};
