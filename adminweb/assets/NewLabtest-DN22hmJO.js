import{e as r,c as Y,z as H,j as d,k as x,l as O,m as o,A as u,y as m,H as L,t as U,x as W}from"./@vue-bQO0P59g.js";import{u as j}from"./vue-router-D5J0r3Gc.js";import{u as F}from"./vuex-DHdsu8jA.js";const Z={class:"grid grid-cols-1 lg:grid-cols-1"},G={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},J={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 py-2"},Q={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},oe={__name:"NewLabtest",setup(X){const w=[{id:"Test",label:"Test"},{id:"Panel",label:"Panel"},{id:"Package",label:"Package"},{id:"Pin Master",label:"Pin Master"}],R=[{id:"No",label:"No"},{id:"Yes",label:"Yes"}],s=F(),N=j(),c=r(()=>s.state.LabTest),q=r(()=>s.state.Category),S=r(()=>s.state.LabDepartment),e=Y({submit:!1,limit:10,offset:0,keyword:"",status:"VERIFIED",title:null,labCategory:null,labDepartment:null,price:null,discount:null,discountPrice:null,reportWithin:null,shortDesc:null,desc:null,type:w[0],homeCollection:R[0],laboratory:null});H(()=>{A(e.limit,e.offset,e.keyword,e.status),B(e.limit,e.offset,e.keyword,e.status),K(e.limit,e.offset,e.keyword,e.status)});async function A(i,t,a,n){await s.dispatch("LabTest/getAllLab",{limit:i,offset:t,keyword:a,status:n})}function B(i,t,a,n){s.dispatch("Category/all",{limit:i,offset:t,search:a,status:n})}function K(i,t,a,n){s.dispatch("LabDepartment/all",{limit:i,offset:t,search:a,status:n})}async function _(){var i,t,a;if(b.value||f.value||g.value||C.value||v.value||y.value||V.value||h.value||P.value||D.value)return e.submit=!0,null;e.submit=!1,await s.dispatch("LabTest/save",{title:e.title,labCategory:(i=e.labCategory)==null?void 0:i.label,labDepartment:(t=e.labDepartment)==null?void 0:t.label,price:e.price,discount:e.discount,discountPrice:e.discountPrice,reportWithin:e.reportWithin,shortDesc:e.shortDesc,desc:e.desc,type:e.type.id,homeCollection:e.homeCollection.id,laboratoryId:(a=e.laboratory)==null?void 0:a.id})}const b=r(()=>{if(!e.title)return"Title Required."}),f=r(()=>{if(!e.price)return"Price Required."}),y=r(()=>{if(e.shortDesc){if(e.shortDesc.length>50)return"Please enter maximum 50 characters"}else return"Required."}),V=r(()=>{if(!e.desc)return"Required."}),v=r(()=>{if(!e.reportWithin)return"Report With in Required."}),g=r(()=>{if(!e.discount)return"Discount Required."}),D=r(()=>{if(!e.laboratory)return"Laboratory Required."}),h=r(()=>{if(!e.labDepartment)return"Department Required."}),C=r(()=>{if(!e.discountPrice)return"Required."}),P=r(()=>{if(!e.labCategory)return"Category Required."});function I(i){let t=String.fromCharCode(i.keyCode);if(/^[a-zA-Z ]+$/.test(t))return!0;i.preventDefault()}function p(i){let t=String.fromCharCode(i.keyCode);if(/^[0-9]+$/.test(t))return!0;i.preventDefault()}function T(i,t){let a=i*t/100,n=i-a;e.discountPrice=n}function M(){N.go(-1)}return(i,t)=>{const a=d("control"),n=d("field"),k=d("base-button"),$=d("base-buttons"),z=d("new-card"),E=d("main-section");return x(),O("section",null,[o(E,null,{default:u(()=>[m("div",Z,[o(z,{title:"Add Lab Test",form:"",onSubmit:t[20]||(t[20]=L(l=>_(),["prevent"]))},{default:u(()=>[m("div",G,[o(n,{label:"Test Name *",help:e.submit&&b.value?b.value:""},{default:u(()=>[o(a,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=l=>e.title=l),type:"text",name:"title",autocomplete:"Title",onKeypress:t[1]||(t[1]=l=>I(l)),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["help"]),o(n,{label:"Category",help:e.submit&&P.value?P.value:""},{default:u(()=>[o(a,{modelValue:e.labCategory,"onUpdate:modelValue":t[2]||(t[2]=l=>e.labCategory=l),options:q.value.data,class:"coll-span-2"},null,8,["modelValue","options"])]),_:1},8,["help"]),o(n,{label:"Department",help:e.submit&&h.value?h.value:""},{default:u(()=>[o(a,{modelValue:e.labDepartment,"onUpdate:modelValue":t[3]||(t[3]=l=>e.labDepartment=l),options:S.value.data},null,8,["modelValue","options"])]),_:1},8,["help"]),o(n,{label:"Price *",help:e.submit&&f.value?f.value:""},{default:u(()=>[o(a,{modelValue:e.price,"onUpdate:modelValue":t[4]||(t[4]=l=>e.price=l),type:"text",name:"price",autocomplete:"Title",onKeypress:t[5]||(t[5]=l=>p(l)),onKeyup:t[6]||(t[6]=l=>T(l.target.value,e.discount)),maxlength:"5"},null,8,["modelValue"])]),_:1},8,["help"]),o(n,{label:"Discount (%) *",help:e.submit&&g.value?g.value:""},{default:u(()=>[o(a,{modelValue:e.discount,"onUpdate:modelValue":t[7]||(t[7]=l=>e.discount=l),type:"text",name:"discount",autocomplete:"Title",onKeypress:t[8]||(t[8]=l=>p(l)),onKeyup:t[9]||(t[9]=l=>T(e.price,l.target.value))},null,8,["modelValue"])]),_:1},8,["help"]),o(n,{label:"Discount Price *",help:e.submit&&C.value?C.value:""},{default:u(()=>[o(a,{modelValue:e.discountPrice,"onUpdate:modelValue":t[10]||(t[10]=l=>e.discountPrice=l),type:"text",name:"discountPrice",autocomplete:"Title",onKeypress:t[11]||(t[11]=l=>p(l)),disabled:!0},null,8,["modelValue"])]),_:1},8,["help"]),o(n,{label:"Report With In",help:e.submit&&v.value?v.value:""},{default:u(()=>[o(a,{modelValue:e.reportWithin,"onUpdate:modelValue":t[12]||(t[12]=l=>e.reportWithin=l),type:"text",name:"reportWithin",autocomplete:"reportWithin",onKeypress:t[13]||(t[13]=l=>p(l)),maxlength:"3"},null,8,["modelValue"])]),_:1},8,["help"]),o(n,{label:"Short Description",help:e.submit&&y.value?y.value:""},{default:u(()=>[o(a,{modelValue:e.shortDesc,"onUpdate:modelValue":t[14]||(t[14]=l=>e.shortDesc=l),type:"text",name:"shortDesc",autocomplete:"shortDesc",maxlength:"250"},null,8,["modelValue"])]),_:1},8,["help"]),o(n,{label:"Description",help:e.submit&&V.value?V.value:""},{default:u(()=>[o(a,{modelValue:e.desc,"onUpdate:modelValue":t[15]||(t[15]=l=>e.desc=l),type:"textarea",name:"desc",autocomplete:"desc",maxlength:"500"},null,8,["modelValue"])]),_:1},8,["help"])]),m("div",J,[o(n,{label:"Test Type"},{default:u(()=>[o(a,{modelValue:e.type,"onUpdate:modelValue":t[16]||(t[16]=l=>e.type=l),options:w},null,8,["modelValue"])]),_:1}),o(n,{label:"Home Collection"},{default:u(()=>[o(a,{modelValue:e.homeCollection,"onUpdate:modelValue":t[17]||(t[17]=l=>e.homeCollection=l),options:R},null,8,["modelValue"])]),_:1}),o(n,{label:"Lab",help:e.submit&&D.value?D.value:""},{default:u(()=>[o(a,{modelValue:e.laboratory,"onUpdate:modelValue":t[18]||(t[18]=l=>e.laboratory=l),options:c.value.labData},null,8,["modelValue","options"])]),_:1},8,["help"])]),m("div",Q,[o($,null,{default:u(()=>[c.value.loaderNew?(x(),U(k,{key:0,color:"themeColor",type:"button",label:"Wait...",disabled:""})):W("",!0),c.value.loaderNew?W("",!0):(x(),U(k,{key:1,color:"info",type:"submit",label:"Submit",effect:""})),o(k,{color:"themeColor",type:"button",label:"Back",onClick:t[19]||(t[19]=L(l=>M(),["prevent"]))})]),_:1})])]),_:1})])]),_:1})])}}};export{oe as default};
