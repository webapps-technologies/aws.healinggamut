import{e as c,c as H,j as d,k as g,l as V,y as n,m as o,A as u,u as B,F as x,I as K,H as A,E as m}from"./@vue-bQO0P59g.js";import{a2 as L,G as M}from"./@mdi-CZk6uuAL.js";import{b as $}from"./vue-router-D5J0r3Gc.js";import{u as Z}from"./vuex-DHdsu8jA.js";const j={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},R={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},z={class:"mt-3 table-sec"},G=n("caption",null,null,-1),P=n("thead",{class:"bg-blue dark:bg-gray-900/80 dark:backdrop-blur-md"},[n("tr",null,[n("th",null,"Sl.No."),n("th",null,"Bank Name"),n("th",null,"Account Number"),n("th",null,"Holder Name"),n("th",null,"Branch Name"),n("th",null,"IFSC"),n("th",{class:"text-center"},"Action")])],-1),W={"data-label":"Sl.No."},q={"data-label":"Bank Name"},J={"data-label":"Account Number"},O={"data-label":"Holder Name"},Q={"data-label":"Branch Name"},T={"data-label":"IFSC"},X={class:"actions-cell"},oe={__name:"bank",setup(Y){const i=Z();$();const b=c(()=>i.state.Laboratory),e=H({id:null,editMode:!1,finalSubmit:!1,bankName:null,branchName:null,holderName:null,accountNumber:null,ifsc:null});function E(l,a,r,s,v,y){e.editMode=!0,e.id=l,e.bankName=a,e.accountNumber=r,e.holderName=s,e.branchName=v,e.ifsc=y}const I=async()=>{var l,a;if(N.value||f.value||p.value||h.value||_.value){e.finalSubmit=!0;return}if(e.editMode){const r={id:e.id,bankName:e.bankName,branchName:e.branchName,holderName:e.holderName,accountNumber:e.accountNumber,ifsc:e.ifsc,accountId:(l=b.value.user.account)==null?void 0:l.id};await i.dispatch("Laboratory/updateBank",r)}else{const r={bankName:e.bankName,branchName:e.branchName,holderName:e.holderName,accountNumber:e.accountNumber,ifsc:e.ifsc,accountId:(a=b.value.user.account)==null?void 0:a.id};await i.dispatch("Laboratory/addBank",r)}e.bankName=null,e.branchName=null,e.holderName=null,e.accountNumber=null,e.ifsc=null},N=c(()=>{if(!e.bankName)return"Enter Bank Name!"}),f=c(()=>{if(!e.branchName)return"Enter Branch Name!"}),p=c(()=>{if(!e.holderName)return"Enter Holder Name!"}),h=c(()=>{if(!e.accountNumber)return"Enter Account Number!"}),_=c(()=>{const l=/^[A-Z]{4}0[A-Z0-9]{6}$/;if(e.ifsc){if(!l.test(e.ifsc))return"Enter valid IFSC Code."}else return"Enter IFSC Code!"});function F(l){let a=String.fromCharCode(l.keyCode);if(/^[0-9]+$/.test(a))return!0;l.preventDefault()}function k(l){let a=String.fromCharCode(l.keyCode);if(/^[a-zA-Z ]+$/.test(a))return!0;l.preventDefault()}function D(l){let a=String.fromCharCode(l.keyCode);if(/^[A-Z0-9]+$/.test(a))return!0;l.preventDefault()}return(l,a)=>{const r=d("control"),s=d("field"),v=d("divider"),y=d("base-button"),S=d("base-buttons"),U=d("card-component"),w=d("base-button-rounded");return g(),V(x,null,[n("div",j,[o(U,{title:"Bank Detail",icon:B(L)},{default:u(()=>[n("div",R,[o(s,{label:"Bank Name *",help:e.finalSubmit&&N.value?N.value:""},{default:u(()=>[o(r,{modelValue:e.bankName,"onUpdate:modelValue":a[0]||(a[0]=t=>e.bankName=t),type:"text",name:"bank_name",onKeypress:a[1]||(a[1]=t=>k(t)),maxlength:"30"},null,8,["modelValue"])]),_:1},8,["help"]),o(s,{label:"Branch Name",help:e.finalSubmit&&f.value?f.value:""},{default:u(()=>[o(r,{modelValue:e.branchName,"onUpdate:modelValue":a[2]||(a[2]=t=>e.branchName=t),type:"text",name:"branch_name",onKeypress:a[3]||(a[3]=t=>k(t)),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["help"]),o(s,{label:"Holder Name",help:e.finalSubmit&&p.value?p.value:""},{default:u(()=>[o(r,{modelValue:e.holderName,"onUpdate:modelValue":a[4]||(a[4]=t=>e.holderName=t),type:"text",name:"holder_name",onKeypress:a[5]||(a[5]=t=>k(t)),maxlength:"30"},null,8,["modelValue"])]),_:1},8,["help"]),o(s,{label:"Account Number",help:e.finalSubmit&&h.value?h.value:""},{default:u(()=>[o(r,{modelValue:e.accountNumber,"onUpdate:modelValue":a[6]||(a[6]=t=>e.accountNumber=t),type:"text",name:"account_number",onKeypress:a[7]||(a[7]=t=>F(t)),maxlength:"18"},null,8,["modelValue"])]),_:1},8,["help"]),o(s,{label:"IFSC",help:e.finalSubmit&&_.value?_.value:""},{default:u(()=>[o(r,{modelValue:e.ifsc,"onUpdate:modelValue":a[8]||(a[8]=t=>e.ifsc=t),type:"text",name:"ifsc",onKeypress:a[9]||(a[9]=t=>D(t)),maxlength:"11"},null,8,["modelValue"])]),_:1},8,["help"])]),o(v),o(S,null,{default:u(()=>[o(y,{color:"themeColor",type:"button",label:e.editMode?"Update":"Submit",onClick:A(I,["prevent"])},null,8,["label"])]),_:1})]),_:1},8,["icon"])]),n("div",z,[n("table",null,[G,P,n("tbody",null,[(g(!0),V(x,null,K(b.value.user.account.bankAccount,(t,C)=>(g(),V("tr",{key:C},[n("td",W,m(C+1),1),n("td",q,m(t.bankName),1),n("td",J,m(t.accountNumber),1),n("td",O,m(t.holderName),1),n("td",Q,m(t.branchName),1),n("td",T,m(t.ifsc),1),n("td",X,[o(S,{type:"justify-start lg:justify-center","no-wrap":""},{default:u(()=>[o(w,{icon:B(M),title:"Edit Bank Details",color:"purple",onClick:A(ee=>E(t.id,t.bankName,t.accountNumber,t.holderName,t.branchName,t.ifsc),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])])],64)}}};export{oe as default};
