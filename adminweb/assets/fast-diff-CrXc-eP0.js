var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function B(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var n=function g(){return this instanceof g?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(g){var i=Object.getOwnPropertyDescriptor(r,g);Object.defineProperty(n,g,i.get?i:{enumerable:!0,get:function(){return r[g]}})}),n}var f=-1,j=1,D=0;function I(r,e,n,g){if(r===e)return r?[[D,r]]:[];if(n!=null){var i=Z(r,e,n);if(i)return i}var a=Q(r,e),l=r.substring(0,a);r=r.substring(a),e=e.substring(a),a=U(r,e);var h=r.substring(r.length-a);r=r.substring(0,r.length-a),e=e.substring(0,e.length-a);var t=V(r,e);return l&&t.unshift([D,l]),h&&t.push([D,h]),z(t,g),t}function V(r,e){var n;if(!r)return[[j,e]];if(!e)return[[f,r]];var g=r.length>e.length?r:e,i=r.length>e.length?e:r,a=g.indexOf(i);if(a!==-1)return n=[[j,g.substring(0,a)],[D,i],[j,g.substring(a+i.length)]],r.length>e.length&&(n[0][0]=n[2][0]=f),n;if(i.length===1)return[[f,r],[j,e]];var l=X(r,e);if(l){var h=l[0],t=l[1],c=l[2],u=l[3],v=l[4],w=I(h,c),A=I(t,u);return w.concat([[D,v]],A)}return W(r,e)}function W(r,e){for(var n=r.length,g=e.length,i=Math.ceil((n+g)/2),a=i,l=2*i,h=new Array(l),t=new Array(l),c=0;c<l;c++)h[c]=-1,t[c]=-1;h[a+1]=0,t[a+1]=0;for(var u=n-g,v=u%2!==0,w=0,A=0,_=0,E=0,F=0;F<i;F++){for(var s=-F+w;s<=F-A;s+=2){var b=a+s,o;s===-F||s!==F&&h[b-1]<h[b+1]?o=h[b+1]:o=h[b-1]+1;for(var m=o-s;o<n&&m<g&&r.charAt(o)===e.charAt(m);)o++,m++;if(h[b]=o,o>n)A+=2;else if(m>g)w+=2;else if(v){var p=a+u-s;if(p>=0&&p<l&&t[p]!==-1){var M=n-t[p];if(o>=M)return G(r,e,o,m)}}}for(var O=-F+_;O<=F-E;O+=2){var p=a+O,M;O===-F||O!==F&&t[p-1]<t[p+1]?M=t[p+1]:M=t[p-1]+1;for(var R=M-O;M<n&&R<g&&r.charAt(n-M-1)===e.charAt(g-R-1);)M++,R++;if(t[p]=M,M>n)E+=2;else if(R>g)_+=2;else if(!v){var b=a+u-O;if(b>=0&&b<l&&h[b]!==-1){var o=h[b],m=a+o-b;if(M=n-M,o>=M)return G(r,e,o,m)}}}}return[[f,r],[j,e]]}function G(r,e,n,g){var i=r.substring(0,n),a=e.substring(0,g),l=r.substring(n),h=e.substring(g),t=I(i,a),c=I(l,h);return t.concat(c)}function Q(r,e){if(!r||!e||r.charAt(0)!==e.charAt(0))return 0;for(var n=0,g=Math.min(r.length,e.length),i=g,a=0;n<i;)r.substring(a,i)==e.substring(a,i)?(n=i,a=n):g=i,i=Math.floor((g-n)/2+n);return H(r.charCodeAt(i-1))&&i--,i}function U(r,e){if(!r||!e||r.slice(-1)!==e.slice(-1))return 0;for(var n=0,g=Math.min(r.length,e.length),i=g,a=0;n<i;)r.substring(r.length-i,r.length-a)==e.substring(e.length-i,e.length-a)?(n=i,a=n):g=i,i=Math.floor((g-n)/2+n);return J(r.charCodeAt(r.length-i))&&i--,i}function X(r,e){var n=r.length>e.length?r:e,g=r.length>e.length?e:r;if(n.length<4||g.length*2<n.length)return null;function i(A,_,E){for(var F=A.substring(E,E+Math.floor(A.length/4)),s=-1,b="",o,m,p,M;(s=_.indexOf(F,s+1))!==-1;){var O=Q(A.substring(E),_.substring(s)),R=U(A.substring(0,E),_.substring(0,s));b.length<R+O&&(b=_.substring(s-R,s)+_.substring(s,s+O),o=A.substring(0,E-R),m=A.substring(E+O),p=_.substring(0,s-R),M=_.substring(s+O))}return b.length*2>=A.length?[o,m,p,M,b]:null}var a=i(n,g,Math.ceil(n.length/4)),l=i(n,g,Math.ceil(n.length/2)),h;if(!a&&!l)return null;l?a?h=a[4].length>l[4].length?a:l:h=l:h=a;var t,c,u,v;r.length>e.length?(t=h[0],c=h[1],u=h[2],v=h[3]):(u=h[0],v=h[1],t=h[2],c=h[3]);var w=h[4];return[t,c,u,v,w]}function z(r,e){r.push([D,""]);for(var n=0,g=0,i=0,a="",l="",h;n<r.length;){if(n<r.length-1&&!r[n][1]){r.splice(n,1);continue}switch(r[n][0]){case j:i++,l+=r[n][1],n++;break;case f:g++,a+=r[n][1],n++;break;case D:var t=n-i-g-1;if(e){if(t>=0&&N(r[t][1])){var c=r[t][1].slice(-1);if(r[t][1]=r[t][1].slice(0,-1),a=c+a,l=c+l,!r[t][1]){r.splice(t,1),n--;var u=t-1;r[u]&&r[u][0]===j&&(i++,l=r[u][1]+l,u--),r[u]&&r[u][0]===f&&(g++,a=r[u][1]+a,u--),t=u}}if(K(r[n][1])){var c=r[n][1].charAt(0);r[n][1]=r[n][1].slice(1),a+=c,l+=c}}if(n<r.length-1&&!r[n][1]){r.splice(n,1);break}if(a.length>0||l.length>0){a.length>0&&l.length>0&&(h=Q(l,a),h!==0&&(t>=0?r[t][1]+=l.substring(0,h):(r.splice(0,0,[D,l.substring(0,h)]),n++),l=l.substring(h),a=a.substring(h)),h=U(l,a),h!==0&&(r[n][1]=l.substring(l.length-h)+r[n][1],l=l.substring(0,l.length-h),a=a.substring(0,a.length-h)));var v=i+g;a.length===0&&l.length===0?(r.splice(n-v,v),n=n-v):a.length===0?(r.splice(n-v,v,[j,l]),n=n-v+1):l.length===0?(r.splice(n-v,v,[f,a]),n=n-v+1):(r.splice(n-v,v,[f,a],[j,l]),n=n-v+2)}n!==0&&r[n-1][0]===D?(r[n-1][1]+=r[n][1],r.splice(n,1)):n++,i=0,g=0,a="",l="";break}}r[r.length-1][1]===""&&r.pop();var w=!1;for(n=1;n<r.length-1;)r[n-1][0]===D&&r[n+1][0]===D&&(r[n][1].substring(r[n][1].length-r[n-1][1].length)===r[n-1][1]?(r[n][1]=r[n-1][1]+r[n][1].substring(0,r[n][1].length-r[n-1][1].length),r[n+1][1]=r[n-1][1]+r[n+1][1],r.splice(n-1,1),w=!0):r[n][1].substring(0,r[n+1][1].length)==r[n+1][1]&&(r[n-1][1]+=r[n+1][1],r[n][1]=r[n][1].substring(r[n+1][1].length)+r[n+1][1],r.splice(n+1,1),w=!0)),n++;w&&z(r,e)}function H(r){return r>=55296&&r<=56319}function J(r){return r>=56320&&r<=57343}function K(r){return J(r.charCodeAt(0))}function N(r){return H(r.charCodeAt(r.length-1))}function Y(r){for(var e=[],n=0;n<r.length;n++)r[n][1].length>0&&e.push(r[n]);return e}function S(r,e,n,g){return N(r)||K(g)?null:Y([[D,r],[f,e],[j,n],[D,g]])}function Z(r,e,n){var g=typeof n=="number"?{index:n,length:0}:n.oldRange,i=typeof n=="number"?null:n.newRange,a=r.length,l=e.length;if(g.length===0&&(i===null||i.length===0)){var h=g.index,t=r.slice(0,h),c=r.slice(h),u=i?i.index:null;r:{var v=h+l-a;if(u!==null&&u!==v||v<0||v>l)break r;var w=e.slice(0,v),A=e.slice(v);if(A!==c)break r;var _=Math.min(h,v),E=t.slice(0,_),F=w.slice(0,_);if(E!==F)break r;var s=t.slice(_),b=w.slice(_);return S(E,s,b,c)}r:{if(u!==null&&u!==h)break r;var o=h,w=e.slice(0,o),A=e.slice(o);if(w!==t)break r;var m=Math.min(a-o,l-o),p=c.slice(c.length-m),M=A.slice(A.length-m);if(p!==M)break r;var s=c.slice(0,c.length-m),b=A.slice(0,A.length-m);return S(t,s,b,p)}}if(g.length>0&&i&&i.length===0)r:{var E=r.slice(0,g.index),p=r.slice(g.index+g.length),_=E.length,m=p.length;if(l<_+m)break r;var F=e.slice(0,_),M=e.slice(l-m);if(E!==F||p!==M)break r;var s=r.slice(_,a-m),b=e.slice(_,l-m);return S(E,s,b,p)}return null}function P(r,e,n){return I(r,e,n,!0)}P.INSERT=j;P.DELETE=f;P.EQUAL=D;var L=P;export{B as a,$ as c,L as d,y as g};
