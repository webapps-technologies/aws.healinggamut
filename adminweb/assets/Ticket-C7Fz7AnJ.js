import{e as v,c as G,z as B,j as u,k as n,l as r,m as a,A as i,H as f,B as $,y as s,F,I as z,E as y,x as c,u as R,t as w,q as V,J as g}from"./@vue-bQO0P59g.js";import{S as H,E as J}from"./@mdi-CZk6uuAL.js";import{u as K}from"./vuex-DHdsu8jA.js";import{u as W}from"./vue-router-D5J0r3Gc.js";const X={class:"grid grid-cols-2 lg:grid-cols-2 gap-2 py-2"},Y={class:"w-full overflow-x-scroll"},Z={key:0},tt=s("thead",{class:"bg-white dark:bg-gray-900/80 dark:backdrop-blur-md"},[s("tr",null,[s("th",null,"Sl.No."),s("th",null,"Question"),s("th",null,"Answer"),s("th",null,"Created At"),s("th",null,"Status"),s("th",{class:"text-center"},"Action")])],-1),et={"data-label":"Sr.No"},ot={"data-label":"Question"},st={"data-label":"Answer"},lt={"data-label":"Created At"},at={"data-label":"Status"},nt={key:0,class:"text-green-500 font-semibold"},it={key:1,class:"text-red-500 font-semibold"},dt={key:2,class:"text-yellow-500 font-semibold"},ut={class:"actions-cell"},rt={key:1,class:"flex justify-center items-center"},ct=s("div",{class:"spinner-dual-ring"},[s("div",{class:"ldio"},[s("div"),s("div",null,[s("div")])])],-1),mt=[ct],pt={class:"grid grid-cols-1 lg:grid-cols-1 gap-2"},ft={key:0},_t={class:"flex justify-center"},bt={class:"form-check form-check-inline"},kt=s("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio10"},"RESOLVED",-1),ht={class:"form-check form-check-inline"},yt=s("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"PENDING",-1),vt={class:"form-check form-check-inline"},wt=s("label",{class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2",for:"inlineRadio20"},"NOT RESOLVED",-1),Dt={__name:"Ticket",setup(Vt){const _=K();W();const m=v(()=>_.state.Ticket),S=[{id:"PENDING",label:"PENDING"},{id:"RESOLVED",label:"RESOLVED"},{id:"NOT RESOLVED",label:"NOT RESOLVED"}],t=G({limit:10,offset:0,keyword:"",status:"PENDING",id:null,question:null,wsuModal:!1,submit:!1,modelStatus:S[0],statusModal:!1,editMode:!1,answer:null});B(()=>{k(t.limit,t.offset,t.keyword,t.status)});async function k(l,e,d,p){await _.dispatch("Ticket/getTicket",{limit:l,offset:e,keyword:d,status:p})}function x(){var l;k(t.limit,t.offset,t.keyword,(l=t.modelStatus)==null?void 0:l.id)}function L(l){var e,d;l.length>2?k(t.limit,t.offset,l,(e=t.modelStatus)==null?void 0:e.id):l.length<=0&&k(t.limit,t.offset,t.keyword,(d=t.modelStatus)==null?void 0:d.id)}function q(l){if(l){const e=new Date(l).toString().split(" ");return e[2]+" "+e[1]+", "+e[3]}return"-"}function T(l,e){t.statusModal=!0,t.id=l,t.status=e}function C(){t.id&&_.dispatch("Ticket/setStatusQuestion",{id:t.id,status:t.status}),t.statusModal=!1}function A(l,e,d,p){t.wsuModal=!0,t.editMode=!0,t.id=l,t.question=e,t.answer=p,t.modelStatus={id:d,label:d}}async function j(){var l,e;if(E.value||N.value){t.submit=!0;return}t.submit=!1,t.editMode?_.dispatch("Ticket/updateQuestion",{id:t.id,question:t.question,status:(l=t.modelStatus)==null?void 0:l.id,answer:t.answer}):_.dispatch("Ticket/addQuestion",{question:t.question,status:(e=t.modelStatus)==null?void 0:e.id,answer:t.answer}),t.wsuModal=!1}const E=v(()=>{if(!t.question)return"Question required!"}),N=v(()=>{if(!t.answer)return"Answer required!"});return(l,e)=>{const d=u("hero-bar"),p=u("control"),b=u("base-button"),h=u("base-buttons"),U=u("new-card"),Q=u("card-component"),I=u("main-section"),D=u("field"),O=u("modal-box");return n(),r("section",null,[a(d,null,{default:i(()=>[$("Ticket")]),_:1}),a(I,null,{default:i(()=>[s("div",X,[a(p,{modelValue:t.search,"onUpdate:modelValue":e[0]||(e[0]=o=>t.search=o),type:"text",placeholder:"Search..",onKeyup:e[1]||(e[1]=o=>L(o.target.value))},null,8,["modelValue"]),a(p,{modelValue:t.modelStatus,"onUpdate:modelValue":e[2]||(e[2]=o=>t.modelStatus=o),options:S,onChange:x},null,8,["modelValue"])]),a(U,{title:"List (Total: "+m.value.total+")"},{default:i(()=>[s("div",Y,[m.value.data.length>0?(n(),r("table",Z,[tt,s("tbody",null,[(n(!0),r(F,null,z(m.value.data,(o,M)=>(n(),r("tr",{key:M},[s("td",et,y(M+1),1),s("td",ot,y(o.question),1),s("td",st,y(o.answer),1),s("td",lt,y(q(o.createdAt)),1),s("td",at,[o.status==="RESOLVED"?(n(),r("span",nt,"RESOLVED")):c("",!0),o.status==="NOT RESOLVED"?(n(),r("span",it,"NOT RESOLVED")):c("",!0),o.status==="PENDING"?(n(),r("span",dt,"PENDING")):c("",!0)]),s("td",ut,[a(h,{type:"justify-center lg:justify-center","no-wrap":""},{default:i(()=>[a(b,{color:"info",icon:R(H),title:"Edit setting",small:"",onClick:f(P=>A(o.id,o.question,o.status,o.answer),["prevent"])},null,8,["icon","onClick"]),a(b,{color:"warning",icon:R(J),title:"Change Status",small:"",onClick:f(P=>T(o.id,o.status),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])):c("",!0)])]),_:1},8,["title"]),m.value.data.length<=0?(n(),w(Q,{key:0,empty:""})):c("",!0),m.value.dataLoader?(n(),r("div",rt,mt)):c("",!0),m.value.loadMore&&!m.value.dataLoader?(n(),w(h,{key:2,type:"justify-center lg:justify-center"},{default:i(()=>[a(b,{type:"button",color:"info",label:"Load More",onClick:e[3]||(e[3]=f(o=>l.loadMoreData(),["prevent"]))})]),_:1})):c("",!0)]),_:1}),a(O,{modelValue:t.wsuModal,"onUpdate:modelValue":e[6]||(e[6]=o=>t.wsuModal=o),title:t.editMode?"Update Answer":"Add Question",form:"",onSubmit:e[7]||(e[7]=f(o=>l.onSubmit(),["prevent"]))},{default:i(()=>[s("section",null,[s("div",pt,[a(D,{label:"Question *",help:t.submit?E.value:""},{default:i(()=>[a(p,{modelValue:t.question,"onUpdate:modelValue":e[4]||(e[4]=o=>t.question=o),type:"text",name:"question",autocomplete:"question",placeholder:"Enter Question",disabled:""},null,8,["modelValue"])]),_:1},8,["help"]),a(D,{label:"Answer *",help:t.submit?N.value:""},{default:i(()=>[a(p,{modelValue:t.answer,"onUpdate:modelValue":e[5]||(e[5]=o=>t.answer=o),type:"textarea",name:"answer",autocomplete:"answer",placeholder:"Enter Answer"},null,8,["modelValue"])]),_:1},8,["help"])]),a(h,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[a(b,{type:"button",color:"info",small:"",label:"Submit",onClick:f(j,["prevent"])})]),_:1})])]),_:1},8,["modelValue","title"]),a(O,{modelValue:t.statusModal,"onUpdate:modelValue":e[11]||(e[11]=o=>t.statusModal=o),title:"Ticket Status"},{default:i(()=>[t.id?(n(),r("section",ft,[s("div",_t,[s("div",bt,[V(s("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":e[8]||(e[8]=o=>t.status=o),value:"RESOLVED"},null,512),[[g,t.status]]),kt]),s("div",ht,[V(s("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":e[9]||(e[9]=o=>t.status=o),value:"PENDING"},null,512),[[g,t.status]]),yt]),s("div",vt,[V(s("input",{class:"form-check-input mr-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":e[10]||(e[10]=o=>t.status=o),value:"NOT RESOLVED"},null,512),[[g,t.status]]),wt])]),a(h,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[m.value.loaderNew?c("",!0):(n(),w(b,{key:0,type:"button",color:"info",small:"",label:"Change Status",onClick:f(C,["prevent"])}))]),_:1})])):c("",!0)]),_:1},8,["modelValue"])])}}};export{Dt as default};
