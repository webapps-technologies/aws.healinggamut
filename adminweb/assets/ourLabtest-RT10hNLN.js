import{e as p,c as ee,z as te,j as m,k as b,l as f,y as o,m as n,A as i,u as k,F,I as le,H as h,E as y,x as D,q as W,J as E,B as N,t as oe}from"./@vue-bQO0P59g.js";import{a2 as ae,G as ne,F as ie,E as se}from"./@mdi-CZk6uuAL.js";import{b as re}from"./vue-router-D5J0r3Gc.js";import{u as ue}from"./vuex-DHdsu8jA.js";const de={class:"grid grid-cols-1 lg:grid-cols-1 gap-6"},ce={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},pe={class:"grid grid-cols-1 lg:grid-cols-1 gap-4"},me={class:"grid grid-cols-1 lg:grid-cols-1 gap-4"},be={class:"mt-3 table-sec"},ge=o("caption",null,null,-1),fe=o("thead",{class:"bg-blue dark:bg-gray-900/80 dark:backdrop-blur-md"},[o("tr",null,[o("th",null,"Sl.No."),o("th",null,"Test Name"),o("th",null,"Price"),o("th",null,"Discount"),o("th",null,"Discount Price"),o("th",null,"Report Within"),o("th",null,"Status"),o("th",null,"Image"),o("th",{class:"text-center"},"Action")])],-1),he={"data-label":"Sl.No."},ye={"data-label":"Test Name"},ve={"data-label":"Price"},_e={"data-label":"Discount"},Ve={"data-label":"Discount Price"},Ce={"data-label":"Report Within"},ke={"data-label":"Status"},De={key:0,"data-label":"Image"},xe=["src"],Se={key:1,"data-label":"Image"},Pe=o("img",{src:"https://kreditstorage.b-cdn.net/logo/noimage.png",class:"h-8"},null,-1),Ie=[Pe],Le={"data-label":"Action",class:"actions-cell"},Me={class:"h-48 cursor-pointer relative flex justify-center items-center border-2 rounded-md bg-gray-200"},Ue={class:"absolute flex justify-center items-center gap-2"},Te=["src"],We={key:1,class:"text-center text-neutral-400 font-bold"},Ee={key:0},Ne={class:"flex justify-center"},je={class:"form-check form-check-inline"},we={class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2 cursor-pointer"},Re={class:"form-check form-check-inline"},Ae={class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2 cursor-pointer"},Fe={class:"form-check form-check-inline"},Oe={class:"form-check-label inline-block text-gray-800 dark:text-slate-300 mr-2 cursor-pointer"},He={__name:"ourLabtest",setup(Be){const O=[{id:"Test",label:"Test"},{id:"Panel",label:"Panel"},{id:"Package",label:"Package"},{id:"Pin Master",label:"Pin Master"}],B=[{id:"Yes",label:"Yes"},{id:"No",label:"No"}],c=ue();re();const g=p(()=>c.state.Laboratory),e=ee({id:null,editMode:!1,finalSubmit:!1,title:null,labCategory:null,labDepartment:null,price:null,discountPrice:null,discount:null,homeCollection:null,reportWithin:null,shortDesc:null,desc:null,type:null,imgModal:!1,logoImage:null,logoFile:null,status:null,statusModal:!1});te(()=>{j(),w("")});const j=a=>{c.dispatch("Laboratory/categorys")},w=a=>{c.dispatch("Laboratory/departments",{limit:50,offset:0,search:a,status:!0})};function K(a){let t=e.price*a/100,s=e.price-t;e.discountPrice=s}function $(a){e.editMode=!0,e.id=a.id,e.title=a.title,e.labCategory={id:a.labCategory,name:a.labCategory},e.labDepartment={id:a.labDepartment,name:a.labDepartment},e.price=a.price,e.discountPrice=a.discountPrice,e.discount=a.discount,e.homeCollection={id:a.homeCollection,label:a.homeCollection},e.reportWithin=a.reportWithin,e.shortDesc=a.shortDesc,e.desc=a.desc,e.type={id:a.type,label:a.type}}const z=async()=>{var a,t,s,r,v,V;if(x.value||S.value||P.value||I.value||L.value||M.value||U.value||T.value){e.finalSubmit=!0;return}if(e.editMode){const u={id:e.id,title:e.title,labCategory:(a=e.labCategory)==null?void 0:a.name,labDepartment:(t=e.labDepartment)==null?void 0:t.name,price:e.price,discountPrice:e.discountPrice,discount:e.discount,homeCollection:e.homeCollection.id,reportWithin:e.reportWithin,shortDesc:e.shortDesc,desc:e.desc,type:e.type.id,accountId:(s=g.value.user.account)==null?void 0:s.id,laboratoryId:g.value.user.id};await c.dispatch("Laboratory/updateLabTest",u)}else{const u={title:e.title,labCategory:(r=e.labCategory)==null?void 0:r.name,labDepartment:(v=e.labDepartment)==null?void 0:v.name,price:e.price,discountPrice:e.discountPrice,discount:e.discount,homeCollection:e.homeCollection.id,reportWithin:e.reportWithin,shortDesc:e.shortDesc,desc:e.desc,type:e.type.id,accountId:(V=g.value.user.account)==null?void 0:V.id,laboratoryId:g.value.user.id};await c.dispatch("Laboratory/addLabTest",u)}e.title=null,e.labCategory=null,e.labDepartment=null,e.price=null,e.discountPrice=null,e.discount=null,e.homeCollection=null,e.reportWithin=null,e.shortDesc=null,e.desc=null,e.type=null};function G(a,t){e.imgModal=!0,e.id=a,e.logoImage=t}async function H(a){if(a){const t=await a.target;if(t.files[0].type==="image/png"||t.files[0].type==="image/jpg"||t.files[0].type==="image/jpeg")if(t.files[0].size<=1e6){if(t.files){const s=new FileReader;s.onload=r=>{e.logoImage=r.target.result},e.logoFile=t.files[0],s.readAsDataURL(t.files[0])}}else c.dispatch("ErrorSuccess/error",{msg:"Image too big (max 1 Mb allowed)"});else c.dispatch("ErrorSuccess/error",{msg:"Upload image in png format."})}}function Y(){e.logoFile&&c.dispatch("Laboratory/updateImage",{id:e.id,data:e.logoFile}),e.imgModal=!1}function q(a,t){e.statusModal=!0,e.id=a,e.status=t}function J(){e.id&&c.dispatch("Laboratory/setLabTestStatus",{id:e.id,status:e.status}),e.statusModal=!1}const x=p(()=>{if(!e.title)return"Enter Test Name!"}),S=p(()=>{if(!e.labCategory)return"Select Category!"}),P=p(()=>{if(!e.labDepartment)return"Select Department!"}),I=p(()=>{if(!e.price)return"Enter price!"}),L=p(()=>{if(!e.discount)return"Enter Discount!"}),M=p(()=>{if(!e.reportWithin)return"Enter report With in!"}),U=p(()=>{if(!e.type)return"Select type!"}),T=p(()=>{if(!e.homeCollection)return"Select home collection!"});function _(a){let t=String.fromCharCode(a.keyCode);if(/^[0-9]+$/.test(t))return!0;a.preventDefault()}function Z(a){let t=String.fromCharCode(a.keyCode);if(/^[a-zA-Z ]+$/.test(t))return!0;a.preventDefault()}return(a,t)=>{const s=m("control"),r=m("field"),v=m("search-select"),V=m("divider"),u=m("base-button"),C=m("base-buttons"),Q=m("card-component"),X=m("base-button-rounded"),R=m("modal-box");return b(),f(F,null,[o("div",de,[n(Q,{title:"Lab Test Detail",icon:k(ae)},{default:i(()=>[o("div",ce,[n(r,{label:"Test Name *",help:e.finalSubmit&&x.value?x.value:""},{default:i(()=>[n(s,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=l=>e.title=l),type:"text",name:"bank_name",onKeypress:t[1]||(t[1]=l=>Z(l)),maxlength:"30"},null,8,["modelValue"])]),_:1},8,["help"]),n(r,{label:"Lab Category",help:e.finalSubmit&&S.value?S.value:""},{default:i(()=>{var l;return[n(v,{modelValue:e.labCategory,"onUpdate:modelValue":t[2]||(t[2]=d=>e.labCategory=d),options:g.value.dataLabCategory,placeholder:(l=e.labCategory)==null?void 0:l.name,onOnType:t[3]||(t[3]=d=>j(d))},null,8,["modelValue","options","placeholder"])]}),_:1},8,["help"]),n(r,{label:"Lab Department",help:e.finalSubmit&&P.value?P.value:""},{default:i(()=>{var l;return[n(v,{modelValue:e.labDepartment,"onUpdate:modelValue":t[4]||(t[4]=d=>e.labDepartment=d),options:g.value.dataLabDepartment,placeholder:(l=e.labDepartment)==null?void 0:l.name,onOnType:t[5]||(t[5]=d=>w(d))},null,8,["modelValue","options","placeholder"])]}),_:1},8,["help"]),n(r,{label:"Price",help:e.finalSubmit&&I.value?I.value:""},{default:i(()=>[n(s,{modelValue:e.price,"onUpdate:modelValue":t[6]||(t[6]=l=>e.price=l),type:"text",name:"price",onKeypress:t[7]||(t[7]=l=>_(l)),maxlength:"6"},null,8,["modelValue"])]),_:1},8,["help"]),n(r,{label:"Discount (%)",help:e.finalSubmit&&L.value?L.value:""},{default:i(()=>[n(s,{modelValue:e.discount,"onUpdate:modelValue":t[8]||(t[8]=l=>e.discount=l),type:"text",name:"discount",onKeypress:t[9]||(t[9]=l=>_(l)),maxlength:"3",onKeyup:t[10]||(t[10]=l=>K(l.target.value))},null,8,["modelValue"])]),_:1},8,["help"]),n(r,{label:"Discount Price"},{default:i(()=>[n(s,{modelValue:e.discountPrice,"onUpdate:modelValue":t[11]||(t[11]=l=>e.discountPrice=l),type:"text",name:"discountPrice",onKeypress:t[12]||(t[12]=l=>_(l)),maxlength:"6",disabled:!0},null,8,["modelValue"])]),_:1}),n(r,{label:"Report Within",help:e.finalSubmit&&M.value?M.value:""},{default:i(()=>[n(s,{modelValue:e.reportWithin,"onUpdate:modelValue":t[13]||(t[13]=l=>e.reportWithin=l),type:"text",name:"reportWithin",onKeypress:t[14]||(t[14]=l=>_(l)),maxlength:"3"},null,8,["modelValue"])]),_:1},8,["help"]),n(r,{label:"Test Type",help:e.finalSubmit&&U.value?U.value:""},{default:i(()=>[n(s,{modelValue:e.type,"onUpdate:modelValue":t[15]||(t[15]=l=>e.type=l),options:O},null,8,["modelValue"])]),_:1},8,["help"]),n(r,{label:"Home Collection",help:e.finalSubmit&&T.value?T.value:""},{default:i(()=>[n(s,{modelValue:e.homeCollection,"onUpdate:modelValue":t[16]||(t[16]=l=>e.homeCollection=l),options:B},null,8,["modelValue"])]),_:1},8,["help"])]),o("div",pe,[n(r,{label:"Short Description"},{default:i(()=>[n(s,{modelValue:e.shortDesc,"onUpdate:modelValue":t[17]||(t[17]=l=>e.shortDesc=l),type:"textarea",name:"shortDesc",maxlength:"250"},null,8,["modelValue"])]),_:1})]),o("div",me,[n(r,{label:"Description"},{default:i(()=>[n(s,{modelValue:e.desc,"onUpdate:modelValue":t[18]||(t[18]=l=>e.desc=l),type:"textarea",name:"desc",maxlength:"500"},null,8,["modelValue"])]),_:1})]),n(V),n(C,null,{default:i(()=>[n(u,{color:"themeColor",type:"button",label:e.editMode?"Update":"Submit",onClick:h(z,["prevent"])},null,8,["label"])]),_:1})]),_:1},8,["icon"])]),o("div",be,[o("table",null,[ge,fe,o("tbody",null,[(b(!0),f(F,null,le(g.value.user.labTest,(l,d)=>(b(),f("tr",{key:d},[o("td",he,y(d+1),1),o("td",ye,y(l.title),1),o("td",ve,y(l.price),1),o("td",_e,y(l.discount)+"%",1),o("td",Ve,y(l.discountPrice),1),o("td",Ce,y(l.reportWithin),1),o("td",ke,y(l.status),1),l.image?(b(),f("td",De,[o("img",{src:l.image,class:"h-8"},null,8,xe)])):(b(),f("td",Se,Ie)),o("td",Le,[n(C,{type:"justify-start lg:justify-center","no-wrap":""},{default:i(()=>[n(X,{icon:k(ne),title:"Edit Labtest Details",color:"purple",onClick:h(A=>$(l),["prevent"]),small:"",rounded:""},null,8,["icon","onClick"]),n(u,{color:"success",title:"Change Image",small:"",rounded:"",icon:k(ie),onClick:h(A=>G(l.id,l.image),["prevent"])},null,8,["icon","onClick"]),n(u,{color:"info",icon:k(se),title:"Change Status",small:"",rounded:"",onClick:h(A=>q(l.id,l.status),["prevent"])},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])])]),n(R,{modelValue:e.imgModal,"onUpdate:modelValue":t[21]||(t[21]=l=>e.imgModal=l),title:"Update Image"},{default:i(()=>[o("section",null,[o("div",Me,[o("input",{type:"file",name:"logo",accept:"image/png || image/jpg || image/jpeg",onChange:t[19]||(t[19]=l=>H(l)),class:"z-20 opacity-0 cursor-pointer h-full w-full"},null,32),o("div",Ue,[e.logoImage?(b(),f("img",{key:0,class:"h-48 opacity-1",src:e.logoImage},null,8,Te)):D("",!0),e.logoImage?D("",!0):(b(),f("span",We,"Upload Image"))])]),n(C,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[n(u,{type:"button",color:"danger",small:"",label:"Upload",onClick:h(Y,["prevent"])}),n(u,{type:"button",color:"info",small:"",label:"Cancel",onClick:t[20]||(t[20]=h(l=>e.imgModal=!1,["prevent"]))})]),_:1})])]),_:1},8,["modelValue"]),n(R,{modelValue:e.statusModal,"onUpdate:modelValue":t[25]||(t[25]=l=>e.statusModal=l),title:"Lab test status"},{default:i(()=>[e.id?(b(),f("section",Ee,[o("div",Ne,[o("div",je,[o("label",we,[W(o("input",{class:"form-check-input ml-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[22]||(t[22]=l=>e.status=l),value:"ACTIVE"},null,512),[[E,e.status]]),N(" ACTIVE")])]),o("div",Re,[o("label",Ae,[W(o("input",{class:"form-check-input ml-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[23]||(t[23]=l=>e.status=l),value:"DEACTIVE"},null,512),[[E,e.status]]),N(" DEACTIVE")])]),o("div",Fe,[o("label",Oe,[W(o("input",{class:"form-check-input ml-2",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":t[24]||(t[24]=l=>e.status=l),value:"PENDING"},null,512),[[E,e.status]]),N(" PENDING")])])]),n(C,{type:"justify-center lg:justify-center pt-5"},{default:i(()=>[g.value.loaderNew?D("",!0):(b(),oe(u,{key:0,type:"button",color:"info",small:"",label:"Change Status",onClick:h(J,["prevent"])}))]),_:1})])):D("",!0)]),_:1},8,["modelValue"])],64)}}};export{He as default};
