import{u as D,B as R,C as V,c as P,v as E,D as N,o as r,a as p,b as a,z as m,x as o,I as u,F as _,E as x,t as g}from"./vendor-5e5c4e37.js";const S={class:"staff-permission-page"},A={class:"permission-list"},B={class:"list-item"},$={class:"left"},w={class:"title f-w-bold"},F={class:"right"},q={class:"input"},I={class:"input"},M={class:"input"},j={class:"input"},z={class:"left"},L={class:"details"},T={class:"title"},G={class:"right"},H={class:"name"},J=["onUpdate:modelValue"],Q={__name:"Permission",setup(K){const f=D(),v=R();V();const i=P(()=>f.state.Staff),s=E({id:null,permissionid:null,permission:[],menu:[],statusAll:!1,statusCreate:!1,statusRead:!1,statusDelete:!1,statusUpdate:!1});N(()=>{v.query.id&&(s.id=v.query.id,C())});function C(){f.dispatch("Staff/getPermission",{id:s.id})}function U(){f.dispatch("Staff/savePermission",{id:s.id,menu:i.value.permissiondata})}const b=()=>{if(s.statusAll==!0)for(let n=0;n<i.value.permissiondata.length;n++){const e=i.value.permissiondata[n].userPermission;for(let t=0;t<e.length;t++)s.statusCreate=!0,s.statusRead=!0,s.statusDelete=!0,s.statusUpdate=!0,e[t].status=!0}else if(s.statusAll==!1)for(let n=0;n<i.value.permissiondata.length;n++){const e=i.value.permissiondata[n].userPermission;for(let t=0;t<e.length;t++)s.statusCreate=!1,s.statusRead=!1,s.statusDelete=!1,s.statusUpdate=!1,e[t].status=!1}},c=n=>{if(s.statusCreate||s.statusRead||s.statusUpdate||s.statusDelete)for(let e=0;e<i.value.permissiondata.length;e++){const t=i.value.permissiondata[e].userPermission;for(let l=0;l<t.length;l++)t[l].permission.name===n&&(t[l].status=!0)}else if(!s.statusCreate||!s.statusRead||!s.statusUpdate||!s.statusDelete)for(let e=0;e<i.value.permissiondata.length;e++){const t=i.value.permissiondata[e].userPermission;for(let l=0;l<t.length;l++)t[l].permission.name===n&&(t[l].status=!1)}};return(n,e)=>(r(),p("section",S,[a("div",A,[a("div",B,[a("div",$,[a("div",w,[m("Permissions "),o(a("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>s.statusAll=t),onChange:b},null,544),[[u,s.statusAll]])])]),a("div",F,[a("div",q,[m(" Create "),o(a("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=t=>s.statusCreate=t),onChange:e[2]||(e[2]=t=>c("Create"))},null,544),[[u,s.statusCreate]])]),a("div",I,[m(" Read "),o(a("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=t=>s.statusRead=t),onChange:e[4]||(e[4]=t=>c("Read"))},null,544),[[u,s.statusRead]])]),a("div",M,[m(" Update "),o(a("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>s.statusUpdate=t),onChange:e[6]||(e[6]=t=>c("Update"))},null,544),[[u,s.statusUpdate]])]),a("div",j,[m(" Delete "),o(a("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=t=>s.statusDelete=t),onChange:e[8]||(e[8]=t=>c("Delete"))},null,544),[[u,s.statusDelete]])])])]),(r(!0),p(_,null,x(i.value.permissiondata,(t,l)=>(r(),p("div",{class:"list-item",key:l},[a("div",z,[a("div",L,[a("div",T,g(t.title),1)])]),a("div",G,[(r(!0),p(_,null,x(t.userPermission,(d,k)=>{var h;return r(),p("div",{class:"input",key:k},[a("span",H,g((h=d.permission)==null?void 0:h.name),1),o(a("input",{type:"checkbox","onUpdate:modelValue":y=>d.status=y},null,8,J),[[u,d.status]])])}),128))])]))),128)),a("div",{class:"save-btn flex justify-center"},[a("button",{type:"button",class:"btn black-btn w-50",onClick:U},"Save")])])]))}};export{Q as default};
