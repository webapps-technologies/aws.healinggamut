import{u as Q,B as X,C as Z,c as h,s as Y,v as ee,m as _,D as te,r as A,o as a,a as i,b as t,t as n,d as V,z as p,x as v,y as g,f as r,$ as E,F,E as I,H as se,g as U}from"./vendor-5e5c4e37.js";import{_ as le}from"./calender-9d47370a.js";import"./vue3-editor.common-8412b46c.js";const oe={class:"form"},ae={class:"card-body"},ie={class:"clinic-info"},ne={class:"about"},re={class:"rate-row"},de={class:"name"},ce={class:"rating"},ue={class:"text text-grey"},me={class:"dr-select-sect"},_e={class:"form-item mb-16"},ve=t("div",{class:"title"},"Select Doctor",-1),he={key:0,class:"form-item"},pe=t("div",{class:"title"},"Appointment Date",-1),fe={class:"date-input"},ke=["min"],be=t("div",{class:"icon"},[t("img",{src:le,alt:""})],-1),De={key:0,class:"card-body"},ye={class:"clinic-info"},Se={class:"about"},ge={class:"rate-row"},Pe={class:"name"},Ne={class:"rating"},Ve={class:"text text-grey"},Ye={class:"slot-section"},Ae={class:"locker"},Ee={class:"radio-btns"},we={class:"radio"},Me={class:"label"},Te={class:"radio"},Ce={class:"label"},Oe={class:"mb-10"},Le={class:"slot-header"},Fe={class:"card-container"},Ie=["onClick"],Ue={class:"day"},xe={class:"date"},Re={class:"slot-status"},$e={key:0,class:"text text-green f-w-bold"},Be={key:1,class:"text text-red f-w-bold"},Ge={class:"slot-body"},He=t("div",{class:"heading-slot"},"Available Slot :",-1),ze={class:"mb-16"},Ke={class:"book-slots"},We=["for","onClick"],je=["id","value"],qe={key:1,class:"time"},Je={key:0,class:"online"},Qe={key:1,class:"offline"},Xe={key:2,class:"hospital"},Ze={key:2,class:"time"},et=t("div",{class:"not-online"},"Not Available",-1),tt=[et],st={key:0,class:"mb-16"},lt=t("div",{class:"heading-slot"},"Time Slot :",-1),ot={class:"book-slots"},at=["for"],it=["id","value","onChange"],nt={class:"time-slot"},rt={key:1,class:"mb-16 w-15"},dt=t("div",{class:"sel-ti"},"Select Time",-1),ct={key:2,class:"patn-head"},ut={key:3,class:"form-Container"},mt={class:"tow-row"},_t={class:"form-item mb-16"},vt=t("div",{class:"title"},"First Name ",-1),ht={key:0,class:"err-msg"},pt={class:"form-item mb-16"},ft=t("div",{class:"title"},"Last Name ",-1),kt={key:0,class:"err-msg"},bt={class:"form-item mb-16"},Dt=t("div",{class:"title"},"Phone ",-1),yt={key:0,class:"err-msg"},St={class:"tow-row"},gt={class:"form-item mb-16"},Pt=t("div",{class:"title"},"Email ",-1),Nt={key:0,class:"err-msg"},Vt={class:"form-item mb-16"},Yt=t("div",{class:"title"},"Gender ",-1),At={key:0,class:"err-msg"},Et={class:"form-item mb-16"},wt=t("div",{class:"title"},"Dob ",-1),Mt=["max"],Tt={key:0,class:"err-msg"},Ct={key:4,class:"err-msg"},Ot={class:"book-btn"},xt={__name:"BookHospitalApt",setup(Lt){const c=Q();X(),Z();const u=h(()=>c.state.Doctor),f=h(()=>c.state.Auth),k=Y([]),P=Y(null),b=Y(null),D=Y(null),$=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],e=ee({submit:!1,fromDate:_().format("YYYY-MM-DD"),toDate:_().format("YYYY-MM-DD"),calendarDate:_().format("YYYY-MM-DD"),scheduleOn:_().format("YYYY-MM-DD"),limit:100,offset:0,keyword:"",error:null,roles:null,doctor:null,showPdetails:!1,timePickerStatus:!1,showDrDetails:!1,timePicker:"00:00:00",doctorFees:0,firstName:null,lastName:null,patientGender:"MALE",contactNumber:null,email:null,dob:null,slotId:null});te(()=>{c.dispatch("Doctor/getBasicDoctor",{limit:e.limit,offset:e.offset,keyword:e.keyword})});async function B(){var o,l;if(e.timePickerStatus&&e.timePicker=="00:00")return e.error="Please Select Time",c.dispatch("Alert/error",{msg:"Please Select Time!"});if(e.error=null,e.lockerStatus)e.error=null;else return e.error="Please Select Locker status",c.dispatch("Alert/error",{msg:"Please Select Locker status"});if(((o=k.value)==null?void 0:o.length)<=0)return e.error="Please Select Locker status",c.dispatch("Alert/error",{msg:"Please Select Locker status"});if(e.error=null,b.value>=0){if(((l=u.value.slotTimeData)==null?void 0:l.length)>0){if(!e.timePickerStatus&&!D.value)return e.error="Please Select Time",c.dispatch("Alert/error",{msg:"Please Select Time"});e.error=null}if(N.value||q.value||M.value||C.value||T.value||O.value)return e.submit=!0,null;e.submit=!1;const m=e.scheduleOn+"T"+e.timePicker,y=e.scheduleOn+"T"+D.value,L={scheduleOn:e.timePickerStatus?m:y,scheduleFor:null,type:e.timePickerStatus?"OFFLINE":"ONLINE",appointmentFor:"Doctor Appointment",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,patientDetailId:null,franchiseId:null,pid:null,doctorDetailId:null,patientDetail:{firstName:e.firstName,lastName:e.lastName,dob:e.dob,gender:e.patientGender.id,mobile:e.contactNumber,email:e.email},labtest:[],doctorFees:+e.doctorFees,hospitalFees:f.value.price,commission:0,gst:0,discount:0,lockerStatus:e.lockerStatus,doctorDetailId:u.value.id,slotId:e.timePickerStatus?null:e.slotId,organizationId:f.value.id,laboratoryId:null};(await c.dispatch("Appointments/bookAppointments",L)).status===201&&(e.firstName=null,e.lastName=null,e.patientGender=null,e.contactNumber=null,e.email=null,e.dob=null,e.timePicker="00:00",e.patientModal=!1)}else return e.error="Please Select Slot",c.dispatch("Alert/error",{msg:"Please Select Slot"})}const G=o=>{o.id&&(e.doctorFees=o.fees,e.showDrDetails=!0,u.value.slotTimeData=[],k.value=[],P.value=null,e.showPdetails=!1,c.dispatch("Doctor/getDoctorDetails",{id:o.id}))},H=(o,l,m,y)=>{e.scheduleOn=y,u.value.slotTimeData=[],e.showPdetails=!1,b.value=null,D.value=null,l?(P.value=o,k.value=m):(P.value=null,k.value=[])};function z(o,l){if(b.value=l,e.showPdetails=!0,o.online){e.timePickerStatus=!1;const m=_(e.calendarDate).format("YYYY-MM-DD");return c.dispatch("Doctor/getSlotTime",{currentDate:m,periodId:o.id})}o.offline||o.clinicVisitStatus?e.timePickerStatus=!0:e.timePickerStatus=!1}function w(o){if(o){var l=_(o,"HH:mm:ss").format("hh:mm A");return l}}function K(o){if(o){var l=_(o).format("MMM Do YYYY");return l}}function W(){return k.value=[],P.value=null,u.value.slotTimeData=[],e.showPdetails=!1,b.value=null,D.value=null,c.commit("Doctor/SET_DOCTOR_SCHEDULE",e.calendarDate)}function j(o){if(o){const l=_(),m=_(o);return`${l.diff(m,"years")}Y`}return"Not Mentioned"}function x(){return _().format("YYYY-MM-DD")}h(()=>{e.dob&&j(e.dob)});const N=h(()=>{if(!e.firstName)return"Please enter first name"}),q=h(()=>{if(!e.lastName)return"Please enter last name"}),M=h(()=>{if(!e.dob)return"Please enter dob"}),T=h(()=>{if(!e.patientGender)return"Please select gender"}),C=h(()=>{if(!e.contactNumber)return"Please enter phone no"}),O=h(()=>{let o=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.email){if(!o.test(e.email))return"Please enter valid email!"}else return"Please enter email!"});function J(o){let l=String.fromCharCode(o.keyCode);if(/^[0-9]+$/.test(l))return!0;o.preventDefault()}return(o,l)=>{const m=A("icon-star"),y=A("SingleSelect"),L=A("time-picker"),R=A("Select");return a(),i("div",oe,[t("div",ae,[t("div",ie,[t("div",ne,[t("div",re,[t("h3",de,n(f.value.name),1),t("div",ce,[V(m),p(" "+n(f.value.rating),1)])]),t("div",ue,n(f.value.address),1)])])]),t("div",me,[t("div",_e,[ve,V(y,{modelValue:e.doctor,"onUpdate:modelValue":l[0]||(l[0]=s=>e.doctor=s),options:f.value.hospitalDoctorOption,onSelected:G,placeholder:"Select Doctor"},null,8,["modelValue","options"])]),e.doctor?(a(),i("div",he,[pe,t("div",fe,[v(t("input",{type:"date","onUpdate:modelValue":l[1]||(l[1]=s=>e.calendarDate=s),min:x(),onChange:W},null,40,ke),[[g,e.calendarDate]]),be])])):r("",!0)]),e.showDrDetails?(a(),i("div",De,[t("div",ye,[t("div",Se,[t("div",ge,[t("h3",Pe,n(u.value.name),1),t("div",Ne,[V(m),p(" "+n(u.value.rating),1)])]),t("div",Ve,n(u.value.address),1)])]),t("div",Ye,[t("div",Ae,[p("Share Your Health Locker "),t("div",Ee,[t("div",we,[t("label",Me,[v(t("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[2]||(l[2]=s=>e.lockerStatus=s),value:"YES"},null,512),[[E,e.lockerStatus]]),p(" YES ")])]),t("div",Te,[t("label",Ce,[v(t("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[3]||(l[3]=s=>e.lockerStatus=s),value:"NO"},null,512),[[E,e.lockerStatus]]),p(" NO ")])])])]),t("div",Oe,[p("Appointment on "),t("strong",null,n(K(e.scheduleOn)),1)]),t("div",Le,[t("div",Fe,[(a(!0),i(F,null,I(u.value.doctorSchedule,(s,d)=>(a(),i("div",{class:se(["slot-card",{active:P.value==d}]),key:d,onClick:U(S=>H(d,s.status,s.period,s.date),["prevent"])},[t("div",Ue,n(s.name),1),t("div",xe,n(s.date),1),t("div",Re,[s.status?(a(),i("div",$e,"Slots Available")):(a(),i("div",Be,"Slot Not Available"))])],10,Ie))),128))])]),t("div",Ge,[He,t("div",ze,[t("div",Ke,[(a(!0),i(F,null,I(k.value,(s,d)=>(a(),i("div",{class:"slot-item",key:d},[t("label",{for:`input-${d}`,onClick:U(S=>z(s,d),["prevent"])},[s.online||s.offline||s.clinicVisitStatus?v((a(),i("input",{key:0,type:"radio",id:`input-${d}`,name:"slot","onUpdate:modelValue":l[4]||(l[4]=S=>b.value=S),value:d},null,8,je)),[[E,b.value]]):r("",!0),s.clinicVisitStatus||s.online||s.offline?(a(),i("div",qe,[p(n(w(s.time_start))+" - "+n(w(s.time_end))+" ",1),s.online?(a(),i("div",Je,"Online Consultancy Available")):r("",!0),s.offline?(a(),i("div",Qe,"Offline Consultancy Available")):r("",!0),s.clinicVisitStatus?(a(),i("div",Xe,"Clinic Studio Consultancy Available")):r("",!0)])):(a(),i("div",Ze,tt))],8,We)]))),128))])]),e.timePickerStatus?(a(),i("div",rt,[dt,V(L,{modelValue:e.timePicker,"onUpdate:modelValue":l[6]||(l[6]=s=>e.timePicker=s)},null,8,["modelValue"])])):(a(),i("div",st,[lt,t("div",ot,[(a(!0),i(F,null,I(u.value.slotTimeData,(s,d)=>(a(),i("div",{class:"slot-item-time",key:d},[t("label",{for:`inputs-${d}`},[v(t("input",{type:"radio",id:`inputs-${d}`,name:"slotTime","onUpdate:modelValue":l[5]||(l[5]=S=>D.value=S),value:s.time,onChange:S=>e.slotId=s.id},null,40,it),[[E,D.value]]),t("div",nt,n(w(s.time)),1)],8,at)]))),128))])])),e.showPdetails?(a(),i("div",ct,"Patient Details :")):r("",!0),e.showPdetails?(a(),i("div",ut,[t("div",mt,[t("div",_t,[vt,v(t("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=s=>e.firstName=s),placeholder:"Enter First Name"},null,512),[[g,e.firstName]]),e.submit&&N.value?(a(),i("div",ht,n(N.value),1)):r("",!0)]),t("div",pt,[ft,v(t("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=s=>e.lastName=s),placeholder:"Enter Last Name"},null,512),[[g,e.lastName]]),e.submit&&N.value?(a(),i("div",kt,n(N.value),1)):r("",!0)]),t("div",bt,[Dt,v(t("input",{type:"text","onUpdate:modelValue":l[9]||(l[9]=s=>e.contactNumber=s),placeholder:"Enter Phone",onKeypress:l[10]||(l[10]=s=>J(s)),maxlength:"10"},null,544),[[g,e.contactNumber]]),e.submit&&C.value?(a(),i("div",yt,n(C.value),1)):r("",!0)])]),t("div",St,[t("div",gt,[Pt,v(t("input",{type:"text","onUpdate:modelValue":l[11]||(l[11]=s=>e.email=s),placeholder:"Enter Email"},null,512),[[g,e.email]]),e.submit&&O.value?(a(),i("div",Nt,n(O.value),1)):r("",!0)]),t("div",Vt,[Yt,V(R,{modelValue:e.patientGender,"onUpdate:modelValue":l[12]||(l[12]=s=>e.patientGender=s),options:$},null,8,["modelValue"]),e.submit&&T.value?(a(),i("div",At,n(T.value),1)):r("",!0)]),t("div",Et,[wt,v(t("input",{type:"date","onUpdate:modelValue":l[13]||(l[13]=s=>e.dob=s),placeholder:"Enter Age",max:x()},null,8,Mt),[[g,e.dob]]),e.submit&&M.value?(a(),i("div",Tt,n(M.value),1)):r("",!0)])])])):r("",!0),e.error?(a(),i("div",Ct,n(e.error),1)):r("",!0),t("div",Ot,[t("button",{type:"button",class:"btn black-btn w-10-r",onClick:U(B,["prevent"])},"Book")])])])])):r("",!0)])}}};export{xt as default};
