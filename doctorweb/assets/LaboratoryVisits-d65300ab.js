import{u as x,B as H,C as W,c as m,v as G,D as O,r as Y,o as n,a as r,b as t,t as i,F as z,E as J,f as U,d as f,w as L,m as K,g as E}from"./vendor-5e5c4e37.js";import{_ as Q}from"./img-85a4a537.js";const X={class:"total-visits-page"},Z={class:"container"},tt={class:"name-card-header mb-16"},st={class:"top-details"},ot={class:"left"},et={class:"top"},it={class:"name grade-text"},at={class:"id"},lt={class:"options"},ct={class:"visit-btn btn"},dt={class:"bottom-details"},nt={class:"row"},rt={class:"data col-5 mb-16"},_t=t("div",{class:"title"},"Gender :",-1),pt={class:"val"},vt={class:"data col-5 mb-16"},ut=t("div",{class:"title"},"Age :",-1),ht={class:"val"},mt={class:"row"},ft={class:"data col-5 mb-16"},gt=t("div",{class:"title"},"Mobile No :",-1),bt={class:"val"},Dt={class:"data col-5 mb-16"},wt=t("div",{class:"title"},"Email :",-1),yt={class:"val"},kt={class:"row"},Pt={class:"data col-5 mb-16"},Ct=t("div",{class:"title"},"Date & Time :",-1),Tt={class:"val"},Rt={class:"data col-5 mb-16"},At=t("div",{class:"title"},"Mode :",-1),Ft={class:"val"},It={class:"row"},Nt={class:"data col-5 mb-16"},Yt=t("div",{class:"title"},"Type :",-1),Ut={class:"val"},Lt={class:"data col-5 mb-16"},Et=t("div",{class:"title"},"Status :",-1),St={class:"val"},$t={class:"row"},Mt={class:"data col-5 mb-16"},Vt=t("div",{class:"title"},"Token :",-1),Bt={class:"val"},jt={class:"data col-5 mb-16"},qt=t("div",{class:"title"},"Payment Status :",-1),xt={class:"val"},Ht={class:"visit-section"},Wt=t("div",{class:"header-section"},[t("h3",null,"Test")],-1),Gt={class:"card"},Ot={class:"card-body"},zt={class:"table-row w-100"},Jt={class:"w-100"},Kt={class:"table-outer w-100"},Qt={class:"table w-100"},Xt=t("thead",null,[t("th",null,"Sr. No."),t("th",null,"Name"),t("th",null,"Report Within"),t("th",null,"Price"),t("th",null,"Discount Price"),t("th",null,"Discount"),t("th",null,"Report"),t("th",null,"Action")],-1),Zt={class:"report-container"},ts={class:"table-report"},ss=["src"],os={class:"table-report"},es=["src"],is={class:"table-report"},as=["src"],ls={key:0,class:"flex"},cs={key:0,class:"action-icon stus"},ds=["onClick"],ns=t("div",{class:"tooltip"},"Upload Report 1",-1),rs={key:1,class:"action-icon stus"},_s=["onClick"],ps=t("div",{class:"tooltip"},"Upload Report 2",-1),vs={key:2,class:"action-icon stus"},us=["onClick"],hs=t("div",{class:"tooltip"},"Upload Report 3",-1),ms={key:3,class:"action-icon stus"},fs=t("div",{class:"text-green report-status"},"Complited",-1),gs=t("div",{class:"tooltip"},"No more upload options",-1),bs=[fs,gs],Ds={key:1},ws={key:0,class:"table-no-data"},ys=t("div",null,"No records Found!",-1),ks=[ys],Ps=t("div",{class:"title",showHeader:"true"},"Add Doucoment",-1),Cs={class:"doc-upload"},Ts={class:"middle-doc"},Rs=t("div",{class:"title"},"Upload Test Doucoment",-1),As={class:"pic-upload"},Fs=["src"],Is={key:1,src:Q,class:"dummy-img pic",alt:""},Ns=t("label",{for:"imgUpload-doc",class:"upload-file-block"}," Upload image ",-1),Ys={key:0,class:"err-msg"},Us={class:"icon"},Ls=t("button",{type:"submit",class:"btn black-btn w-100"},"Add",-1),Ms={__name:"LaboratoryVisits",setup(Es){const p=x(),u=H();W(),m(()=>p.state.Agora);const l=m(()=>p.state.Prescription);m(()=>p.state.Auth);const s=G({limit:10,offset:0,keyword:"",id:null,appointmentId:null,roles:null,addDocModal:!1,reportTab:null,imagePreview:null,docFile:null,reportId:null});O(()=>{u.query.pid&&(s.id=u.query.pid,s.appointmentId=u.query.aid,s.roles=localStorage.getItem("roles"),S(s.id,s.limit,s.offset,s.keyword,s.appointmentId))});function S(a,o,d,c,_){p.dispatch("Prescription/getPrescription",{id:a,limit:o,offset:d,keyword:c,appointmentId:_})}function $(a){if(a){var o=new Date,d=new Date(a),c=o.getFullYear()-d.getFullYear(),_=o.getMonth()-d.getMonth();if(o.getDay()-d.getDay(),c===0)var v=`${_} M`;else if(c!=0&&_!=0)var v=`${c} Y ${_} M`;else var v=`${c} Y`;return v}else return"-"}function M(){var a=new Date,o=a.getDate(),d=a.getFullYear(),c=a.getMonth()+1;c<10&&(c="0"+c),o<10&&(o="0"+o);var _=d+"-"+c+"-"+o;return _}function h(a,o){s.addDocModal=!0,s.reportTab=a,s.reportId=o}function V(){s.reportTab==1?p.dispatch("Prescription/report1",{file:s.docFile,id:s.reportId}):s.reportTab==2?p.dispatch("Prescription/report2",{file:s.docFile,id:s.reportId}):s.reportTab==3&&p.dispatch("Prescription/report3",{file:s.docFile,id:s.reportId}),s.addDocModal=!1}async function B(a){if(a){const o=await a.target;if(o.files[0].type==="image/png"||o.files[0].type==="image/jpg"||o.files[0].type==="image/jpeg"){if(o.files){const d=new FileReader;d.onload=c=>{s.imagePreview=c.target.result},o.files[0]&&(d.readAsDataURL(o.files[0]),s.docFile=o.files[0])}}else s.imagePreview=null,p.dispatch("Alert/error",{msg:"Upload image in png, jpeg, jpg format."})}}function j(a){if(a)return K(a).subtract({hours:4,minutes:30}).format("MMM Do YYYY, h:mm A")}return(a,o)=>{var _,v,g,b,D,w,y,k,P,C;const d=Y("icon-cross"),c=Y("Modal");return n(),r("section",X,[t("div",Z,[t("div",tt,[t("div",st,[t("div",ot,[t("div",et,[t("h3",it,i((_=l.value.patientDetail)==null?void 0:_.firstName)+" "+i((v=l.value.patientDetail)==null?void 0:v.lastName),1),t("div",at,"("+i((g=l.value.patientDetail)==null?void 0:g.pid)+")",1)])]),t("div",lt,[t("div",ct,[t("h5",null,i((b=l.value.prescriptionData)==null?void 0:b.length)+" Visits",1),t("span",null,"Since "+i(M()),1)])])]),t("div",dt,[t("div",nt,[t("div",rt,[_t,t("div",pt,i((D=l.value.patientDetail)==null?void 0:D.gender),1)]),t("div",vt,[ut,t("div",ht,i($((w=l.value.patientDetail)==null?void 0:w.dob))+" Years ",1)])]),t("div",mt,[t("div",ft,[gt,t("div",bt,"+91 "+i((y=l.value.patientDetail)==null?void 0:y.mobile),1)]),t("div",Dt,[wt,t("div",yt,i((k=l.value.patientDetail)==null?void 0:k.email),1)])]),t("div",kt,[t("div",Pt,[Ct,t("div",Tt,i(j(l.value.scheduleOn)),1)]),t("div",Rt,[At,t("div",Ft,i(l.value.mode),1)])]),t("div",It,[t("div",Nt,[Yt,t("div",Ut,i(l.value.type),1)]),t("div",Lt,[Et,t("div",St,i(l.value.status),1)])]),t("div",$t,[t("div",Mt,[Vt,t("div",Bt,i(l.value.appointmentId),1)]),t("div",jt,[qt,t("div",xt,i((P=l.value.paymentHistory)==null?void 0:P.status),1)])])])]),t("div",Ht,[Wt,t("div",Gt,[t("div",Ot,[t("div",zt,[t("div",Jt,[t("div",Kt,[t("table",Qt,[Xt,t("tbody",null,[(n(!0),r(z,null,J(l.value.appointmentLabtest,(e,q)=>{var T,R,A,F,I;return n(),r("tr",{key:a.item},[t("td",null,i(q+1),1),t("td",null,i((T=e.labTest)==null?void 0:T.title),1),t("td",null,i((R=e.labTest)==null?void 0:R.reportWithin)+" Days",1),t("td",null,"₹"+i((A=e.labTest)==null?void 0:A.price),1),t("td",null,"₹"+i((F=e.labTest)==null?void 0:F.discountPrice),1),t("td",null,i((I=e.labTest)==null?void 0:I.discount)+"%",1),t("td",null,[t("div",Zt,[t("div",ts,[t("img",{class:"w-100",src:e.report1,alt:""},null,8,ss)]),t("div",os,[t("img",{class:"w-100",src:e.report2,alt:""},null,8,es)]),t("div",is,[t("img",{class:"w-100",src:e.report3,alt:""},null,8,as)])])]),t("td",null,[l.value.status!=="CANCELLED"?(n(),r("div",ls,[e.report1?e.report1&&!e.report2?(n(),r("div",rs,[t("div",{class:"btn report-status",onClick:N=>h(2,e.id)}," Report 2 ",8,_s),ps])):e.report2&&!e.report3?(n(),r("div",vs,[t("div",{class:"btn report-status",onClick:N=>h(3,e.id)}," Report 3 ",8,us),hs])):(n(),r("div",ms,bs)):(n(),r("div",cs,[t("div",{class:"btn report-status",onClick:N=>h(1,e.id)}," Report 1 ",8,ds),ns]))])):(n(),r("div",Ds," CANCELLED "))])])}),128))])])]),((C=l.value.appointmentLabtest)==null?void 0:C.length)<=0?(n(),r("div",ws,ks)):U("",!0)])])])])])]),f(c,{show:s.addDocModal,"onUpdate:show":o[2]||(o[2]=e=>s.addDocModal=e),class:"add-Education-doc",headerClasses:"header-bg"},{header:L(()=>[Ps,t("div",{class:"close-btn",onClick:o[0]||(o[0]=E(e=>s.addDocModal=!1,["prevent"]))},[f(d)])]),default:L(()=>[t("form",{action:"",class:"form",onSubmit:E(V,["prevent"])},[t("div",Cs,[t("div",Ts,[Rs,t("div",As,[s.imagePreview?(n(),r("img",{key:0,src:s.imagePreview,class:"preview-image pic",id:"profilePic",alt:""},null,8,Fs)):(n(),r("img",Is)),Ns,t("input",{class:"uploadProfileInput",type:"file",name:"profile_pic",id:"imgUpload-doc",accept:"image/*",onChange:o[1]||(o[1]=e=>B(e,a.profilePic)),style:{display:"none"}},null,32)]),s.imagePreview?U("",!0):(n(),r("div",Ys," Please upload image "))]),t("div",Us,[f(d,{onClick:a.removeImageDoc},null,8,["onClick"])])]),Ls],32)]),_:1},8,["show"])])}}};export{Ms as default};
