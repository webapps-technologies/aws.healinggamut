import{u as it,C as ct,c as Y,v as dt,m as v,D as rt,r as D,o as n,a as c,b as t,t as a,x as M,y as O,d as m,F as ut,E as _t,f as u,w as C,e as w,g as N}from"./vendor-5e5c4e37.js";import{_ as U}from"./calender-9d47370a.js";import{_ as F}from"./eye-cf19e0ab.js";const V="/assets/mobile-c2a5b9be.png",K="/assets/call-start2-ef3d20c3.png",mt="/assets/reshudule-d603d287.png",pt="/assets/follow-up-23ba67a9.png",ht="/assets/cancel-icon-0626ff6b.png",vt={class:"consult-page"},ft={class:"container"},Dt={class:"consult-table-data"},Ct={class:"card stat-card mb-16"},kt={class:"stats"},gt={class:"stat PENDING"},bt=t("img",{src:V,alt:"image"},null,-1),yt={class:"vals"},Et={class:"no"},Lt=t("h3",{class:"text"},"Pending",-1),Nt={class:"stat COMPLETED"},At=t("img",{src:V,alt:"image"},null,-1),Mt={class:"vals"},Ot={class:"no"},It=t("h3",{class:"text"},"Completed",-1),Pt={class:"stat REJECTED"},Tt=t("img",{src:V,alt:"image"},null,-1),Yt={class:"vals"},wt={class:"no"},Ut=t("h3",{class:"text"},"Cancelled",-1),Ft={class:"search-section"},Vt={class:"row"},Rt={class:"col-25"},St={class:"col-25"},xt={class:"date-input"},Bt=t("div",{class:"icon"},[t("img",{src:U,alt:""})],-1),$t={class:"col-25"},Gt={class:"date-input"},Ht=t("div",{class:"icon"},[t("img",{src:U,alt:""})],-1),Wt={class:"col-25"},qt={class:"col-25"},Jt={class:"col-25"},jt={class:"card table-card"},zt={class:"consult-table"},Kt=t("div",{class:"title-header mb-16"},[t("div",{class:"title"},"Consultation Logs")],-1),Qt={class:"table-outer"},Xt={class:"table"},Zt=t("thead",null,[t("th",null,"#Token"),t("th",null,"Name"),t("th",null,"Email"),t("th",null,"Visits"),t("th",null,"Time"),t("th",null,"Status"),t("th",null,"Purpose"),t("th",{class:"text-center"},"Actions")],-1),ts={class:"token"},ss={key:0,class:"tag green-tag"},es={key:1,class:"tag yellow-tag"},os={key:2,class:"tag red-tag"},ls={class:"text-center"},ns={class:"option-btns"},as=t("img",{src:F,alt:""},null,-1),is=t("div",{class:"tooltip"},"Details",-1),cs=t("img",{src:F,alt:""},null,-1),ds=t("div",{class:"tooltip"},"Details",-1),rs=t("img",{src:F,alt:""},null,-1),us=t("div",{class:"tooltip"},"Details",-1),_s=["onClick"],ms=t("img",{src:K,alt:""},null,-1),ps=t("div",{class:"tooltip"},"Call",-1),hs=[ms,ps],vs=["onClick"],fs=t("img",{src:K,alt:""},null,-1),Ds=t("div",{class:"tooltip"},"Call",-1),Cs=[fs,Ds],ks=["onClick"],gs=t("img",{src:mt,alt:""},null,-1),bs=t("div",{class:"tooltip"},"Reschedule",-1),ys=[gs,bs],Es=["onClick"],Ls=t("img",{src:pt,alt:""},null,-1),Ns=t("div",{class:"tooltip"},"Follow Up",-1),As=[Ls,Ns],Ms=["onClick"],Os=t("img",{src:ht,alt:""},null,-1),Is=t("div",{class:"tooltip"},"Cencel",-1),Ps=[Os,Is],Ts={key:0,class:"table-no-data"},Ys=t("div",null,"No records Found!",-1),ws=[Ys],Us={key:1,class:"table-footer"},Fs=t("h4",null,"Are you sure want to Delete",-1),Vs={class:"btns"},Rs={class:"title",showHeader:"true"},Ss={class:"form"},xs={class:"form-item-two"},Bs={class:"title"},$s={class:"date-input mb-10"},Gs=["min"],Hs=t("div",{class:"icon"},[t("img",{src:U,alt:""})],-1),Ws={class:"mb-16 w-40"},qs={class:"title"},Js={key:0,class:"err-msg"},Zs={__name:"Visits",setup(js){const _=it(),Q=ct(),R=Y(()=>_.state.Agora),d=Y(()=>_.state.Appointments),S=[{id:"ALL",name:"ALL"},{id:"PENDING",name:"PENDING"},{id:"COMPLETED",name:"COMPLETED"},{id:"CANCELLED",name:"CANCELLED"}],x=[{id:"ALL",name:"ALL"},{id:"NEW",name:"NEW"},{id:"FOLLOW UP",name:"FOLLOW UP"}],B=[{id:"ALL",name:"ALL"},{id:"ONLINE",name:"ONLINE"},{id:"OFFLINE",name:"OFFLINE"}],s=dt({limit:10,offset:0,currentPage:1,keyword:"",submit:!1,status:S[0],type:B[0],mode:x[0],scheduleType:"ALL",appointmentFor:"ALL",fromDate:v().format("YYYY-MM-DD"),toDate:v().add(30,"days").format("YYYY-MM-DD"),scheduleOn:v().format("YYYY-MM-DD"),timePicker:"00:00",cPage:1,roles:null,confirmModal:!1,appointmentId:null,modalTitle:null});rt(()=>{s.roles=localStorage.getItem("roles"),A()});function A(){var l,o,r;_.dispatch("Appointments/getAppointments",{limit:s.limit,offset:s.offset,keyword:s.keyword,status:(l=s.status)==null?void 0:l.id,type:(o=s.type)==null?void 0:o.id,fromDate:s.fromDate,toDate:s.toDate,mode:(r=s.mode)==null?void 0:r.id,scheduleType:s.scheduleType,appointmentFor:s.appointmentFor})}function X(){s.fromDate=v().format("YYYY-MM-DD"),s.toDate=v().format("YYYY-MM-DD"),A()}function I(l,o,r){Q.push({path:l,query:{pid:o,aid:r}})}const Z=async(l,o,r,p,k,f,g)=>{R.value.callModal=!0,await _.dispatch("Agora/connectCall",{callFrom:"DOCTOR",callerName:o,doctorDetailId:r,callerAccountId:p,franchiseId:null,callerPhone:k,token:null,receiverAccountId:l,appointmentId:f,userName:g})},tt=async(l,o,r,p,k,f,g,T)=>{R.value.callModal=!0,await _.dispatch("Agora/connectCall",{callFrom:"FRANCHISE",callerName:o,doctorDetailId:T,callerAccountId:p,franchiseId:r,callerPhone:k,token:null,receiverAccountId:l,appointmentId:f,userName:g})};function st(l){s.confirmModal=!0,s.appointmentId=l}function et(){_.dispatch("Appointments/cancelAppointments",{id:s.appointmentId}),s.confirmModal=!1}const ot=l=>{s.currentPage=l,s.offset=s.limit*(l-1),A()};function $(l,o){s.appointmentId=l,s.modalTitle=o,d.value.scheduleModal=!0}function lt(){if(P.value)return s.submit=!0,null;s.submit=!1,s.modalTitle==="Reschedule"?_.dispatch("Appointments/saveReshedule",{id:s.appointmentId,scheduleOn:s.scheduleOn+"T"+s.timePicker}):s.modalTitle==="Follow Up"&&_.dispatch("Appointments/saveFollowUp",{id:s.appointmentId,scheduleOn:s.scheduleOn+"T"+s.timePicker}),d.value.scheduleModal=!1}function nt(){return v().format("YYYY-MM-DD")}const P=Y(()=>{if(s.timePicker=="00:00")return"Please Select Time"});function at(l){return l?v(l).subtract({hours:4,minutes:30}).format("MMM Do YYYY, h:mm A"):"-"}return(l,o)=>{var G,H;const r=D("Select"),p=D("router-link"),k=D("Pagination"),f=D("Modal"),g=D("icon-cross"),T=D("time-picker");return n(),c("section",vt,[t("div",ft,[t("div",Dt,[t("div",Ct,[t("div",kt,[t("div",gt,[bt,t("div",yt,[t("div",Et,a(d.value.PENDING_COUNT),1),Lt])]),t("div",Nt,[At,t("div",Mt,[t("div",Ot,a(d.value.COMPLETED_COUNT),1),It])]),t("div",Pt,[Tt,t("div",Yt,[t("div",wt,a(d.value.CANCELLED_COUNT),1),Ut])])]),t("div",Ft,[t("div",Vt,[t("div",Rt,[M(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>s.keyword=e),placeholder:"Search by name"},null,512),[[O,s.keyword]])]),t("div",St,[t("div",xt,[M(t("input",{type:"date","onUpdate:modelValue":o[1]||(o[1]=e=>s.fromDate=e)},null,512),[[O,s.fromDate]]),Bt])]),t("div",$t,[t("div",Gt,[M(t("input",{type:"date","onUpdate:modelValue":o[2]||(o[2]=e=>s.toDate=e)},null,512),[[O,s.toDate]]),Ht])]),t("div",Wt,[m(r,{modelValue:s.status,"onUpdate:modelValue":o[3]||(o[3]=e=>s.status=e),options:S},null,8,["modelValue"])]),t("div",qt,[m(r,{modelValue:s.mode,"onUpdate:modelValue":o[4]||(o[4]=e=>s.mode=e),options:x},null,8,["modelValue"])]),t("div",Jt,[m(r,{modelValue:s.type,"onUpdate:modelValue":o[5]||(o[5]=e=>s.type=e),options:B},null,8,["modelValue"])]),t("div",{class:"col-25"},[t("button",{class:"btn yellow-btn",onClick:X},"Today")]),t("div",{class:"col-25"},[t("button",{class:"btn black-btn",onClick:A},"SUBMIT")])])])]),t("div",jt,[t("div",zt,[Kt,t("div",Qt,[t("table",Xt,[Zt,t("tbody",null,[(n(!0),c(ut,null,_t(d.value.appointmentsData,(e,zs)=>{var W,q,J;return n(),c("tr",{key:e},[t("td",null,[t("span",ts,a(e.appointmentId),1)]),t("td",null,a((W=e.patientDetail)==null?void 0:W.firstName)+" "+a((q=e.patientDetail)==null?void 0:q.lastName),1),t("td",null,a((J=e.patientDetail)==null?void 0:J.email),1),t("td",null,a(e.mode),1),t("td",null,a(at(e.scheduleOn)),1),t("td",null,[e.status==="COMPLETED"?(n(),c("div",ss,a(e.status),1)):u("",!0),e.status==="PENDING"?(n(),c("div",es,a(e.status),1)):u("",!0),e.status==="CANCELLED"?(n(),c("div",os,a(e.status),1)):u("",!0)]),t("td",null,a(e.type),1),t("td",ls,[t("div",ns,[s.roles==="DOCTOR"||s.roles==="NURSE"||s.roles==="HOSPITAL"||s.roles==="FRANCHISE"&&e.type!=="OFFLINE"?(n(),w(p,{key:0,to:"",class:"action-icon",onClick:h=>{var i;return I("/visit-summary",(i=e.patientDetail)==null?void 0:i.id,e.id)}},{default:C(()=>[as,is]),_:2},1032,["onClick"])):s.roles==="LABORATORY"?(n(),w(p,{key:1,to:"",class:"action-icon",onClick:h=>{var i;return I("/lab-visit-summary",(i=e.patientDetail)==null?void 0:i.id,e.id)}},{default:C(()=>[cs,ds]),_:2},1032,["onClick"])):s.roles==="AMBULANCE"?(n(),w(p,{key:2,to:"",class:"action-icon",onClick:h=>{var i;return I("/ambulance-visit-summary",(i=e.patientDetail)==null?void 0:i.id,e.id)}},{default:C(()=>[rs,us]),_:2},1032,["onClick"])):u("",!0),s.roles!=="LABORATORY"&&s.roles!=="AMBULANCE"&&e.status!=="CANCELLED"&&s.roles==="DOCTOR"||s.roles==="NURSE"?(n(),c("div",{key:3,class:"action-icon",onClick:N(h=>{var i,b,y,E,L;return Z(e.accountId,(i=e.doctorDetail)==null?void 0:i.name,(b=e.doctorDetail)==null?void 0:b.id,(y=e.doctorDetail)==null?void 0:y.accountId,(E=e.doctorDetail)==null?void 0:E.mobile,e.id,(L=e.account)==null?void 0:L.phoneNumber)},["prevent"])},hs,8,_s)):u("",!0),s.roles!=="LABORATORY"&&s.roles!=="AMBULANCE"&&s.roles==="FRANCHISE"&&e.status!=="CANCELLED"?(n(),c("div",{key:4,class:"action-icon",onClick:N(h=>{var i,b,y,E,L,j,z;return tt((i=e.doctorDetail)==null?void 0:i.accountId,(b=e.franchise)==null?void 0:b.name,(y=e.franchise)==null?void 0:y.id,(E=e.franchise)==null?void 0:E.accountId,(L=e.franchise)==null?void 0:L.contactNumber,e.id,(j=e.doctorDetail)==null?void 0:j.name,(z=e.doctorDetail)==null?void 0:z.id)},["prevent"])},Cs,8,vs)):u("",!0),e.status!=="CANCELLED"&&e.status==="PENDING"?(n(),c("div",{key:5,class:"action-icon",onClick:h=>$(e.id,"Reschedule")},ys,8,ks)):u("",!0),e.status==="COMPLETED"?(n(),c("div",{key:6,class:"action-icon",onClick:h=>$(e.id,"Follow Up")},As,8,Es)):u("",!0),e.status==="PENDING"?(n(),c("div",{key:7,class:"action-icon",onClick:N(h=>st(e.id),["prevent"])},Ps,8,Ms)):u("",!0)])])])}),128))])])]),((G=d.value.appointmentsData)==null?void 0:G.length)<=0?(n(),c("div",Ts,ws)):u("",!0),((H=d.value.appointmentsData)==null?void 0:H.length)>0?(n(),c("div",Us,[m(k,{currentPage:s.currentPage,totalItem:d.value.totalAppointments,itemsPerPage:s.limit,"onUpdate:currentPage":o[6]||(o[6]=e=>ot(e))},null,8,["currentPage","totalItem","itemsPerPage"])])):u("",!0)])])])]),m(f,{show:s.confirmModal,"onUpdate:show":o[8]||(o[8]=e=>s.confirmModal=e),class:"confirm-modal"},{default:C(()=>[Fs,t("div",Vs,[t("button",{class:"btn grey-btn cancel-btn",onClick:o[7]||(o[7]=N(e=>s.confirmModal=!1,["prevent"]))}," Cancel "),t("button",{class:"btn confirm-btn",onClick:et},"Confirm")])]),_:1},8,["show"]),m(f,{show:d.value.scheduleModal,"onUpdate:show":o[12]||(o[12]=e=>d.value.scheduleModal=e),class:"",headerClasses:"header-bg"},{header:C(()=>[t("div",Rs,a(s.modalTitle),1),t("div",{class:"close-btn",onClick:o[9]||(o[9]=N(e=>d.value.scheduleModal=!1,["prevent"]))},[m(g)])]),default:C(()=>[t("form",Ss,[t("div",xs,[t("div",Bs,a(s.modalTitle)+" Date",1),t("div",$s,[M(t("input",{type:"date","onUpdate:modelValue":o[10]||(o[10]=e=>s.scheduleOn=e),min:nt()},null,8,Gs),[[O,s.scheduleOn]]),Hs]),t("div",Ws,[t("div",qs,a(s.modalTitle)+" Time",1),m(T,{class:"mb-16",modelValue:s.timePicker,"onUpdate:modelValue":o[11]||(o[11]=e=>s.timePicker=e)},null,8,["modelValue"]),s.submit&&P.value?(n(),c("div",Js,a(P.value),1)):u("",!0)])]),t("div",{class:"save-btn form-item"},[t("button",{type:"button",class:"btn black-btn",onClick:lt},"Save")])])]),_:1},8,["show"])])}}};export{Zs as default};
