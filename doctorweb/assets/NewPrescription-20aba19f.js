import{u as ne,B as ae,c as l,s as E,v as de,D as re,G as ce,r as y,o as m,a as p,b as t,t as _,d as h,w as $,x as n,y as a,f,F as ue,E as me,z as pe,g as U,m as C}from"./vendor-5e5c4e37.js";import{_ as _e}from"./eye-cf19e0ab.js";import{_ as he}from"./calender-9d47370a.js";import{_ as ve}from"./delete-f387c4f0.js";const fe={class:"new-prescription-page"},ye={class:"container"},be={class:"visit-section"},De={class:"card form"},ge={class:"card-header"},Ve={class:"left"},Se={class:"date"},we={class:"dr-name"},ke={class:"right-options"},Pe=t("img",{src:_e,alt:"image"},null,-1),Me=t("div",{class:"text"},"View",-1),xe={class:"card-body"},Ue={class:"top-details"},Ce={class:"input-row two-inputs"},Ne={class:"top flex gap-16"},qe={class:"form-item mb-16"},Ie=t("div",{class:"title"},"Blood Pressure",-1),Te={key:0,class:"err-msg"},Oe={class:"form-item mb-16"},Ae=t("div",{class:"title"},"Pulse",-1),Be={key:0,class:"err-msg"},Ee={class:"bottom flex gap-16 w-100"},$e={class:"form-item mb-16"},Re=t("div",{class:"title"},"SpO2",-1),Je={class:"form-item mb-16"},ze=t("div",{class:"title"},"Height",-1),Fe={key:0,class:"err-msg"},Le={class:"form-item mb-16"},We=t("div",{class:"title"},"Weight",-1),Ye={key:0,class:"err-msg"},Ge={class:"form-item mb-16"},He=t("div",{class:"title"},"Temperature",-1),Ke={key:0,class:"err-msg"},je={class:"other-details"},Qe={class:"row"},Xe={class:"col-5 form-item mb-16"},Ze=t("div",{class:"title"},"Complaints",-1),et={key:0,class:"err-msg"},tt={class:"col-5 form-item mb-16"},st=t("div",{class:"title"},"Quick Notes",-1),ot={class:"row"},it={class:"col-5 form-item mb-16"},lt=t("div",{class:"title"},"Past History",-1),nt={class:"col-5 form-item mb-16"},at=t("div",{class:"title"},"Advice",-1),dt={class:"row"},rt={class:"col-5 form-item mb-16"},ct=t("div",{class:"title"},"Past Medication",-1),ut={class:"col-5 form-item mb-16"},mt=t("div",{class:"title"},"Tests Require",-1),pt={class:"row"},_t={class:"col-5 form-item mb-16"},ht=t("div",{class:"title"},"Other Notes",-1),vt={class:"col-5 form-item mb-16"},ft=t("div",{class:"title"},"Next Visit",-1),yt={class:"row two-inputs"},bt={class:"col-7 form-item"},Dt={class:"date-input"},gt=["min"],Vt=t("div",{class:"icon"},[t("img",{src:he,alt:""})],-1),St={class:"col-3 form-item"},wt=t("thead",{class:""},[t("tr",null,[t("th",null,"Sr. No."),t("th",null,"Medicine"),t("th",null,"Duration"),t("th",null,"Frequency"),t("th",null,"When"),t("th",null,"Note"),t("th",{class:"text-center"},"Action")])],-1),kt={"data-label":"Sr. No."},Pt={"data-label":"Medicine"},Mt={"data-label":"Duration"},xt={"data-label":"Frequency"},Ut={"data-label":"When"},Ct={"data-label":"Note"},Nt=["onUpdate:modelValue"],qt={"data-label":"Action"},It=["onClick"],Tt=t("img",{src:ve,alt:""},null,-1),Ot=[Tt],At={class:"row bottom-row"},Bt={class:"two-inputs col-6"},Et={class:"col-5 form-item mb-16"},$t=t("div",{class:"title"},"Refered By",-1),Rt={class:"dr-input"},Jt=t("div",{class:"dr-tag"},"Dr",-1),zt={class:"col-5 form-item mb-16"},Ft=t("div",{class:"title"},"Select Speciality",-1),Lt={class:"two-inputs col-4"},Wt={class:"col-5 form-item mb-16"},Yt=t("div",{class:"title"},"Phone No",-1),Gt={class:"dr-input"},Ht=t("div",{class:"dr-tag"},"+91",-1),Kt={class:"col-5 form-item mb-16"},jt=t("div",{class:"title"},"Email Id",-1),Qt={class:"dr-input"},Xt=t("div",{class:"dr-tag"},"M",-1),Zt={class:"save-btns row justify-center align-center"},es={class:"col-25"},ts=t("h4",null," Are you sure want to Delete ",-1),ss={class:"btns"},ds={__name:"NewPrescription",setup(os){const v=ne(),D=ae(),g=l(()=>v.state.Prescription),V=l(()=>v.state.Auth),N=E(null);E([]);const R=[{id:1,name:"ENT"},{id:2,name:"General Surgen"}],e=de({limit:10,offset:0,keyword:"",type:"DOCTOR",keyword1:"",keyword6:"",keyword7:"",cPage:1,medicineIndex:null,outside:!1,confirmModal:!1,submit:!1,blood_pressure:null,pulse:null,spo2:null,height:null,weight:null,temperature:null,complaints:null,quick_notes:null,past_history:null,advice:null,past_medication:null,tests_require:null,other_notes:null,next_visit:null,speciality:null,refered_by:null,refered_byDoctor:null,phone:null,email:null,id:null,appointmentId:null,age:null,prescribeData:[{medicine_description:"",medicine_name:"",tab:{duration:"",durationType:"",frequency:"",instruction:"",note:""}}]}),J=i=>{e.prescribeData.length===i&&e.prescribeData.push({medicine_description:"",medicine_name:"",tab:{duration:"",durationType:"",frequency:"",instruction:""}})},z=()=>{var i;if(S.value||w.value||k.value||P.value||M.value||x.value){e.submit=!0;return}e.submit=!1,v.dispatch("Prescription/savePrescription",{height:e.height,weight:e.weight,pulse_rate:e.pulse.toString(),temprature:e.temperature,blood_pressure:e.blood_pressure,spo2:e.spo2,complaint:e.complaints,history:e.past_history,medication:null,investigation:null,diagnosis:null,medicine:JSON.stringify(e.prescribeData),next_visit:e.next_visit,advice:e.advice,quick_notes:e.quick_notes,other_notes:e.other_notes,tests:JSON.stringify(e.tests_require),patientDetailId:e.id,doctorDetailId:V.value.doctorDetailId,refDoctor:e.refered_by,refDoctorSpeciality:(i=e.speciality)==null?void 0:i.name,refDoctorEmail:e.email,refDoctorPhone:e.phone,appointmentId:e.appointmentId,accountId:V.value.accountId})};function q(i,s,d,u){v.dispatch("Prescription/getAllTest",{limit:i,offset:s,keyword:d,status:u})}function I(i,s,d,u){v.dispatch("Prescription/getAllMedicine",{limit:i,offset:s,keyword:d,status:u})}function T(i,s,d,u,r){v.dispatch("Prescription/getDoctor",{limit:i,offset:s,keyword:d,type:u,cPage:r})}function F(){v.dispatch("Prescription/getAllSpecialization")}const L=i=>{I(e.limit,e.offset,i,!0)},W=i=>{T(e.limit,e.offset,i,e.type,e.cPage)};function Y(){e.prescribeData.length>1?e.prescribeData.splice(e.medicineIndex,1):e.medicineIndex>0&&e.value.splice(e.medicineIndex,1),e.confirmModal=!1}function G(i){e.confirmModal=!0,e.medicineIndex=i}const O=i=>{if(!N.value.contains(i.target)){const d=document.getElementsByClassName("table-select");Array.from(d).forEach(r=>{r.classList.remove("show-drop")})}};re(()=>{document.addEventListener("click",O),D.query.pid&&(e.id=D.query.pid,e.appointmentId=D.query.aid,q(e.limit,e.offset,e.keyword,"ACTIVE"),I(e.limit,e.offset,e.keyword,!0),T(e.limit,e.offset,e.keyword,e.type,e.cPage),F())});const H=i=>{q(e.limit,e.offset,i,"ACTIVE")};ce(()=>{document.removeEventListener("click",O)});function K(){let i=C().diff(e.next_visit,"days"),s=JSON.parse(i)-1+" Days";if(JSON.parse(i)-1<-30){let r=C().diff(e.next_visit,"months");var d=JSON.parse(i)-1-30*r,u=`${JSON.stringify(r).slice(1)} Month ${JSON.stringify(d).slice(1)} Days`;e.age=u}else e.age=s.slice(1)}function A(){return C().format("YYYY-MM-DD")}const j=[{id:"1-0-0",name:"1-0-0"},{id:"1-1-0",name:"1-1-0"},{id:"0-1-1",name:"0-1-1"},{id:"1-1-1",name:"1-1-1"},{id:"1-0-1",name:"1-0-1"}],Q=[{id:"1 Day",name:"1 Day"},{id:"2 Day",name:"2 Day"},{id:"3 Day",name:"3 Day"},{id:"4 Day",name:"4 Day"},{id:"5 Day",name:"5 Day"},{id:"6 Day",name:"6 Day"},{id:"7 Day",name:"7 Day"},{id:"8 Day",name:"8 Day"},{id:"9 Day",name:"9 Day"},{id:"10 Day",name:"10 Day"},{id:"11 Day",name:"11 Day"},{id:"12 Day",name:"12 Day"},{id:"13 Day",name:"13 Day"},{id:"14 Day",name:"14 Day"},{id:"15 Day",name:"15 Day"},{id:"16 Day",name:"16 Day"},{id:"17 Day",name:"17 Day"},{id:"18 Day",name:"18 Day"},{id:"19 Day",name:"19 Day"},{id:"20 Day",name:"20 Day"}],X=[{id:"Before_Meal",name:"Before Meal"},{id:"After_Meal",name:"After Meal"},{id:"Empty_Stomach",name:"Empty Stomach In Morning"}],Z=i=>{e.tests_require=i},ee=i=>{},te=i=>{},se=[],S=l(()=>{if(!e.blood_pressure)return"Please enter your BP!"}),w=l(()=>{if(!e.pulse)return"Please enter pulse!"}),k=l(()=>{if(!e.height)return"Please enter height!"}),P=l(()=>{if(!e.weight)return"Please enter weight!"}),M=l(()=>{if(!e.temperature)return"Please enter temperature!"}),x=l(()=>{if(!e.complaints)return"Please select complaints!"});l(()=>{if(!e.quick_notes)return"Please enter quick notes!"}),l(()=>{if(!e.past_history)return"Please select past history!"}),l(()=>{if(!e.advice)return"Please enter advice!"}),l(()=>{if(!e.past_medication)return"Please select past medication!"}),l(()=>{if(!e.tests_require)return"Please select tests require!"}),l(()=>{if(!e.other_notes)return"Please select other notes!"}),l(()=>{if(!e.next_visit)return"Please select next visit!"}),l(()=>{if(!e.refered_by)return"Please enter doctor name!"}),l(()=>{var i;if(!((i=e.speciality)!=null&&i.id))return"Please select speciality!"}),l(()=>{let i=/^[6-9][0-9]{9}$/;if(e.phone){if(!i.test(e.phone))return"Please enter valid phone no!"}else return"Please enter your phone no!"}),l(()=>{let i=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.email){if(!i.test(e.email))return"Please enter valid email!"}else return"Please enter your email!"});function oe(i){let s=String.fromCharCode(i.keyCode);if(/^[0-9]+$/.test(s))return!0;i.preventDefault()}function ie(i){let s=String.fromCharCode(i.keyCode);if(/^[0-9/]+$/.test(s))return!0;i.preventDefault()}return(i,s)=>{const d=y("router-link"),u=y("MultiSelect"),r=y("TableSelect"),B=y("SingleSelect"),le=y("Modal");return m(),p("section",fe,[t("div",ye,[t("div",be,[t("div",De,[t("div",ge,[t("div",Ve,[t("div",Se,_(A()),1),t("div",we,"By "+_(V.value.name),1)]),t("div",ke,[h(d,{to:"/prescription",class:"data"},{default:$(()=>[Pe,Me]),_:1})])]),t("div",xe,[t("div",Ue,[t("div",Ce,[t("div",Ne,[t("div",qe,[Ie,n(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>e.blood_pressure=o),placeholder:"Blood Pressure",onKeypress:s[1]||(s[1]=o=>ie(o))},null,544),[[a,e.blood_pressure]]),e.submit&&S.value?(m(),p("div",Te,_(S.value),1)):f("",!0)]),t("div",Oe,[Ae,n(t("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=o=>e.pulse=o),placeholder:"Per Minute"},null,512),[[a,e.pulse]]),e.submit&&w.value?(m(),p("div",Be,_(w.value),1)):f("",!0)])]),t("div",Ee,[t("div",$e,[Re,n(t("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=o=>e.spo2=o),placeholder:"In Percentage"},null,512),[[a,e.spo2]])]),t("div",Je,[ze,n(t("input",{type:"number","onUpdate:modelValue":s[4]||(s[4]=o=>e.height=o),placeholder:"In CM"},null,512),[[a,e.height]]),e.submit&&k.value?(m(),p("div",Fe,_(k.value),1)):f("",!0)]),t("div",Le,[We,n(t("input",{type:"number","onUpdate:modelValue":s[5]||(s[5]=o=>e.weight=o),placeholder:"In KG"},null,512),[[a,e.weight]]),e.submit&&P.value?(m(),p("div",Ye,_(P.value),1)):f("",!0)]),t("div",Ge,[He,n(t("input",{type:"number","onUpdate:modelValue":s[6]||(s[6]=o=>e.temperature=o),placeholder:"In Fahrenheit"},null,512),[[a,e.temperature]]),e.submit&&M.value?(m(),p("div",Ke,_(M.value),1)):f("",!0)])])]),t("div",je,[t("div",Qe,[t("div",Xe,[Ze,n(t("input",{type:"text","onUpdate:modelValue":s[7]||(s[7]=o=>e.complaints=o),placeholder:"Complaints"},null,512),[[a,e.complaints]]),e.submit&&x.value?(m(),p("div",et,_(x.value),1)):f("",!0)]),t("div",tt,[st,n(t("input",{type:"text","onUpdate:modelValue":s[8]||(s[8]=o=>e.quick_notes=o),placeholder:"Note"},null,512),[[a,e.quick_notes]])])]),t("div",ot,[t("div",it,[lt,n(t("input",{type:"text","onUpdate:modelValue":s[9]||(s[9]=o=>e.past_history=o),placeholder:"Past History"},null,512),[[a,e.past_history]])]),t("div",nt,[at,n(t("input",{type:"text","onUpdate:modelValue":s[10]||(s[10]=o=>e.advice=o),placeholder:"Advice"},null,512),[[a,e.advice]])])]),t("div",dt,[t("div",rt,[ct,n(t("input",{type:"text","onUpdate:modelValue":s[11]||(s[11]=o=>e.past_medication=o),placeholder:"Past Medication"},null,512),[[a,e.past_medication]])]),t("div",ut,[mt,h(u,{modelValue:e.tests_require,"onUpdate:modelValue":s[12]||(s[12]=o=>e.tests_require=o),options:g.value.allTest,tabs:se,onSpecific:te,onSelected:Z,onSearch:H},null,8,["modelValue","options"])])]),t("div",pt,[t("div",_t,[ht,n(t("input",{type:"text","onUpdate:modelValue":s[13]||(s[13]=o=>e.other_notes=o),placeholder:"Other Notes"},null,512),[[a,e.other_notes]])]),t("div",vt,[ft,t("div",yt,[t("div",bt,[t("div",Dt,[n(t("input",{type:"date","onUpdate:modelValue":s[14]||(s[14]=o=>e.next_visit=o),min:A(),onChange:s[15]||(s[15]=o=>K())},null,40,gt),[[a,e.next_visit]]),Vt])]),t("div",St,[n(t("input",{type:"text","onUpdate:modelValue":s[16]||(s[16]=o=>e.age=o),class:"bg-blue",disabled:""},null,512),[[a,e.age]])])])])])])]),t("table",{class:"prescription-cards-table table mb-16",ref_key:"tableRef",ref:N,onClick:s[17]||(s[17]=(...o)=>i.handleTableClick&&i.handleTableClick(...o))},[wt,t("tbody",null,[(m(!0),p(ue,null,me(e.prescribeData,(o,b)=>(m(),p("tr",{class:"val-row",key:b},[t("td",kt,_(b+1),1),t("td",Pt,[h(r,{modelValue:o.medicine_name,"onUpdate:modelValue":c=>o.medicine_name=c,onSelected:c=>J(b+1),options:g.value.allMedicine,outside:e.outside,placeholder:"",onSearch:L},null,8,["modelValue","onUpdate:modelValue","onSelected","options","outside"])]),t("td",Mt,[h(r,{modelValue:o.tab.duration,"onUpdate:modelValue":c=>o.tab.duration=c,options:Q,outside:e.outside},null,8,["modelValue","onUpdate:modelValue","outside"])]),t("td",xt,[h(r,{modelValue:o.tab.frequency,"onUpdate:modelValue":c=>o.tab.frequency=c,options:j,outside:e.outside},null,8,["modelValue","onUpdate:modelValue","outside"])]),t("td",Ut,[h(r,{modelValue:o.tab.instruction,"onUpdate:modelValue":c=>o.tab.instruction=c,options:X,outside:e.outside},null,8,["modelValue","onUpdate:modelValue","outside"])]),t("td",Ct,[n(t("input",{type:"text","onUpdate:modelValue":c=>o.tab.note=c},null,8,Nt),[[a,o.tab.note]])]),t("td",qt,[t("div",{class:"option-btns pointer",onClick:U(c=>G(b),["prevent"])},Ot,8,It)])]))),128))])],512),t("div",At,[t("div",Bt,[t("div",Et,[$t,t("div",Rt,[Jt,h(B,{modelValue:e.refered_byDoctor,"onUpdate:modelValue":s[18]||(s[18]=o=>e.refered_byDoctor=o),options:g.value.doctorData,onSearch:W},null,8,["modelValue","options"])])]),t("div",zt,[Ft,h(B,{modelValue:e.speciality,"onUpdate:modelValue":s[19]||(s[19]=o=>e.speciality=o),options:R,placeholder:"Select Speciality",onSelected:ee},null,8,["modelValue"])])]),t("div",Lt,[t("div",Wt,[Yt,t("div",Gt,[Ht,pe(" by "),n(t("input",{type:"text","onUpdate:modelValue":s[20]||(s[20]=o=>e.phone=o),placeholder:"Phone no",onKeypress:s[21]||(s[21]=o=>oe(o)),maxlength:"10"},null,544),[[a,e.phone]])])]),t("div",Kt,[jt,t("div",Qt,[Xt,n(t("input",{type:"text","onUpdate:modelValue":s[22]||(s[22]=o=>e.email=o),placeholder:"Email"},null,512),[[a,e.email]])])])])]),t("div",Zt,[t("div",es,[t("button",{type:"button",class:"btn black-btn",onClick:U(z,["prevent"])}," Save ")])])])])])]),h(le,{show:e.confirmModal,"onUpdate:show":s[24]||(s[24]=o=>e.confirmModal=o),class:"confirm-modal"},{default:$(()=>[ts,t("div",ss,[t("button",{class:"btn grey-btn cancel-btn",onClick:s[23]||(s[23]=U(o=>e.confirmModal=!1,["prevent"]))},"Cancel"),t("button",{class:"btn confirm-btn",onClick:Y},"Confirm")])]),_:1},8,["show"])])}}};export{ds as default};
