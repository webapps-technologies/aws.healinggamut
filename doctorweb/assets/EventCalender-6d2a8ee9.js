import{v as Vt,m as l,s as c,D as St,G as Tt,r as v,S as Ut,o as u,a as m,b as t,x as vt,d,g as y,f as _t,y as wt,F as w,E as I,H as F,t as i,w as M,z as D,e as It,U as Ft}from"./vendor-5e5c4e37.js";import{_ as $t}from"./calender-9d47370a.js";import{_ as Pt}from"./user-07284fd4.js";const Bt={class:"event-calendar-section"},xt={class:"top-row"},Rt={class:"left"},Wt={class:"filter"},Gt={key:0,class:"filter-list"},Ht={class:"select-dropdown"},qt={class:"select-dropdown"},zt={class:"select-dropdown"},Kt={class:"select-dropdown"},jt={class:"select-dropdown"},Jt=t("button",{class:"btn black-btn"},"Apply",-1),Qt=[Jt],Xt={class:"date-input"},Zt=t("div",{class:"icon"},[t("img",{src:$t,alt:""})],-1),te={class:"btns"},ee=["onClick"],ae={class:"calender-content"},oe={class:"main-list-time"},se={class:"sub-list"},ne=["onClick"],ie=t("div",{class:"title",showHeader:"true"},"Patient Details",-1),le={class:"p-info-card card card1"},de={class:"top"},re=t("div",{class:"p-img"},[t("img",{src:Pt,alt:""})],-1),ce={class:"p-info"},ue={class:"name"},pe={class:"about"},me={class:"p-id"},ve={class:"amt"},_e={class:"contact-info"},fe={class:"schedule"},De={class:"time"},he={class:"dr"},Le={class:"message"},Me={__name:"EventCalender",props:{date:{type:String,required:!0},toDate:{type:String,required:!0},eventList:{type:Array,required:!0},roles:{default:null,type:String}},setup(ft){const o=Vt({filterOption:!1,currenTime:l().format("h:mm A"),modal:!1,data:null}),_=ft,$=[{id:"ALL",name:"ALL"},{id:"ONLINE",name:"ONLINE"},{id:"OFFLINE",name:"OFFLINE"},{id:"STUDIO CLINIC",name:"STUDIO CLINIC"},{id:"LAB TEST",name:"LAB TEST"}],P=[{id:"ALL",name:"ALL"},{id:"PENDING",name:"PENDING"},{id:"COMPLETED",name:"COMPLETED"},{id:"CANCELLED",name:"CANCELLED"}],B=[{id:"ALL",name:"ALL"},{id:"NEW",name:"NEW"},{id:"FOLLOW UP",name:"FOLLOW UP"}],x=[{id:"ALL",name:"ALL"},{id:"REGULAR",name:"REGULAR"},{id:"RESCHEDULE",name:"RESCHEDULE"}],R=[{id:"ALL",name:"ALL"},{id:"Doctor Appointment",name:"Doctor Appointment"},{id:"Lab Appointment",name:"Lab Appointment"}],Dt=Ft(),W=c([]),r=c(null),O=c(null),C=c($[0].id),E=c(P[0].id),g=c(B[0].id),N=c(x[0].id),ht=["Day","Week","Month"],n=c("Day"),b=c(R[0].id);let k=l(r).startOf(n.value),Y=l(r).endOf(n.value);St(()=>{r.value=l(_.date).format("YYYY-MM-DD"),O.value=l(_.toDate).format("YYYY-MM-DD"),S()}),Tt(()=>{o.modal=!1});const Lt=s=>{o.modal=!0,o.data=s};function At(s){if(s)return l(s).subtract({hours:4,minutes:30}).format("MMM Do YYYY, h:mm A")}function Yt(){o.filterOption=!1}const V=()=>{Dt.emit("update:changeDate",{fromDate:r.value,toDate:O.value,AppointmentType:C.value,AppointmentStatus:E.value,AppointmentMode:g.value,AppointmentFor:b.value,ScheduleType:N.value,type:n.value})};function yt(s){if(s){const e=l(),T=l(s);return`${e.diff(T,"years")}Y`}return"Not Mentioned"}const Mt=()=>{S(),V()},Ot=s=>{s!==n.value&&(n.value=s,S(),V())},Ct=s=>{if(s)return n.value==="Day"?_.eventList.filter(e=>l(e.scheduleOn).subtract({hours:4,minutes:30}).format("YYYY-MM-DD hh:mm A").toString()===s):_.eventList.filter(e=>l(e.scheduleOn).subtract({hours:4,minutes:30}).format("YYYY-MM-DD").toString()===s)},S=()=>{k=l(r.value).startOf(n.value),Y=l(r.value).endOf(n.value),r.value=l(k).format("YYYY-MM-DD"),O.value=l(Y).format("YYYY-MM-DD");const s=[];let e=k.clone();if(n.value==="Day")for(e.set({hour:6,minute:0,second:0});e<=Y&&e.format("HH:mm")!=="22:05";)s.push({time:e.format("hh:mm A"),date:e.format("YYYY-MM-DD hh:mm A")}),e.add(5,"minutes");else if(n.value==="Week"||n.value==="Month")for(;e<=Y;)s.push({time:n.value==="Month"?e.format("DD"):e.format("ddd"),date:e.format("YYYY-MM-DD")}),e.add(1,"day");W.value=s};return(s,e)=>{const T=v("icon-filter"),f=v("Select"),Et=v("icon-cross"),gt=v("icon-mobile"),Nt=v("icon-mail"),G=v("router-link"),bt=v("Modal"),kt=Ut("click-outside");return u(),m("div",Bt,[t("div",xt,[t("div",Rt,[vt((u(),m("div",Wt,[d(T,{onClick:e[0]||(e[0]=y(a=>o.filterOption=!0,["prevent"]))}),o.filterOption?(u(),m("div",Gt,[t("div",Ht,[d(f,{modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=a=>C.value=a),options:$},null,8,["modelValue"])]),t("div",qt,[d(f,{modelValue:E.value,"onUpdate:modelValue":e[2]||(e[2]=a=>E.value=a),options:P},null,8,["modelValue"])]),t("div",zt,[d(f,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=a=>g.value=a),options:B},null,8,["modelValue"])]),t("div",Kt,[d(f,{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=a=>b.value=a),options:R},null,8,["modelValue"])]),t("div",jt,[d(f,{modelValue:N.value,"onUpdate:modelValue":e[5]||(e[5]=a=>N.value=a),options:x},null,8,["modelValue"])]),t("div",{class:"apply-btn",onClick:y(V,["prevent"])},Qt)])):_t("",!0)])),[[kt,Yt]]),t("div",Xt,[vt(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=a=>r.value=a),onChange:e[7]||(e[7]=a=>Mt(n.value))},null,544),[[wt,r.value]]),Zt])]),t("div",te,[(u(),m(w,null,I(ht,a=>t("button",{type:"button",key:a,class:F(`btn ${n.value===a?"active":""}`),onClick:h=>Ot(a)},i(a),11,ee)),64))])]),t("div",ae,[t("ul",{class:F([n.value,"main-list"])},[(u(!0),m(w,null,I(W.value,(a,h)=>(u(),m("li",{class:"main-list-item",key:h},[t("div",oe,i(a.time)+" "+i(n.value==="Week"?`(${a.date})`:""),1),t("ul",se,[(u(!0),m(w,null,I(Ct(a.date),p=>{var L,A;return u(),m("li",{class:F(["sub-list-item",`apt-status ${p.status}`]),key:p.title},[t("div",{class:"badge",onClick:y(U=>Lt(p),["prevent"])},i((L=p.patientDetail)==null?void 0:L.firstName)+" "+i((A=p.patientDetail)==null?void 0:A.lastName),9,ne)],2)}),128))])]))),128))],2)]),d(bt,{show:o.modal,"onUpdate:show":e[9]||(e[9]=a=>o.modal=a),class:"p-card-modal",headerClasses:"header-bg"},{header:M(()=>[ie,t("div",{class:"close-btn",onClick:e[8]||(e[8]=y(a=>o.modal=!1,["prevent"]))},[d(Et)])]),default:M(()=>{var a,h,p,L,A,U,H,q,z,K,j,J,Q,X,Z,tt,et,at,ot,st,nt,it,lt,dt,rt,ct,ut,pt,mt;return[t("div",le,[t("div",de,[re,t("div",ce,[t("div",ue,i((h=(a=o.data)==null?void 0:a.patientDetail)==null?void 0:h.firstName)+" "+i((L=(p=o.data)==null?void 0:p.patientDetail)==null?void 0:L.lastName),1),t("div",pe,[t("span",null,i(((U=(A=o.data)==null?void 0:A.patientDetail)==null?void 0:U.gender)||"N/A"),1),D("- "),t("span",null,i(yt((q=(H=o.data)==null?void 0:H.patientDetail)==null?void 0:q.dob)),1),D("- "),t("span",null,i(((K=(z=o.data)==null?void 0:z.patientDetail)==null?void 0:K.group)||"N/A"),1)]),t("div",me,"PID : "+i((J=(j=o.data)==null?void 0:j.patientDetail)==null?void 0:J.pid),1),t("div",ve," â‚¹ "+i(((Q=o.data)==null?void 0:Q.mode)==="FOLLOW UP"?(Z=(X=o.data)==null?void 0:X.doctorDetail)==null?void 0:Z.followUpFees:(et=(tt=o.data)==null?void 0:tt.doctorDetail)==null?void 0:et.fees),1)])]),t("div",_e,[t("span",null,[d(gt),D(" +91-"+i((ot=(at=o.data)==null?void 0:at.patientDetail)==null?void 0:ot.mobile),1)]),t("span",null,[d(Nt),D(" "+i((nt=(st=o.data)==null?void 0:st.patientDetail)==null?void 0:nt.email),1)])]),t("div",fe,[t("div",De,i(At((it=o.data)==null?void 0:it.scheduleOn)),1),t("div",he,i((dt=(lt=o.data)==null?void 0:lt.doctorDetail)==null?void 0:dt.name),1)]),t("div",Le,[_.roles!=="LABORATORY"&&_.roles!=="AMBULANCE"?(u(),It(G,{key:0,to:`/new-prescription?pid=${(ct=(rt=o.data)==null?void 0:rt.patientDetail)==null?void 0:ct.id}&aid=${(ut=o.data)==null?void 0:ut.id}`,class:"span"},{default:M(()=>[D("Prescription")]),_:1},8,["to"])):_t("",!0),d(G,{to:`/patient/profile?id=${(mt=(pt=o.data)==null?void 0:pt.patientDetail)==null?void 0:mt.id}`,class:"span"},{default:M(()=>[D("Profile")]),_:1},8,["to"])])])]}),_:1},8,["show"])])}}};export{Me as default};
