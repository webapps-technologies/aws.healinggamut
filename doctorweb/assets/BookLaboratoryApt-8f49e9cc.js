import{u as ae,B as ne,C as ie,c,s as k,v as re,m,D as de,r as D,o as n,a as i,b as t,t as o,d as P,z as I,f as r,x as h,y as p,F as U,E as R,H as ce,g as B}from"./vendor-5e5c4e37.js";import{_ as ue}from"./calender-9d47370a.js";const me={class:"form"},_e={class:"card-body p-0"},ve={class:"clinic-info"},he={class:"about"},pe={class:"rate-row"},fe={class:"name"},be={class:"rating"},ye={class:"text text-grey"},ge={class:"dr-select-sect"},ke={class:"form-item mb-16"},De=t("div",{class:"title"},"Select Test",-1),Pe={key:0,class:"err-msg"},Ne={key:1,class:"err-msg"},Ve={class:"form-item"},Ee=t("div",{class:"title"},"Appointment Date",-1),Se={class:"date-input"},Te=["min"],Ye=t("div",{class:"icon"},[t("img",{src:ue,alt:""})],-1),Ae={class:"card-body p-0"},Me={class:"slot-section"},we={class:"mb-10"},xe={class:"table-row mb-16"},Fe={class:"table-col"},Ce={class:"table-outer"},Le={class:"table"},Oe=t("thead",null,[t("th",null,"Sr. No."),t("th",null,"Name"),t("th",null,"Category"),t("th",null,"Report Within"),t("th",null,"Price"),t("th",null,"Discount"),t("th",null,"Discount Price")],-1),Ie={key:0,class:"table-no-data"},Ue=t("div",null,"No records Found!",-1),Re=[Ue],Be={key:0,class:"card total-card model-total-card"},Ge={class:"card-body"},ze=t("div",{class:"card-header card-header-total"},"Price Details",-1),He={class:"price"},$e={class:"title"},qe={class:"val"},We={class:"price"},Ke=t("div",{class:"title"},"Discount",-1),je={class:"val text-green"},Je={class:"price total f-w-bold"},Qe=t("div",{class:"title"},"Total Amount",-1),Xe={class:"val"},Ze={class:"save text-green f-w-bold"},et={class:"slot-header mt-10"},tt=t("h4",null,"Slot :",-1),st={class:"card-container"},lt=["onClick"],ot={class:"day"},at={class:"date"},nt={class:"slot-status"},it={key:0,class:"text text-green f-w-bold"},rt={key:1,class:"text text-red f-w-bold"},dt={key:0,class:"err-msg"},ct={class:"slot-body"},ut={key:0,class:"mb-16 w-15"},mt=t("div",{class:"sel-ti"},"Select Time",-1),_t={key:0,class:"err-msg"},vt={key:1,class:"patn-head"},ht={key:2,class:"form-Container"},pt={class:"tow-row"},ft={class:"form-item mb-16"},bt=t("div",{class:"title"},"First Name ",-1),yt={key:0,class:"err-msg"},gt={class:"form-item mb-16"},kt=t("div",{class:"title"},"Last Name ",-1),Dt={key:0,class:"err-msg"},Pt={class:"form-item mb-16"},Nt=t("div",{class:"title"},"Phone ",-1),Vt={key:0,class:"err-msg"},Et={class:"tow-row"},St={class:"form-item mb-16"},Tt=t("div",{class:"title"},"Email ",-1),Yt={key:0,class:"err-msg"},At={class:"form-item mb-16"},Mt=t("div",{class:"title"},"Gender ",-1),wt={key:0,class:"err-msg"},xt={class:"form-item mb-16"},Ft=t("div",{class:"title"},"Dob ",-1),Ct=["max"],Lt={key:0,class:"err-msg"},Ot={class:"book-btn"},Gt={__name:"BookLaboratoryApt",setup(It){const f=ae();ne(),ie();const G=c(()=>f.state.Doctor),_=c(()=>f.state.Auth),z=[],N=k([]),b=k(null),A=k(null),M=k(null),H=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],e=re({submit:!1,fromDate:m().format("YYYY-MM-DD"),toDate:m().format("YYYY-MM-DD"),calendarDate:m().format("YYYY-MM-DD"),scheduleOn:m().format("YYYY-MM-DD"),limit:100,offset:0,keyword:"",error:null,selectedTest:[],tests_require:null,roles:null,doctor:null,showPdetails:!1,timePickerStatus:!1,showDrDetails:!1,timePicker:"00:00:00",doctorFees:0,firstName:null,lastName:null,patientGender:"MALE",contactNumber:null,email:null,dob:null,slotId:null,testError:null});de(()=>{});async function $(){if(g.value)return e.submit=!0,null;if(e.submit=!1,b.value!==null){if(y.value||te.value||V.value||T.value||S.value||g.value||E.value||Y.value)return e.submit=!0,null;e.submit=!1;const s={scheduleOn:e.scheduleOn+"T"+e.timePicker,scheduleFor:null,type:"OFFLINE",appointmentFor:"Lab Appointment",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,patientDetailId:null,franchiseId:null,pid:null,doctorDetailId:null,patientDetail:{firstName:e.firstName,lastName:e.lastName,dob:e.dob,gender:e.patientGender.id,mobile:e.contactNumber,email:e.email},labtest:e.selectedTest,doctorFees:F.value.toFixed(2),hospitalFees:0,commission:0,gst:0,discount:0,lockerStatus:"NO",slotId:null,laboratoryId:_.value.id,organizationId:null};(await f.dispatch("Appointments/bookAppointments",s)).status===201&&(e.firstName=null,e.lastName=null,e.patientGender=null,e.contactNumber=null,e.email=null,e.dob=null,e.timePicker="00:00",e.patientModal=!1)}else return e.error="Please Select Slot",f.dispatch("Alert/error",{msg:"Please Select Slot"})}const q=a=>{e.selectedTest=a},W=a=>{e.testError=a},K=a=>{},j=a=>{},J=(a,s,d,u)=>{e.scheduleOn=u,A.value=null,M.value=null,s?(e.showPdetails=!0,e.error=null,b.value=a,N.value=d):(e.showPdetails=!1,b.value=null,N.value=[])};function Q(a){if(a){var s=m(a).format("MMM Do YYYY");return s}}function X(){return N.value=[],b.value=null,G.value.slotTimeData=[],e.showPdetails=!1,A.value=null,M.value=null,f.commit("Auth/SET_LABORATORY_SCHEDULE",e.calendarDate)}function Z(a){if(a){const s=m(),d=m(a);return`${s.diff(d,"years")}Y`}return"Not Mentioned"}function w(){return m().format("YYYY-MM-DD")}c(()=>{e.dob&&Z(e.dob)});const ee=c(()=>e.selectedTest.length>0?e.selectedTest.reduce((s,d)=>s+d.price,0):0),x=c(()=>{if(e.selectedTest.length>0){const a=e.selectedTest.reduce((d,u)=>d+u.discountPrice,0);return e.selectedTest.reduce((d,u)=>d+u.price,0)-a}else return 0}),F=c(()=>e.selectedTest.length>0?e.selectedTest.reduce((s,d)=>s+d.discountPrice,0):0),y=c(()=>{if(!e.firstName)return"Please enter first name"}),te=c(()=>{if(!e.lastName)return"Please enter last name"}),V=c(()=>{if(!e.dob)return"Please enter dob"}),g=c(()=>{var a;if(((a=e.selectedTest)==null?void 0:a.length)<=0)return"Please select Test"}),E=c(()=>{if(e.timePicker=="00:00")return"Please Select Time"}),S=c(()=>{if(!e.patientGender)return"Please select gender"}),T=c(()=>{if(!e.contactNumber)return"Please enter phone no"}),Y=c(()=>{let a=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.email){if(!a.test(e.email))return"Please enter valid email!"}else return"Please enter email!"});function se(a){let s=String.fromCharCode(a.keyCode);if(/^[0-9]+$/.test(s))return!0;a.preventDefault()}return(a,s)=>{var C,L,O;const d=D("icon-star"),u=D("MultiSelect"),le=D("time-picker"),oe=D("Select");return n(),i("div",me,[t("div",_e,[t("div",ve,[t("div",he,[t("div",pe,[t("h3",fe,o(_.value.name),1),t("div",be,[P(d),I(" "+o(_.value.rating),1)])]),t("div",ye,o(_.value.address),1)])])]),t("div",ge,[t("div",ke,[De,P(u,{modelValue:e.tests_require,"onUpdate:modelValue":s[0]||(s[0]=l=>e.tests_require=l),options:_.value.labTestOption,tabs:z,onSpecific:K,onSearch:j,onSelectedArr:q,onErrorMsg:W},null,8,["modelValue","options"]),e.submit&&g.value?(n(),i("div",Pe,o(g.value),1)):r("",!0),e.testError?(n(),i("div",Ne,o(e.testError),1)):r("",!0)]),t("div",Ve,[Ee,t("div",Se,[h(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=l=>e.calendarDate=l),min:w(),onChange:X},null,40,Te),[[p,e.calendarDate]]),Ye])])]),t("div",Ae,[t("div",Me,[t("div",we,[I("Appointment on "),t("strong",null,o(Q(e.scheduleOn)),1)]),t("div",xe,[t("div",Fe,[t("div",Ce,[t("table",Le,[Oe,t("tbody",null,[(n(!0),i(U,null,R(e.selectedTest,(l,v)=>(n(),i("tr",{key:v},[t("td",null,o(v+1),1),t("td",null,o(l.name),1),t("td",null,o(l.labCategory),1),t("td",null,o(l.reportWithin)+" Days",1),t("td",null,"₹"+o(l.price),1),t("td",null,o(l.discount)+"%",1),t("td",null,"₹"+o(l.discountPrice),1)]))),128))])])]),((C=e.selectedTest)==null?void 0:C.length)<=0?(n(),i("div",Ie,Re)):r("",!0)])]),((L=e.selectedTest)==null?void 0:L.length)>0?(n(),i("div",Be,[t("div",Ge,[ze,t("div",He,[t("div",$e,"Price ("+o((O=e.selectedTest)==null?void 0:O.length)+" Item)",1),t("div",qe,"₹"+o(ee.value.toFixed(2)),1)]),t("div",We,[Ke,t("div",je,"₹"+o(x.value.toFixed(2)),1)]),t("div",Je,[Qe,t("div",Xe,"₹"+o(F.value.toFixed(2)),1)]),t("div",Ze,"You will save ₹"+o(x.value.toFixed(2))+" on this test",1)])])):r("",!0),t("div",et,[tt,t("div",st,[(n(!0),i(U,null,R(_.value.schedule,(l,v)=>(n(),i("div",{class:ce(["slot-card",{active:b.value==v}]),key:v,onClick:B(Ut=>J(v,l.status,[],l.date),["prevent"])},[t("div",ot,o(l.name),1),t("div",at,o(l.date),1),t("div",nt,[l.status?(n(),i("div",it,"Slots Available")):(n(),i("div",rt,"Slot Not Available"))])],10,lt))),128))]),e.error?(n(),i("div",dt,o(e.error),1)):r("",!0)]),t("div",ct,[e.showPdetails?(n(),i("div",ut,[mt,P(le,{modelValue:e.timePicker,"onUpdate:modelValue":s[2]||(s[2]=l=>e.timePicker=l)},null,8,["modelValue"]),e.submit&&E.value?(n(),i("div",_t,o(E.value),1)):r("",!0)])):r("",!0),e.showPdetails?(n(),i("div",vt,"Patient Details :")):r("",!0),e.showPdetails?(n(),i("div",ht,[t("div",pt,[t("div",ft,[bt,h(t("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=l=>e.firstName=l),placeholder:"Enter First Name"},null,512),[[p,e.firstName]]),e.submit&&y.value?(n(),i("div",yt,o(y.value),1)):r("",!0)]),t("div",gt,[kt,h(t("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=l=>e.lastName=l),placeholder:"Enter Last Name"},null,512),[[p,e.lastName]]),e.submit&&y.value?(n(),i("div",Dt,o(y.value),1)):r("",!0)]),t("div",Pt,[Nt,h(t("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=l=>e.contactNumber=l),placeholder:"Enter Phone",onKeypress:s[6]||(s[6]=l=>se(l)),maxlength:"10"},null,544),[[p,e.contactNumber]]),e.submit&&T.value?(n(),i("div",Vt,o(T.value),1)):r("",!0)])]),t("div",Et,[t("div",St,[Tt,h(t("input",{type:"text","onUpdate:modelValue":s[7]||(s[7]=l=>e.email=l),placeholder:"Enter Email"},null,512),[[p,e.email]]),e.submit&&Y.value?(n(),i("div",Yt,o(Y.value),1)):r("",!0)]),t("div",At,[Mt,P(oe,{modelValue:e.patientGender,"onUpdate:modelValue":s[8]||(s[8]=l=>e.patientGender=l),options:H},null,8,["modelValue"]),e.submit&&S.value?(n(),i("div",wt,o(S.value),1)):r("",!0)]),t("div",xt,[Ft,h(t("input",{type:"date","onUpdate:modelValue":s[9]||(s[9]=l=>e.dob=l),placeholder:"Enter Age",max:w()},null,8,Ct),[[p,e.dob]]),e.submit&&V.value?(n(),i("div",Lt,o(V.value),1)):r("",!0)])])])):r("",!0),t("div",Ot,[t("button",{type:"button",class:"btn black-btn w-10-r",onClick:B($,["prevent"])},"Book")])])])])])}}};export{Gt as default};
