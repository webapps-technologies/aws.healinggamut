import{u as te,B as se,C as le,c as m,s as Y,v as oe,m as _,D as ae,r as A,o,a,b as t,t as n,d as V,z as f,x as h,y as D,$ as C,f as r,F,E as R,H as ie,g as $}from"./vendor-5e5c4e37.js";import{_ as ne}from"./calender-9d47370a.js";import"./vue3-editor.common-8412b46c.js";const re={class:"form"},de={class:"card-body"},ce={class:"clinic-info"},ue={class:"about"},me={class:"rate-row"},ve={class:"name"},_e={class:"rating"},he={class:"text text-grey"},pe={class:"dr-select-sect"},fe={class:"form-item mb-16"},be=t("div",{class:"title"},"Select Doctor",-1),ke={key:0,class:"card-body"},Se={class:"clinic-info"},ye={class:"about"},De={class:"rate-row"},ge={class:"name"},Pe={class:"rating"},Ve={class:"text text-grey"},Ne={class:"form-item mb-10"},Ye=t("div",{class:"title"},"Appointment Date",-1),Ae={class:"date-input w-10-r"},Ce=["min"],Te=t("div",{class:"icon"},[t("img",{src:ne,alt:""})],-1),we={class:"slot-section"},Me={class:"locker"},Ee={class:"radio-btns"},Oe={class:"radio"},Ue={class:"label"},Ie={class:"radio"},xe={class:"label"},Le={key:0,class:"err-msg"},Fe={class:"mb-10"},Re={class:"slot-header"},$e={class:"card-container"},Be=["onClick"],Ge={class:"day"},He={class:"date"},ze={class:"slot-status"},Ke={key:0,class:"text text-green f-w-bold"},We={key:1,class:"text text-red f-w-bold"},je={key:0,class:"err-msg"},qe={key:1,class:"slot-body"},Je=t("div",{class:"heading-slot"},"Available Slot :",-1),Qe={class:"mb-16"},Xe={class:"book-slots"},Ze=["for","onClick"],et=["id","value"],tt={key:1,class:"time"},st={key:0,class:"online"},lt={key:1,class:"offline"},ot={key:2,class:"hospital"},at={key:2,class:"time"},it=t("div",{class:"not-online"},"Not Available",-1),nt=[it],rt={key:0,class:"err-msg"},dt={key:0,class:"mb-16"},ct=t("div",{class:"heading-slot"},"Time Slot :",-1),ut={class:"book-slots"},mt=["for"],vt=["id","value","onChange"],_t={class:"time-slot"},ht={key:0,class:"err-msg"},pt={key:1,class:"mb-16 w-15"},ft=t("div",{class:"sel-ti"},"Select Time",-1),bt={key:0,class:"err-msg"},kt={key:2,class:"patn-head"},St={key:3,class:"form-Container"},yt={class:"tow-row"},Dt={class:"form-item mb-16"},gt=t("div",{class:"title"},"First Name ",-1),Pt={key:0,class:"err-msg"},Vt={class:"form-item mb-16"},Nt=t("div",{class:"title"},"Last Name ",-1),Yt={key:0,class:"err-msg"},At={class:"form-item mb-16"},Ct=t("div",{class:"title"},"Phone ",-1),Tt={key:0,class:"err-msg"},wt={class:"tow-row"},Mt={class:"form-item mb-16"},Et=t("div",{class:"title"},"Email ",-1),Ot={key:0,class:"err-msg"},Ut={class:"form-item mb-16"},It=t("div",{class:"title"},"Gender ",-1),xt={key:0,class:"err-msg"},Lt={class:"form-item mb-16"},Ft=t("div",{class:"title"},"Dob ",-1),Rt=["max"],$t={key:0,class:"err-msg"},Bt={class:"book-btn"},Wt={__name:"BookFranchiseApt",setup(Gt){const c=te();se(),le();const u=m(()=>c.state.Doctor),N=m(()=>c.state.Auth),p=Y([]),g=Y(null),b=Y(null),k=Y(null),z=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],e=oe({submit:!1,fromDate:_().format("YYYY-MM-DD"),toDate:_().format("YYYY-MM-DD"),calendarDate:_().format("YYYY-MM-DD"),scheduleOn:_().format("YYYY-MM-DD"),limit:100,offset:0,keyword:"",error:null,errorSlot:null,roles:null,doctor:null,showPdetails:!1,timePickerStatus:!1,showDrDetails:!1,timePicker:"00:00:00",firstName:null,lastName:null,patientGender:"MALE",contactNumber:null,email:null,dob:null,slotId:null});ae(()=>{c.dispatch("Doctor/getBasicDoctor",{limit:e.limit,offset:e.offset,keyword:e.keyword})});async function K(){var i,l;if(e.timePickerStatus&&w.value)return e.submit=!0,c.dispatch("Alert/error",{msg:"Please Select Time!"});if(E.value)return e.submit=!0,c.dispatch("Alert/error",{msg:"Please Select Locker status"});if(e.submit=!1,((i=p.value)==null?void 0:i.length)<=0)return e.error="Please Select date",c.dispatch("Alert/error",{msg:"Please Select date"});if(e.error=null,b.value!==null){if(((l=u.value.slotTimeData)==null?void 0:l.length)>0&&M.value)return e.submit=!0,c.dispatch("Alert/error",{msg:"Please Select Time"});if(P.value||Z.value||O.value||I.value||U.value||x.value)return e.submit=!0,null;e.submit=!1;const v=e.scheduleOn+"T"+e.timePicker,S=e.scheduleOn+"T"+k.value,L={scheduleOn:e.timePickerStatus?v:S,scheduleFor:null,type:"STUDIO CLINIC",appointmentFor:"Studio Clinic Appointment",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,patientDetailId:null,franchiseId:N.value.id,pid:null,patientDetail:{firstName:e.firstName,lastName:e.lastName,dob:e.dob,gender:e.patientGender.id,mobile:e.contactNumber,email:e.email},labtest:[],doctorFees:+u.value.fees,hospitalFees:0,commission:0,gst:0,discount:0,lockerStatus:e.lockerStatus,doctorDetailId:u.value.id,slotId:e.timePickerStatus?null:e.slotId,laboratoryId:null,organizationId:null};(await c.dispatch("Appointments/bookAppointments",L)).status===201&&(e.firstName=null,e.lastName=null,e.patientGender=null,e.contactNumber=null,e.email=null,e.dob=null,e.timePicker="00:00",e.patientModal=!1)}else return e.errorSlot="Please Select Slot",c.dispatch("Alert/error",{msg:"Please Select Slot"})}const W=i=>{e.showDrDetails=!0,u.value.slotTimeData=[],p.value=[],g.value=null,e.showPdetails=!1,c.dispatch("Doctor/getDoctorDetails",{id:i.id})},j=(i,l,v,S)=>{e.scheduleOn=S,u.value.slotTimeData=[],e.showPdetails=!1,b.value=null,k.value=null,l?(e.error=null,g.value=i,p.value=v):(e.timePickerStatus=!1,e.errorSlot=null,g.value=null,p.value=[])};function q(i,l){if(b.value=l,e.showPdetails=!0,e.errorSlot=null,i.online){e.timePickerStatus=!1;const v=_(e.calendarDate).format("YYYY-MM-DD");return c.dispatch("Doctor/getSlotTime",{currentDate:v,periodId:i.id})}i.offline||i.clinicVisitStatus?e.timePickerStatus=!0:e.timePickerStatus=!1}function T(i){if(i){var l=_(i,"HH:mm:ss").format("hh:mm A");return l}}function J(i){if(i){var l=_(i).format("MMM Do YYYY");return l}}function Q(){return p.value=[],g.value=null,u.value.slotTimeData=[],e.showPdetails=!1,b.value=null,k.value=null,c.commit("Doctor/SET_DOCTOR_SCHEDULE",e.calendarDate)}function X(i){if(i){const l=_(),v=_(i);return`${l.diff(v,"years")}Y`}return"Not Mentioned"}function B(){return _().format("YYYY-MM-DD")}m(()=>{e.dob&&X(e.dob)});const P=m(()=>{if(!e.firstName)return"Please enter first name"}),w=m(()=>{if(e.timePicker=="00:00")return"Please Select Time"}),M=m(()=>{if(!e.timePickerStatus&&!k.value)return"Please Select Time Slot"}),E=m(()=>{if(!e.lockerStatus)return"Please select locker status"}),Z=m(()=>{if(!e.lastName)return"Please enter last name"}),O=m(()=>{if(!e.dob)return"Please enter dob"}),U=m(()=>{if(!e.patientGender)return"Please select gender"}),I=m(()=>{if(!e.contactNumber)return"Please enter phone no"}),x=m(()=>{let i=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.email){if(!i.test(e.email))return"Please enter valid email!"}else return"Please enter email!"});function ee(i){let l=String.fromCharCode(i.keyCode);if(/^[0-9]+$/.test(l))return!0;i.preventDefault()}return(i,l)=>{var H;const v=A("icon-star"),S=A("SingleSelect"),L=A("time-picker"),G=A("Select");return o(),a("div",re,[t("div",de,[t("div",ce,[t("div",ue,[t("div",me,[t("h3",ve,n(N.value.name),1),t("div",_e,[V(v),f(" "+n(N.value.rating),1)])]),t("div",he,n(N.value.address),1)])])]),t("div",pe,[t("div",fe,[be,V(S,{modelValue:e.doctor,"onUpdate:modelValue":l[0]||(l[0]=s=>e.doctor=s),options:u.value.doctorOptions,onSelected:W,placeholder:"Select Doctor"},null,8,["modelValue","options"])])]),e.showDrDetails?(o(),a("div",ke,[t("div",Se,[t("div",ye,[t("div",De,[t("h3",ge,n(u.value.name),1),t("div",Pe,[V(v),f(" "+n((H=u.value.rating)==null?void 0:H.toFixed(1)),1)])]),t("div",Ve,n(u.value.address),1)])]),t("div",Ne,[Ye,t("div",Ae,[h(t("input",{type:"date","onUpdate:modelValue":l[1]||(l[1]=s=>e.calendarDate=s),min:B(),onChange:Q},null,40,Ce),[[D,e.calendarDate]]),Te])]),t("div",we,[t("div",Me,[f("Share Your Health Locker "),t("div",Ee,[t("div",Oe,[t("label",Ue,[h(t("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[2]||(l[2]=s=>e.lockerStatus=s),value:"YES"},null,512),[[C,e.lockerStatus]]),f(" YES ")])]),t("div",Ie,[t("label",xe,[h(t("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[3]||(l[3]=s=>e.lockerStatus=s),value:"NO"},null,512),[[C,e.lockerStatus]]),f(" NO ")])])])]),e.submit&&E.value?(o(),a("div",Le,n(E.value),1)):r("",!0),t("div",Fe,[f("Appointment on "),t("strong",null,n(J(e.scheduleOn)),1)]),t("div",Re,[t("div",$e,[(o(!0),a(F,null,R(u.value.doctorSchedule,(s,d)=>(o(),a("div",{class:ie(["slot-card",{active:g.value==d}]),key:d,onClick:$(y=>j(d,s.status,s.period,s.date),["prevent"])},[t("div",Ge,n(s.name),1),t("div",He,n(s.date),1),t("div",ze,[s.status?(o(),a("div",Ke,"Slots Available")):(o(),a("div",We,"Slot Not Available"))])],10,Be))),128))]),e.error?(o(),a("div",je,n(e.error),1)):r("",!0)]),p.value.length>0?(o(),a("div",qe,[Je,t("div",Qe,[t("div",Xe,[(o(!0),a(F,null,R(p.value,(s,d)=>(o(),a("div",{class:"slot-item",key:d},[t("label",{for:`input-${d}`,onClick:$(y=>q(s,d),["prevent"])},[s.online||s.offline||s.clinicVisitStatus?h((o(),a("input",{key:0,type:"radio",id:`input-${d}`,name:"slot","onUpdate:modelValue":l[4]||(l[4]=y=>b.value=y),value:d},null,8,et)),[[C,b.value]]):r("",!0),s.clinicVisitStatus||s.online||s.offline?(o(),a("div",tt,[f(n(T(s.time_start))+" - "+n(T(s.time_end))+" ",1),s.online?(o(),a("div",st,"Online Consultancy Available")):r("",!0),s.offline?(o(),a("div",lt,"Offline Consultancy Available")):r("",!0),s.clinicVisitStatus?(o(),a("div",ot,"Clinic Studio Consultancy Available")):r("",!0)])):(o(),a("div",at,nt))],8,Ze)]))),128))]),e.errorSlot?(o(),a("div",rt,n(e.errorSlot),1)):r("",!0)]),e.timePickerStatus?(o(),a("div",pt,[ft,V(L,{modelValue:e.timePicker,"onUpdate:modelValue":l[6]||(l[6]=s=>e.timePicker=s)},null,8,["modelValue"]),e.submit&&w.value?(o(),a("div",bt,n(w.value),1)):r("",!0)])):(o(),a("div",dt,[ct,t("div",ut,[(o(!0),a(F,null,R(u.value.slotTimeData,(s,d)=>(o(),a("div",{class:"slot-item-time",key:d},[t("label",{for:`inputs-${d}`},[h(t("input",{type:"radio",id:`inputs-${d}`,name:"slotTime","onUpdate:modelValue":l[5]||(l[5]=y=>k.value=y),value:s.time,onChange:y=>e.slotId=s.id},null,40,vt),[[C,k.value]]),t("div",_t,n(T(s.time)),1)],8,mt)]))),128))]),e.submit&&M.value?(o(),a("div",ht,n(M.value),1)):r("",!0)])),e.showPdetails?(o(),a("div",kt,"Patient Details :")):r("",!0),e.showPdetails?(o(),a("div",St,[t("div",yt,[t("div",Dt,[gt,h(t("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=s=>e.firstName=s),placeholder:"Enter First Name"},null,512),[[D,e.firstName]]),e.submit&&P.value?(o(),a("div",Pt,n(P.value),1)):r("",!0)]),t("div",Vt,[Nt,h(t("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=s=>e.lastName=s),placeholder:"Enter Last Name"},null,512),[[D,e.lastName]]),e.submit&&P.value?(o(),a("div",Yt,n(P.value),1)):r("",!0)]),t("div",At,[Ct,h(t("input",{type:"text","onUpdate:modelValue":l[9]||(l[9]=s=>e.contactNumber=s),placeholder:"Enter Phone",onKeypress:l[10]||(l[10]=s=>ee(s)),maxlength:"10"},null,544),[[D,e.contactNumber]]),e.submit&&I.value?(o(),a("div",Tt,n(I.value),1)):r("",!0)])]),t("div",wt,[t("div",Mt,[Et,h(t("input",{type:"text","onUpdate:modelValue":l[11]||(l[11]=s=>e.email=s),placeholder:"Enter Email"},null,512),[[D,e.email]]),e.submit&&x.value?(o(),a("div",Ot,n(x.value),1)):r("",!0)]),t("div",Ut,[It,V(G,{modelValue:e.patientGender,"onUpdate:modelValue":l[12]||(l[12]=s=>e.patientGender=s),options:z},null,8,["modelValue"]),e.submit&&U.value?(o(),a("div",xt,n(U.value),1)):r("",!0)]),t("div",Lt,[Ft,h(t("input",{type:"date","onUpdate:modelValue":l[13]||(l[13]=s=>e.dob=s),placeholder:"Enter Age",max:B()},null,8,Rt),[[D,e.dob]]),e.submit&&O.value?(o(),a("div",$t,n(O.value),1)):r("",!0)])])])):r("",!0),t("div",Bt,[t("button",{type:"button",class:"btn black-btn w-10-r",onClick:$(K,["prevent"])},"Book")])])):r("",!0)])])):r("",!0)])}}};export{Wt as default};
