import{s as A,u as C,B as R,C as E,c as m,v as w,D as x,r as O,o as l,a as n,b as t,t as r,x as _,y as b,f as a,z as d,d as h,w as B,g as D}from"./vendor-5e5c4e37.js";const U=t("h2",null,"Welcome to Medical Tourism",-1),L=t("span",null," Enter details for Register ",-1),z={class:"form-item mb-16"},H=t("div",{class:"title"},"Name",-1),M={class:"input i-input"},$={class:"i-tag"},q={key:0,class:"err-msg"},F={class:"form-item mb-16"},K=t("div",{class:"title"},"Email",-1),Z={class:"input i-input"},G=t("div",{class:"i-tag"},"@",-1),W={key:0,class:"err-msg"},Y={class:"form-item mb-16"},j=t("div",{class:"title"},"Phone No",-1),J={class:"input i-input"},Q=t("div",{class:"i-tag"},"+91",-1),X={key:0,class:"err-msg"},ee={key:0,class:"otp-inputs"},te={key:1,class:"err-msg"},se={key:2,class:"send-again"},ie={key:0,class:"code-msg"},le={class:"login-btn form-item"},ne={key:0,type:"submit",class:"btn black-btn"},oe={key:1,type:"submit",class:"btn black-btn"},ae={class:"reg"},me={__name:"Register",setup(re){A("");const p=C(),T=R();E();const u=m(()=>p.state.Auth),e=w({submit:!1,submitOtp:!1,name:null,emailId:null,phoneNumber:null,submitTitle:null,type:null,input1:null,input2:null,input3:null,input4:null,title:null,otp:"",countdown:30,activeTimer:!1,timerInterval:null});x(()=>{T.query.type&&(e.type=T.query.type,e.type==="DOCTOR"?(e.title="Dr.",e.submitTitle="Dr."):e.type==="NURSE"?(e.title="NS",e.submitTitle=null):e.type==="FRANCHISE"?(e.title="FI",e.submitTitle=null):e.type==="HOSPITAL"?(e.title="HS",e.submitTitle=null):e.type==="AMBULANCE"?(e.title="AB",e.submitTitle=null):e.type==="LABORATORY"?(e.title="LB",e.submitTitle=null):e.type==="HOTEL"?(e.title="HT",e.submitTitle=null):e.type==="TRANSPORTATION"?(e.title="TP",e.submitTitle=null):(e.title=null,e.submitTitle=null))});const k=()=>{if(u.value.regOtpStatus){if(y.value){e.submitOtp=!0;return}e.submitOtp=!1,p.dispatch("Auth/otpVerifyUser",{loginId:e.phoneNumber,otp:e.otp})}else{if(c.value||f.value||v.value){e.submit=!0;return}e.submit=!1,p.dispatch("Auth/RegisterDoctor",{name:e.submitTitle?e.submitTitle+e.name:e.name,emailId:e.emailId,phoneNumber:e.phoneNumber,type:e.type}),N()}};function I(){if(c.value||f.value||v.value){e.submit=!0;return}e.submit=!1,p.dispatch("Auth/verifyUser",{loginId:e.phoneNumber,type:e.type}),N()}function N(){e.activeTimer=!0,e.countdown=30,e.timerInterval=setInterval(()=>{e.countdown>1?e.countdown--:(clearInterval(e.timerInterval),e.activeTimer=!1)},1e3)}const c=m(()=>{if(!e.name)return"Please enter your name!"}),y=m(()=>{if(e.otp){if(e.otp.length!=4)return"Please Enter Valid OTP !"}else return"Please Enter OTP!"}),v=m(()=>{let o=/^[6-9][0-9]{9}$/;if(e.phoneNumber){if(!o.test(e.phoneNumber))return"Please enter valid phone no!"}else return"Please enter phone no!"}),f=m(()=>{let o=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.emailId){if(!o.test(e.emailId))return"Please enter valid email!"}else return"Please enter email!"});function S(o){let s=String.fromCharCode(o.keyCode);if(/^[0-9]+$/.test(s))return!0;o.preventDefault()}function V(o){let s=String.fromCharCode(o.keyCode);if(/^[A-Z a-z]+$/.test(s))return!0;o.preventDefault()}return(o,s)=>{const g=O("icon-right-arrow"),P=O("router-link");return l(),n("form",{class:"form",onSubmit:D(k,["prevent"])},[U,L,t("div",z,[H,t("div",M,[t("div",$,r(e.title),1),_(t("input",{type:"text",pattern:"[A-Z a-z]+",onKeypress:s[0]||(s[0]=i=>V(i)),"onUpdate:modelValue":s[1]||(s[1]=i=>e.name=i),placeholder:"Enter name"},null,544),[[b,e.name]])]),e.submit&&c.value?(l(),n("div",q,r(c.value),1)):a("",!0)]),t("div",F,[K,t("div",Z,[G,_(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=i=>e.emailId=i),placeholder:"Enter email"},null,512),[[b,e.emailId]])]),e.submit&&f.value?(l(),n("div",W,r(f.value),1)):a("",!0)]),t("div",Y,[j,t("div",J,[Q,_(t("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=i=>e.phoneNumber=i),placeholder:"Enter phone no",onKeypress:s[4]||(s[4]=i=>S(i)),maxlength:"10"},null,544),[[b,e.phoneNumber]])]),e.submit&&v.value?(l(),n("div",X,r(v.value),1)):a("",!0)]),u.value.regOtpStatus?(l(),n("div",ee,[_(t("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=i=>e.otp=i),placeholder:"OTP"},null,512),[[b,e.otp]])])):a("",!0),e.submitOtp&&y.value?(l(),n("div",te,r(y.value),1)):a("",!0),u.value.regOtpStatus?(l(),n("div",se,[d(" Didn't get it ? "),e.activeTimer?(l(),n("strong",ie,"Resend Code in "+r(e.countdown)+" Seconds",1)):(l(),n("strong",{key:1,class:"resend",onClick:s[6]||(s[6]=i=>I())},"Resend OTP"))])):a("",!0),t("div",le,[u.value.regOtpStatus?a("",!0):(l(),n("button",ne,[d(" Get OTP "),h(g)])),u.value.regOtpStatus?(l(),n("button",oe,[d(" Register "),h(g)])):a("",!0)]),t("div",ae,[d(" Back to "),h(g),h(P,{to:"/login"},{default:B(()=>[d("Login")]),_:1})])],32)}}};export{me as default};
