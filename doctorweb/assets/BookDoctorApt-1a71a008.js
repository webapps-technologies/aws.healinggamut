import{u as X,B as Z,C as ee,c as u,s as V,v as te,m,D as se,r as U,o,a,b as t,t as n,d as F,z as y,x as v,y as g,$ as A,f as r,F as R,E as $,H as le,g as x}from"./vendor-5e5c4e37.js";import{_ as oe}from"./calender-9d47370a.js";import"./vue3-editor.common-8412b46c.js";const ae={class:"form"},ie={class:"card-body"},ne={class:"clinic-info"},re={class:"about"},de={class:"rate-row"},ue={class:"name"},ce={class:"rating"},me={class:"text text-grey"},ve={class:"form-item mb-10"},_e=t("div",{class:"title"},"Appointment Date",-1),he={class:"date-input w-10-r"},pe=["min"],fe=t("div",{class:"icon"},[t("img",{src:oe,alt:""})],-1),be={class:"slot-section"},ke={class:"locker"},Se={class:"radio-btns"},ye={class:"radio"},ge={class:"label"},De={class:"radio"},Pe={class:"label"},Ne={key:0,class:"err-msg"},Ve={class:"mb-10"},Ae={class:"slot-header"},Ye={class:"card-container"},Ee=["onClick"],Me={class:"day"},Te={class:"date"},Ce={class:"slot-status"},we={key:0,class:"text text-green f-w-bold"},Oe={key:1,class:"text text-red f-w-bold"},Ie={key:0,class:"err-msg"},Le={key:1,class:"slot-body"},Ue=t("div",{class:"heading-slot"},"Available Slot :",-1),Fe={class:"mb-16"},Re={class:"book-slots"},$e=["for","onClick"],xe=["id","value"],Be={key:1,class:"time"},Ge={key:0,class:"online"},He={key:1,class:"offline"},ze={key:2,class:"hospital"},Ke={key:2,class:"time"},We=t("div",{class:"not-online"},"Not Available",-1),je=[We],qe={key:0,class:"err-msg"},Je={key:0,class:"mb-16"},Qe=t("div",{class:"heading-slot"},"Time Slot :",-1),Xe={class:"book-slots"},Ze=["for"],et=["id","value","onChange"],tt={class:"time-slot"},st={key:0,class:"err-msg"},lt={key:1,class:"mb-16 w-15"},ot=t("div",{class:"sel-ti"},"Select Time",-1),at={key:0,class:"err-msg"},it={key:2,class:"patn-head"},nt={key:3,class:"form-Container"},rt={class:"tow-row"},dt={class:"form-item mb-16"},ut=t("div",{class:"title"},"First Name ",-1),ct={key:0,class:"err-msg"},mt={class:"form-item mb-16"},vt=t("div",{class:"title"},"Last Name ",-1),_t={key:0,class:"err-msg"},ht={class:"form-item mb-16"},pt=t("div",{class:"title"},"Phone ",-1),ft={key:0,class:"err-msg"},bt={class:"tow-row"},kt={class:"form-item mb-16"},St=t("div",{class:"title"},"Email ",-1),yt={key:0,class:"err-msg"},gt={class:"form-item mb-16"},Dt=t("div",{class:"title"},"Gender ",-1),Pt={key:0,class:"err-msg"},Nt={class:"form-item mb-16"},Vt=t("div",{class:"title"},"Dob ",-1),At=["max"],Yt={key:0,class:"err-msg"},Et={class:"book-btn"},Ot={__name:"BookDoctorApt",setup(Mt){const c=X();Z(),ee();const P=u(()=>c.state.Doctor),h=u(()=>c.state.Auth),p=V([]),N=V(null),f=V(null),b=V(null),G=[{id:"MALE",name:"MALE"},{id:"FEMALE",name:"FEMALE"},{id:"OTHER",name:"OTHER"}],e=te({submit:!1,fromDate:m().format("YYYY-MM-DD"),toDate:m().format("YYYY-MM-DD"),calendarDate:m().format("YYYY-MM-DD"),scheduleOn:m().format("YYYY-MM-DD"),limit:100,offset:0,keyword:"",error:null,errorSlot:null,roles:null,doctor:null,showPdetails:!1,timePickerStatus:!1,showDrDetails:!1,timePicker:"00:00:00",firstName:null,lastName:null,patientGender:"MALE",contactNumber:null,email:null,dob:null,slotId:null});se(()=>{});async function H(){var i,l;if(e.timePickerStatus&&E.value)return e.submit=!0,c.dispatch("Alert/error",{msg:"Please Select Time!"});if(T.value)return e.submit=!0,c.dispatch("Alert/error",{msg:"Please Select Locker status"});if(e.submit=!1,((i=p.value)==null?void 0:i.length)<=0)return e.error="Please Select date",c.dispatch("Alert/error",{msg:"Please Select date"});if(e.error=null,f.value!==null){if(((l=P.value.slotTimeData)==null?void 0:l.length)>0&&M.value)return e.submit=!0,c.dispatch("Alert/error",{msg:"Please Select Time"});if(D.value||J.value||C.value||O.value||w.value||I.value)return e.submit=!0,null;e.submit=!1;const _=e.scheduleOn+"T"+e.timePicker,k=e.scheduleOn+"T"+b.value,L={scheduleOn:e.timePickerStatus?_:k,scheduleFor:null,type:e.timePickerStatus?"OFFLINE":"ONLINE",appointmentFor:"Doctor Appointment",mode:"NEW",scheduleType:"REGULAR",note:null,doctorReference:null,collectionAt:null,collectionCenter:null,collectionBy:null,patientDetailId:null,franchiseId:null,pid:null,patientDetail:{firstName:e.firstName,lastName:e.lastName,dob:e.dob,gender:e.patientGender,mobile:e.contactNumber,email:e.email},labtest:[],doctorFees:+h.value.fees,hospitalFees:0,commission:0,gst:0,discount:0,lockerStatus:e.lockerStatus,doctorDetailId:h.value.id,slotId:e.timePickerStatus?null:e.slotId,laboratoryId:null,organizationId:null};(await c.dispatch("Appointments/bookAppointments",L)).status===201&&(e.firstName=null,e.lastName=null,e.patientGender=null,e.contactNumber=null,e.email=null,e.dob=null,e.timePicker="00:00",e.patientModal=!1)}else return e.errorSlot="Please Select Slot",c.dispatch("Alert/error",{msg:"Please Select Slot"})}const z=(i,l,_,k)=>{e.scheduleOn=k,P.value.slotTimeData=[],e.showPdetails=!1,f.value=null,b.value=null,l?(e.error=null,N.value=i,p.value=_):(e.errorSlot=null,N.value=null,p.value=[])};function K(i,l){if(f.value=l,e.showPdetails=!0,e.errorSlot=null,i.online){e.timePickerStatus=!1;const _=m(e.calendarDate).format("YYYY-MM-DD");return c.dispatch("Doctor/getSlotTime",{currentDate:_,periodId:i.id})}i.offline||i.clinicVisitStatus?e.timePickerStatus=!0:e.timePickerStatus=!1}function Y(i){if(i){var l=m(i,"HH:mm:ss").format("hh:mm A");return l}}function W(i){if(i){var l=m(i).format("MMM Do YYYY");return l}}function j(){return p.value=[],N.value=null,P.value.slotTimeData=[],e.showPdetails=!1,f.value=null,b.value=null,c.commit("Auth/SET_DOCTOR_SCHEDULE",e.calendarDate)}function q(i){if(i){const l=m(),_=m(i);return`${l.diff(_,"years")}Y`}return"Not Mentioned"}function B(){return m().format("YYYY-MM-DD")}u(()=>{e.dob&&q(e.dob)});const E=u(()=>{if(e.timePicker=="00:00")return"Please Select Time"}),M=u(()=>{if(!e.timePickerStatus&&!b.value)return"Please Select Time Slot"}),T=u(()=>{if(!e.lockerStatus)return"Please select locker status"}),D=u(()=>{if(!e.firstName)return"Please enter first name"}),J=u(()=>{if(!e.lastName)return"Please enter last name"}),C=u(()=>{if(!e.dob)return"Please enter dob"}),w=u(()=>{if(!e.patientGender)return"Please select gender"}),O=u(()=>{if(!e.contactNumber)return"Please enter phone no"}),I=u(()=>{let i=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.email){if(!i.test(e.email))return"Please enter valid email!"}else return"Please enter email!"});function Q(i){let l=String.fromCharCode(i.keyCode);if(/^[0-9]+$/.test(l))return!0;i.preventDefault()}return(i,l)=>{const _=U("icon-star"),k=U("time-picker"),L=U("Select");return o(),a("div",ae,[t("div",ie,[t("div",ne,[t("div",re,[t("div",de,[t("h3",ue,n(h.value.name),1),t("div",ce,[F(_),y(" "+n(h.value.rating),1)])]),t("div",me,n(h.value.address),1)])]),t("div",ve,[_e,t("div",he,[v(t("input",{type:"date","onUpdate:modelValue":l[0]||(l[0]=s=>e.calendarDate=s),min:B(),onChange:j},null,40,pe),[[g,e.calendarDate]]),fe])]),t("div",be,[t("div",ke,[y("Share Your Health Locker "),t("div",Se,[t("div",ye,[t("label",ge,[v(t("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[1]||(l[1]=s=>e.lockerStatus=s),value:"YES"},null,512),[[A,e.lockerStatus]]),y(" YES ")])]),t("div",De,[t("label",Pe,[v(t("input",{class:"input-radio",type:"radio",name:"inlineRadioOptions","onUpdate:modelValue":l[2]||(l[2]=s=>e.lockerStatus=s),value:"NO"},null,512),[[A,e.lockerStatus]]),y(" NO ")])])])]),e.submit&&T.value?(o(),a("div",Ne,n(T.value),1)):r("",!0),t("div",Ve,[y("Appointment on "),t("strong",null,n(W(e.scheduleOn)),1)]),t("div",Ae,[t("div",Ye,[(o(!0),a(R,null,$(h.value.doctorScheduleApt,(s,d)=>(o(),a("div",{class:le(["slot-card",{active:N.value==d}]),key:d,onClick:x(S=>z(d,s.status,s.period,s.date),["prevent"])},[t("div",Me,n(s.name),1),t("div",Te,n(s.date),1),t("div",Ce,[s.status?(o(),a("div",we,"Slots Available")):(o(),a("div",Oe,"Slot Not Available"))])],10,Ee))),128))]),e.error?(o(),a("div",Ie,n(e.error),1)):r("",!0)]),p.value.length>0?(o(),a("div",Le,[Ue,t("div",Fe,[t("div",Re,[(o(!0),a(R,null,$(p.value,(s,d)=>(o(),a("div",{class:"slot-item",key:d},[t("label",{for:`input-${d}`,onClick:x(S=>K(s,d),["prevent"])},[s.online||s.offline||s.clinicVisitStatus?v((o(),a("input",{key:0,type:"radio",id:`input-${d}`,name:"slot","onUpdate:modelValue":l[3]||(l[3]=S=>f.value=S),value:d},null,8,xe)),[[A,f.value]]):r("",!0),s.clinicVisitStatus||s.online||s.offline?(o(),a("div",Be,[y(n(Y(s.time_start))+" - "+n(Y(s.time_end))+" ",1),s.online?(o(),a("div",Ge,"Online Consultancy Available")):r("",!0),s.offline?(o(),a("div",He,"Offline Consultancy Available")):r("",!0),s.clinicVisitStatus?(o(),a("div",ze,"Clinic Studio Consultancy Available")):r("",!0)])):(o(),a("div",Ke,je))],8,$e)]))),128))]),e.errorSlot?(o(),a("div",qe,n(e.errorSlot),1)):r("",!0)]),e.timePickerStatus?(o(),a("div",lt,[ot,F(k,{modelValue:e.timePicker,"onUpdate:modelValue":l[5]||(l[5]=s=>e.timePicker=s)},null,8,["modelValue"]),e.submit&&E.value?(o(),a("div",at,n(E.value),1)):r("",!0)])):(o(),a("div",Je,[Qe,t("div",Xe,[(o(!0),a(R,null,$(P.value.slotTimeData,(s,d)=>(o(),a("div",{class:"slot-item-time",key:d},[t("label",{for:`inputs-${d}`},[v(t("input",{type:"radio",id:`inputs-${d}`,name:"slotTime","onUpdate:modelValue":l[4]||(l[4]=S=>b.value=S),value:s.time,onChange:S=>e.slotId=s.id},null,40,et),[[A,b.value]]),t("div",tt,n(Y(s.time)),1)],8,Ze)]))),128))]),e.submit&&M.value?(o(),a("div",st,n(M.value),1)):r("",!0)])),e.showPdetails?(o(),a("div",it,"Patient Details :")):r("",!0),e.showPdetails?(o(),a("div",nt,[t("div",rt,[t("div",dt,[ut,v(t("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=s=>e.firstName=s),placeholder:"Enter First Name"},null,512),[[g,e.firstName]]),e.submit&&D.value?(o(),a("div",ct,n(D.value),1)):r("",!0)]),t("div",mt,[vt,v(t("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=s=>e.lastName=s),placeholder:"Enter Last Name"},null,512),[[g,e.lastName]]),e.submit&&D.value?(o(),a("div",_t,n(D.value),1)):r("",!0)]),t("div",ht,[pt,v(t("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=s=>e.contactNumber=s),placeholder:"Enter Phone",onKeypress:l[9]||(l[9]=s=>Q(s)),maxlength:"10"},null,544),[[g,e.contactNumber]]),e.submit&&O.value?(o(),a("div",ft,n(O.value),1)):r("",!0)])]),t("div",bt,[t("div",kt,[St,v(t("input",{type:"text","onUpdate:modelValue":l[10]||(l[10]=s=>e.email=s),placeholder:"Enter Email"},null,512),[[g,e.email]]),e.submit&&I.value?(o(),a("div",yt,n(I.value),1)):r("",!0)]),t("div",gt,[Dt,F(L,{modelValue:e.patientGender,"onUpdate:modelValue":l[11]||(l[11]=s=>e.patientGender=s),options:G},null,8,["modelValue"]),e.submit&&w.value?(o(),a("div",Pt,n(w.value),1)):r("",!0)]),t("div",Nt,[Vt,v(t("input",{type:"date","onUpdate:modelValue":l[12]||(l[12]=s=>e.dob=s),placeholder:"Enter Age",max:B()},null,8,At),[[g,e.dob]]),e.submit&&C.value?(o(),a("div",Yt,n(C.value),1)):r("",!0)])])])):r("",!0),t("div",Et,[t("button",{type:"button",class:"btn black-btn w-10-r",onClick:x(H,["prevent"])},"Book")])])):r("",!0)])])])}}};export{Ot as default};
