import{s as P,u as V,c as v,v as x,r as b,o as n,a as o,b as s,x as y,y as k,t as f,f as r,z as a,d as m,w as S,g as C}from"./vendor-5e5c4e37.js";const R=s("h2",null,"Welcome to Medical Tourism",-1),N=s("div",{class:"text"},"Login to continue",-1),w={class:"form-item mb-16"},D=s("div",{class:"title"},"Phone Number",-1),E={class:"input i-input"},U=s("div",{class:"i-tag"},"+91",-1),A={key:0,class:"err-msg"},L={key:0,class:"form-item mb-16"},M=s("div",{class:"title"},"Enter OTP",-1),B={key:1,class:"err-msg"},K={key:2,class:"send-again"},$={key:0,class:"code-msg"},z={class:"login-btn form-item"},G={key:0,type:"submit",class:"btn black-btn"},H={key:1,type:"submit",class:"btn black-btn"},W={class:"reg"},q={__name:"Login",setup(Y){P("");const u=V(),l=v(()=>u.state.Auth),t=x({submit:!1,submitOtp:!1,loginId:null,input1:null,input2:null,input3:null,input4:null,otp:"",time:30,timerRunning:!1,intervalId:null}),I=()=>{if(l.value.otpStatus){if(c.value){t.submitOtp=!0;return}t.submitOtp=!1,u.dispatch("Auth/otpVerifyUser",{loginId:t.loginId,otp:t.otp})}else{if(d.value){t.submit=!0;return}t.submit=!1,_(),u.dispatch("Auth/verifyUser",{loginId:t.loginId,type:"DOCTOR"})}};function O(){if(d.value){t.submit=!0;return}t.submit=!1,_(),u.dispatch("Auth/verifyUser",{loginId:t.loginId,type:"DOCTOR"})}function _(){t.timerRunning=!0,t.time=30,t.intervalId=setInterval(()=>{t.time>1?t.time--:(clearInterval(t.intervalId),t.timerRunning=!1)},1e3)}const d=v(()=>{if(!t.loginId)return"Please Enter Your Registered Phone Number"}),c=v(()=>{if(t.otp){if(t.otp.length!=4)return"Pleade Enter Valid OTP !"}else return"Please Enter OTP!"});function h(p){let e=String.fromCharCode(p.keyCode);if(/^[0-9]+$/.test(e))return!0;p.preventDefault()}return(p,e)=>{const g=b("icon-right-arrow"),T=b("router-link");return n(),o("form",{class:"form",onSubmit:C(I,["prevent"])},[R,N,s("div",w,[D,s("div",E,[U,y(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>t.loginId=i),name:"phone",placeholder:"Enter Phone number",onKeypress:e[1]||(e[1]=i=>h(i)),maxlength:"10"},null,544),[[k,t.loginId]])]),t.submit&&d.value?(n(),o("div",A,f(d.value),1)):r("",!0)]),l.value.otpStatus?(n(),o("div",L,[M,y(s("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>t.otp=i),placeholder:"OTP",maxlength:"4",onKeypress:e[3]||(e[3]=i=>h(i))},null,544),[[k,t.otp]])])):r("",!0),t.submitOtp&&c.value?(n(),o("div",B,f(c.value),1)):r("",!0),l.value.otpStatus?(n(),o("div",K,[a(" Didn't get it ? "),t.timerRunning?(n(),o("strong",$,"Resend Code in "+f(t.time)+" Seconds",1)):(n(),o("strong",{key:1,class:"resend",onClick:e[4]||(e[4]=i=>O())},"Resend OTP"))])):r("",!0),s("div",z,[l.value.otpStatus?r("",!0):(n(),o("button",G,[a("Get OTP "),m(g)])),l.value.otpStatus?(n(),o("button",H,[a("Login "),m(g)])):r("",!0)]),s("div",W,[a(" New On Medical Tourism "),m(g),m(T,{to:"/features"},{default:S(()=>[a("Register Here")]),_:1})])],32)}}};export{q as default};
